"use strict";(self.webpackChunkmy_education_dashboard=self.webpackChunkmy_education_dashboard||[]).push([[244],{244:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var l=s(43),a=s(184),n=s(420),i=s(659),r=s(277),o=s(487),d=s(579);const c=l.memo(e=>{let{test:t,isEditMode:s,onDelete:l}=e;const a={...t,title:(null===t||void 0===t?void 0:t.title)||"Untitled Test",mcqs:(null===t||void 0===t?void 0:t.mcqs)||0,completed:(null===t||void 0===t?void 0:t.completed)||!1,link:(null===t||void 0===t?void 0:t.link)||"",date:(null===t||void 0===t?void 0:t.date)||(new Date).toISOString().split("T")[0],subject:(null===t||void 0===t?void 0:t.subject)||""},n=(0,r.j)(),i=a.link&&!s?"cursor-pointer hover:shadow-md hover:-translate-y-1":"",c=`relative p-4 rounded-lg flex justify-between items-center transition-all duration-300 ${a.completed?"bg-green-100":"bg-gray-50"} ${i}`;return(0,d.jsxs)("div",{id:`trophy-test-item-${a.subject}-${a.title}`,className:c,onClick:()=>{!s&&a.link&&(a.link.startsWith("http")?window.open(a.link,"_blank"):console.warn(`Invalid link for ${a.title}: ${a.link}. Must start with http:// or https://`))},"aria-label":a.completed?"Completed test":"Incomplete test",children:[(0,d.jsxs)("div",{className:"flex items-center flex-grow min-w-0",children:[(0,d.jsx)(o.P.button,{onClick:e=>{e.stopPropagation(),a.subject&&a.title?n.toggleTestCompletion(a.subject,a.title,!a.completed):console.error("Cannot toggle test completion: subject or title is missing")},className:"flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-4","aria-label":a.completed?"Mark as incomplete":"Mark as complete",whileTap:{scale:.85},animate:{scale:a.completed?1.1:1,backgroundColor:a.completed?"#22c55e":"#ffffff00",borderColor:a.completed?"#22c55e":"#d1d5db"},transition:{type:"spring",stiffness:400,damping:15},children:a.completed&&(0,d.jsx)(o.P.svg,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500,damping:20},xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"flex items-center gap-2",children:(0,d.jsx)("h4",{className:"font-semibold truncate "+(a.completed?"text-gray-800":"text-gray-900"),children:a.title})}),(0,d.jsxs)("p",{className:"text-sm mt-1 "+(a.completed,"text-gray-600"),children:[a.mcqs," MCQs"]})]})]}),(0,d.jsx)("div",{className:"flex-shrink-0 ml-2",children:s?(0,d.jsx)("button",{className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-100 transition-colors duration-200",onClick:e=>{e.stopPropagation(),l(a.subject,a.title)},"aria-label":"Delete test",children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M3 6h18"}),(0,d.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,d.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,d.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,d.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}):t.link&&(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:(0,d.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})});var u=s(377);const m=l.memo(e=>{let{currentSelectedSubject:t,setCurrentSelectedSubject:s,showNotification:o}=e;const{testData:m,handleAddTest:h}=(0,i.O)(),x=(0,r.j)(),{isAdmin:g}=(0,n.z)(),[p,b]=(0,l.useState)(!1),[f,j]=(0,l.useState)(!1),[y,v]=(0,l.useState)(""),w=(0,l.useMemo)(()=>Object.keys(m),[m]);(0,l.useEffect)(()=>{!(w.length>0)||t&&w.includes(t)?0===w.length&&""!==t&&s(""):s(w[0])},[w,t,s]);const k=l.useCallback(()=>{j(!0)},[]),N=l.useCallback(()=>{j(!1)},[]),C=l.useCallback(()=>{b(e=>!e)},[]),T=l.useCallback(e=>{s(e)},[s]),S=l.useCallback(e=>{v(e.target.value)},[]),M=(0,l.useCallback)((e,t)=>{g&&x.deleteTest(e,t)},[x,g]),q=((0,l.useCallback)((e,t,s)=>{g&&x.toggleTestCompletion(e,t,s)},[x,g]),(0,l.useCallback)(e=>{const t={...e,subject:e.subject||"",title:e.title||"Untitled Test",mcqs:e.mcqs||0,completed:e.completed||!1,date:e.date||(new Date).toISOString().split("T")[0],link:e.link||"",id:e.id||`${e.subject}-${e.title}`};return(0,d.jsx)("li",{children:(0,d.jsx)(c,{test:t,isEditMode:p,onDelete:()=>M(t.subject,t.title)})},t.id)},[p,M])),L=y.trim().length>0,$=L?Object.entries(m).flatMap(e=>{let[t,s]=e;return s.filter(e=>e.title.toLowerCase().includes(y.toLowerCase())).map(e=>({...e,subject:t}))}):t&&m[t]?m[t].map(e=>({...e,subject:t})):[],O=()=>(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,d.jsx)("div",{className:"w-24 h-24 mb-4 text-gray-300",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No tests added yet!"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Get started by adding your first test."}),(0,d.jsx)("button",{onClick:k,className:"mt-6 px-4 py-2 rounded-lg shadow-md transition-all duration-200 ease-in-out flex items-center gap-2 bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg hover:-translate-y-0.5 cursor-pointer",title:"Add test",children:(0,d.jsx)("span",{children:"Add Test"})})]});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{id:"page-trophy",className:"page px-6 py-8",children:[(0,d.jsx)("header",{className:"mb-2",children:(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tests"})}),(0,d.jsx)("p",{className:"text-gray-500 mb-6",children:"Completed Tests & Progress"}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsx)("input",{type:"text",placeholder:"Search tests...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:y,onChange:S,"aria-label":"Search tests"})}),!L&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex space-x-3 mb-6 overflow-x-auto hide-scrollbar",id:"subject-filters-container",children:w.map(e=>{var s,l;return(0,d.jsxs)("button",{className:"subject-filter flex-shrink-0 text-left p-3 rounded-lg transition-colors duration-200\n                                        "+(t===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>T(e),children:[(0,d.jsx)("p",{className:"font-bold",children:e}),(0,d.jsxs)("p",{className:"text-sm "+(t===e?"opacity-80":"text-gray-500"),children:[(null===(s=m[e])||void 0===s?void 0:s.length)||0," Test",1===(null===(l=m[e])||void 0===l?void 0:l.length)?"":"s"]})]},e)})}),g&&(0,d.jsx)("button",{onClick:C,className:`\n                fixed bottom-[9.5rem] right-6 z-50\n                bg-blue-50 text-blue-700 font-semibold \n                py-3 px-5 rounded-xl shadow-md \n                flex items-center text-sm\n                transition-all duration-200 ease-in-out\n                ${t?"hover:bg-blue-100 hover:shadow-lg hover:-translate-y-0.5 active:scale-[0.98] active:shadow-sm":"opacity-50 cursor-not-allowed"}\n              `,disabled:!t,title:t?p?"Done editing tests":"Edit tests":"Select a subject to edit tests",children:p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.CMH,{className:"mr-2"})," Done"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.F7,{className:"mr-2"})," Edit"]})}),g&&(0,d.jsxs)("button",{onClick:k,className:"\n                    fixed bottom-20 right-6 z-50\n                    bg-blue-600 text-white font-semibold \n                    py-4 px-6 rounded-xl shadow-lg \n                    flex items-center\n                    transition-all duration-200 ease-in-out\n                    hover:bg-blue-700 hover:shadow-xl hover:-translate-y-0.5 active:scale-[0.98] active:shadow-sm\n                  ",title:"Add a new test",children:[(0,d.jsx)(a.OiG,{className:"mr-2"}),(0,d.jsx)("span",{children:"Add Test"})]})]}),(0,d.jsxs)("div",{id:"test-list-container",className:"space-y-6 pb-24",children:[L?(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Search Results"}),$.length>0?(0,d.jsx)("ul",{className:"space-y-3",children:$.map(e=>q(e))}):(0,d.jsxs)("div",{className:"text-center py-8 text-gray-500",children:['No tests found matching "',y,'"']})]}):Object.entries($.reduce((e,t)=>{const s=t.subject||"Other";return e[s]||(e[s]=[]),e[s].push(t),e},{})).map(e=>{let[t,s]=e;return(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,d.jsx)("ul",{className:"space-y-3",children:s.map(e=>q(e))})]},t)}),!L&&0===$.length&&(0,d.jsx)(O,{})]})]}),(0,d.jsx)(u.A,{isOpen:f,onClose:N,onSave:e=>{x.addTest(t,e.title,e.mcqs,e.date,e.link)},title:`Add New Test to ${t}`,fields:[{name:"title",label:"Test Title",placeholder:"e.g., Mid-term Exam",required:!0},{name:"mcqs",label:"Number of MCQs",type:"number",placeholder:"e.g., 40",required:!0},{name:"date",label:"Completion Date",type:"date",required:!0},{name:"link",label:"Test Link (Optional)",type:"url",placeholder:"https://example.com/test"}],showNotification:o})]})})},377:(e,t,s)=>{s.d(t,{A:()=>d});var l=s(43),a=s(277),n=s(546),i=s(487),r=s(579);const o={},d=e=>{let{isOpen:t,onClose:s,onSave:d,title:c,fields:u,initialState:m=o}=e;const h=(0,a.j)(),[x,g]=(0,l.useState)({});(0,l.useEffect)(()=>{if(t){const e=u.reduce((e,t)=>(e[t.name]=m[t.name]||t.defaultValue||"",e),{});g(e)}else g({})},[t,u,m]);const p=e=>{const{name:t,value:s}=e.target;g(e=>({...e,[t]:s}))};return(0,r.jsx)(n.N,{children:t&&(0,r.jsx)(i.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:s,children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:c}),(0,r.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),"textarea"===e.type?(0,r.jsx)("textarea",{id:e.name,name:e.name,placeholder:e.placeholder||"",value:x[e.name]||"",onChange:p,disabled:e.disabled||!1,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"}):"select"===e.type?(0,r.jsx)("select",{id:e.name,name:e.name,value:x[e.name]||"",onChange:p,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200",children:e.options&&e.options.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,r.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,placeholder:e.placeholder||"",value:x[e.name]||"",onChange:p,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"})]},e.name))}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{for(const e of u)if(e.required&&!x[e.name])return void(h.showNotification?h.showNotification(`${e.label} is required.`,"error"):console.error(`${e.label} is required.`));d?d(x):h.addTimetableEntry&&h.addTimetableEntry(x),s()},className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Save"})]})]})})})}}}]);
//# sourceMappingURL=244.c52b6a3a.chunk.js.map