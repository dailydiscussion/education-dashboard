"use strict";(self.webpackChunkmy_education_dashboard=self.webpackChunkmy_education_dashboard||[]).push([[990],{990:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var l=s(555),a=s(43),r=s(579);const n=a.memo(e=>{let{userName:t}=e;const[s,l]=(0,a.useState)(""),[n,o]=(0,a.useState)("");return(0,a.useEffect)(()=>{const e=()=>{const e=(new Date).getHours();let t="",s="";e>=5&&e<12?(t="Good morning",s="\u2600\ufe0f"):e>=12&&e<17?(t="Good afternoon",s="\ud83d\udc4b"):e>=17&&e<22?(t="Good evening",s="\ud83c\udf19"):(t="Time to sleep",s="\ud83d\ude34"),l(t),o(s)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-base font-light text-gray-500 flex items-center",children:[s,(0,r.jsx)("span",{className:"ml-1 text-base",children:n})]})})});var o=s(986),i=s(648),c=s(24);const d=["item","onRemove","handleToggleTestCompletion","handleOpenFocusTest"],m=a.memo(e=>{let{item:t,onRemove:s,handleToggleTestCompletion:a,handleOpenFocusTest:n}=e;(0,o.A)(e,d);const{attributes:m,listeners:x,setNodeRef:u,transform:h,transition:g,isDragging:p}=(0,i.gl)({id:t.id}),b={transform:c.Ks.Transform.toString(h),transition:g,opacity:p?.7:1,background:p?"#f0f0f0":void 0},j=(t.completed||(e=>{if(!e)return"#E5E7EB";let t=0;for(let s=0;s<e.length;s++)t=e.charCodeAt(s)+((t<<5)-t);"hsl(".concat(t%360,", 70%, 60%)")})(t.subject),"\n        flex items-center w-full p-4 rounded-lg border-l-4 transition-all duration-200 ease-in-out\n        ".concat(t.completed?"bg-green-100":"bg-gray-50"," hover:shadow-lg cursor-pointer\n    ")),f="\n        font-bold text-gray-800 text-md\n        ".concat(t.completed?"line-through text-gray-400":"","\n    ");return console.log("FocusItemCard item.testUrl:",t.testUrl),(0,r.jsx)("div",{ref:u,style:b,className:j.replace("border-l-4",""),children:(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mr-4 flex-shrink-0",children:(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),a(t.subject,t.title,!t.completed)},className:"w-6 h-6 rounded-full border-2 ".concat(t.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-blue-500"," flex-shrink-0 flex items-center justify-center transition-colors duration-200"),"aria-label":t.completed?"Mark as incomplete":"Mark as complete",children:t.completed&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),t.link?(0,r.jsxs)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"flex-grow min-w-0 px-2 py-1 block focus:outline-none",tabIndex:0,"aria-label":"Open test for ".concat(t.title),style:{textDecoration:"none"},children:[(0,r.jsx)("h3",{className:f,title:t.title,children:t.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate",children:t.subject}),(0,r.jsx)("div",{className:"flex items-center mt-2 text-xs space-x-4",children:t.mcqs>0&&(0,r.jsxs)("span",{className:"text-gray-600 flex items-center",children:[t.mcqs," MCQs"]})})]}):(0,r.jsxs)("div",{className:"flex-grow min-w-0 px-2 py-1",children:[(0,r.jsx)("h3",{className:f,title:t.title,children:t.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate",children:t.subject}),(0,r.jsx)("div",{className:"flex items-center mt-2 text-xs space-x-4",children:t.mcqs>0&&(0,r.jsxs)("span",{className:"text-gray-600 flex items-center",children:[t.mcqs," MCQs"]})})]}),(0,r.jsx)("div",{className:"flex flex-col items-center space-y-1 ml-2 flex-shrink-0",children:(0,r.jsx)("button",{className:"p-1.5 rounded-full text-gray-400 hover:text-red-600 hover:bg-gray-100",onClick:e=>{e.stopPropagation(),s(t.id)},"aria-label":"Remove from focus",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})}),(0,r.jsx)("span",(0,l.A)((0,l.A)((0,l.A)({},m),x),{},{className:"drag-handle flex items-center justify-center rounded-md ml-2 flex-shrink-0",style:{cursor:"grab",width:36,height:36,touchAction:"none",background:"none"},"aria-label":"Drag to reorder",tabIndex:0,children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#6B7280",children:(0,r.jsx)("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})})}))]})})});var x=s(144);const u=a.memo(e=>{let{percentage:t}=e;const s=2*Math.PI*15.9155,l=s-t/100*s;return(0,r.jsxs)("div",{className:"relative w-20 h-20",children:[(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,r.jsx)("path",{className:"text-green-200",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",strokeWidth:"3",stroke:"currentColor"}),(0,r.jsx)("path",{className:"progress-ring__circle text-green-500",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",strokeWidth:"3",strokeLinecap:"round",stroke:"currentColor",style:{strokeDasharray:"".concat(s," ").concat(s),strokeDashoffset:l}})]}),(0,r.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-xl font-bold text-green-600",children:[Math.round(t),"%"]})]})}),h=e=>{let{day:t,planned:s,completed:l,missed:a,isToday:n}=e;const o=s>0?l/s*100:0,i=s>0?a/s*100:0;return(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"absolute bottom-full mb-2 w-max px-2 py-1 text-xs text-white bg-gray-800 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[l,"/",s," Done, ",a," Missed"]}),(0,r.jsxs)("div",{className:"group h-28 w-6 bg-gray-200 rounded-full flex flex-col justify-end overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-red-400 transition-all duration-500",style:{height:"".concat(i,"%")}}),(0,r.jsx)("div",{className:"bg-cyan-400 transition-all duration-500",style:{height:"".concat(o,"%")}})]})]}),(0,r.jsx)("p",{className:"text-sm font-semibold ".concat(n?"text-cyan-500":"text-gray-500"),children:t})]})},g=a.memo(e=>{let{weeklyData:t}=e;const s=t.reduce((e,t)=>e+t.completed,0),l=t.reduce((e,t)=>e+t.missed,0);return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-gray-500 text-sm",children:"Overall"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-gray-800",children:[s," ",(0,r.jsx)("span",{className:"text-lg font-medium text-gray-600",children:"Completed"})]}),(0,r.jsxs)("p",{className:"text-red-500 text-lg font-bold",children:[l," ",(0,r.jsx)("span",{className:"font-medium",children:"Missed"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-gray-200 mr-2"}),(0,r.jsx)("span",{children:"Planned"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-cyan-400 mr-2"}),(0,r.jsx)("span",{children:"Completed"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-3 h-3 rounded-full bg-red-400 mr-2"}),(0,r.jsx)("span",{children:"Missed"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-around",children:t.map(e=>(0,r.jsx)(h,{day:e.day,planned:e.planned,completed:e.completed,missed:e.missed,isToday:e.isToday},e.day))})]})}),p=e=>{let{test:t,subject:s,isAdded:l,onAdd:a,onRemove:n,handleToggleTestCompletion:o}=e;const i="\n        flex items-center justify-between p-3 rounded-xl border transition-all duration-300\n        ".concat(t.completed?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:shadow-md","\n    "),c="\n        font-semibold\n        ".concat(t.completed?"line-through text-gray-500":"text-gray-800","\n    "),d="\n        text-sm\n        ".concat(t.completed?"text-gray-400":"text-gray-500","\n    ");return(0,r.jsxs)("div",{id:"available-test-".concat(t.id),className:i,children:[(0,r.jsxs)("div",{className:"flex items-center flex-grow mr-2",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),o(s,t.title,!t.completed)},className:"w-6 h-6 rounded-md border-2 ".concat(t.completed?"bg-green-500 border-green-500":"border-gray-300"," mr-3 flex-shrink-0 flex items-center justify-center transition-colors"),"aria-label":t.completed?"Mark as incomplete":"Mark as complete",children:t.completed&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,r.jsxs)("div",{className:"truncate",children:[(0,r.jsx)("h4",{className:c,children:t.title}),(0,r.jsx)("p",{className:d,children:s})]})]}),(0,r.jsx)("button",{onClick:l?e=>{e.stopPropagation();const s={id:t.id};s&&n(s.id)}:e=>{e.stopPropagation(),a(t,s)},className:"flex-shrink-0 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors duration-200\n                    ".concat(l?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:l?"Remove":"Add"})]})},b=e=>{let{isOpen:t,onClose:s,testData:n,todayFocusItems:o,addFocusItem:i,removeFocusItem:c,handleToggleTestCompletion:d}=e;const[m,x]=(0,a.useState)(""),[u,h]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&(x(""),h(""))},[t]);const g=(0,a.useMemo)(()=>Object.keys(n).flatMap(e=>n[e].map(t=>(0,l.A)((0,l.A)({},t),{},{subject:e,id:"".concat(e,"-").concat(t.title)}))),[n]),b=(0,a.useMemo)(()=>g.filter(e=>{const t=""===u||e.subject===u,s=e.title.toLowerCase().includes(m.toLowerCase())||e.subject.toLowerCase().includes(m.toLowerCase());return t&&s}),[g,u,m]),j=Object.keys(n);return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100 flex flex-col",style:{maxHeight:"85vh"},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Add to Today's Focus"}),(0,r.jsx)("button",{onClick:s,className:"p-2 rounded-full text-gray-500 hover:bg-gray-200 transition-colors","aria-label":"Close modal",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"select-available-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Subject:"}),(0,r.jsxs)("select",{id:"select-available-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:u,onChange:e=>h(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"All Subjects"}),j.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("input",{type:"text",placeholder:"Search available tests...",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:m,onChange:e=>x(e.target.value),"aria-label":"Search available tests"})}),(0,r.jsx)("div",{id:"available-tests-list",className:"space-y-3 pr-2 -mr-2 overflow-y-auto flex-grow",children:0===b.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No tests available matching your filters."}):b.map(e=>{const t=o.some(t=>t.id===e.id||t.subject===e.subject&&t.title===e.title);return(0,r.jsx)(p,{test:e,subject:e.subject,isAdded:t,onAdd:i,onRemove:c,handleToggleTestCompletion:d},e.id)})}),(0,r.jsx)("div",{className:"mt-6 flex justify-end pt-4 border-t border-gray-200",children:(0,r.jsx)("button",{onClick:s,className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Done"})})]})}):null};var j=s(585);const f=a.memo(e=>{let{testData:t,timetableEntries:s,todayFocusItems:o,addFocusItem:c,removeFocusItem:d,reorderFocusItems:h,onNavigate:p,userName:f,handleToggleTestCompletion:y,isLoadingTodayFocus:v,currentTimetableSubject:N,setCurrentTimetableSubject:w,setCurrentSelectedSubject:k,navigateToTrophyPage:C}=e;const[T,M]=(0,a.useState)(!1),S=(0,a.useMemo)(()=>o.map((e,t)=>(0,l.A)((0,l.A)({},e),{},{order:void 0!==e.order?e.order:t})),[o]),D=(0,a.useMemo)(()=>Object.keys(t),[t]),F=(0,a.useMemo)(()=>t[N]?t[N].filter(e=>e.completed).length:0,[t,N]),A=(0,a.useMemo)(()=>t[N]?t[N].length:0,[t,N]),L=(0,a.useMemo)(()=>{const e=t[N]||[],s=e.length,l=e.filter(e=>e.completed).length;return s>0?l/s*100:0},[t,N]),I=(0,a.useMemo)(()=>{if(!s)return[];const e=["Su","Mo","Tu","We","Th","Fr","Sa"],t=[],l=new Date,a=l.toLocaleDateString("en-CA"),r=new Date(l);r.setHours(0,0,0,0),r.setDate(l.getDate()-l.getDay());for(let n=0;n<7;n++){const l=new Date(r);l.setDate(r.getDate()+n);const o=l.toLocaleDateString("en-CA"),i=s.filter(e=>e.date===o);let c=0,d=0;const m=new Date;i.forEach(e=>{if(e.checked)c++;else{new Date("".concat(e.date,"T").concat(e.time))<m&&d++}}),t.push({day:e[l.getDay()],planned:i.length,completed:c,missed:d,isToday:o===a})}return t},[s]),E=(0,j.FR)((0,j.MS)(j.AN,{activationConstraint:{distance:5}}),(0,j.MS)(j.IG,{activationConstraint:{delay:100,tolerance:5}}),(0,j.MS)(j.uN)),B=(0,a.useCallback)(e=>{y(e)},[y]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{id:"page-dashboard",className:"page px-6 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8 cursor-pointer transition-colors duration-300",onClick:()=>p("profile"),children:[(0,r.jsx)("img",{src:"https://placehold.co/80x80/E2E8F0/4A5568?text=NK",alt:"User Avatar",className:"w-16 h-16 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl text-gray-600",children:["Hello ",(0,r.jsx)("span",{className:"font-bold text-gray-800",children:"Nikhil !"})]}),(0,r.jsx)(n,{userName:f||"User"})]})]}),(0,r.jsx)("header",{className:"flex items-center justify-between mb-2",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Weekly Performance"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Your progress for this week..."}),(0,r.jsx)("div",{className:"mb-10",children:(0,r.jsx)(g,{weeklyData:I})}),(0,r.jsx)("header",{className:"flex items-center justify-between ",children:(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Subject Progress"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Track completed tests for a specific subject."}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"select-timetable-subject",className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Subject:"}),(0,r.jsxs)("select",{id:"select-timetable-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,onChange:e=>{const t=e.target.value;w(t),k(t),localStorage.setItem("currentTimetableSubject",t)},disabled:0===D.length,children:[0===D.length&&(0,r.jsx)("option",{value:"",children:"No Subjects Available"}),D.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{id:"timetable-progress-card",onClick:()=>C(N),className:"rounded-xl border p-5 flex items-center justify-between mb-10 cursor-pointer transition-colors duration-300 shadow-sm",children:[(0,r.jsx)(u,{percentage:L}),(0,r.jsxs)("div",{className:"flex-1 ml-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Subject"}),(0,r.jsx)("p",{id:"timetable-progress-subject",className:"text-xl font-bold text-gray-800",children:N||"Select Subject"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Tests Completed"}),(0,r.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[F,"/",A]})]}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"9 18 15 12 9 6"})})]}),(0,r.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Today's Focus"}),(0,r.jsxs)("button",{onClick:()=>M(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Edit Focus"]})]}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Your tests for today..."}),(0,r.jsx)("div",{id:"today-focus-container",className:"flex flex-col space-y-4 pb-4",children:v?(0,r.jsx)(x.A,{}):0===S.length?(0,r.jsx)("p",{className:"text-gray-500 text-center w-full",children:'No focus items for today. Click "Edit Focus" to add some.'}):(0,r.jsx)(j.Mp,{sensors:E,collisionDetection:j.fp,onDragEnd:e=>{const{active:t,over:s}=e;if(t.id!==s.id){const e=o.findIndex(e=>e.id===t.id),l=o.findIndex(e=>e.id===s.id),a=(0,i.be)(o,e,l);h(a)}},children:(0,r.jsx)(i.gB,{items:o.map(e=>e.id),strategy:i._G,children:o.map(e=>(0,r.jsx)(m,{item:e,onRemove:d,handleToggleTestCompletion:y,onCheck:B,isFirst:0===S.indexOf(e),isLast:S.indexOf(e)===S.length-1},e.id))})})})]}),(0,r.jsx)(b,{isOpen:T,onClose:()=>M(!1),testData:t,todayFocusItems:o,addFocusItem:c,removeFocusItem:d})]})})}}]);
//# sourceMappingURL=990.917d1135.chunk.js.map