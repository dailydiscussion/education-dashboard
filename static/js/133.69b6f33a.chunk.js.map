{"version":3,"file":"static/js/133.69b6f33a.chunk.js","mappings":"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","sources":["pages/ProfilePage.js"],"sourcesContent":["// src/pages/ProfilePage.js\nimport React, { useState } from 'react';\nimport { useAdmin } from '../context/AdminContext';\nimport profileAdminImg from '../assets/profile-admin.jpg';\n// Import the actual functions from appFunctions\nimport { handleExportData, handleImportData } from '../utils/appFunctions'; // Correct import\n\nconst ProfilePage = React.memo(\n  ({\n    testData: _testData,\n    todayFocusItems: _todayFocusItems,\n    timetableEntries: _timetableEntries,\n    onManageContent,\n    onLogout,\n    currentUserId,\n    userName: _userName,\n    userEmail,\n    showNotification,\n    onResetLocalData: _onResetLocalData,\n  }) => {\n    const [showImportConfirmation, setShowImportConfirmation] = useState(false);\n    const [importFileData, setImportFileData] = useState(null);\n    const { isAdmin, toggleAdmin } = useAdmin();\n\n    const handleFileChange = React.useCallback(\n      (event) => {\n        const file = event.target.files[0];\n        if (file) {\n          const reader = new FileReader();\n          reader.onload = (e) => {\n            try {\n              const parsedData = JSON.parse(e.target.result);\n              // Basic validation: Check for expected top-level keys\n              if (parsedData.subjects && parsedData.todayFocus && parsedData.timetable) {\n                setImportFileData(parsedData);\n                setShowImportConfirmation(true);\n              } else {\n                showNotification(\n                  'Invalid file format. Please upload a valid exported data file.',\n                  'error'\n                );\n              }\n            } catch (error) {\n              showNotification(\n                \"Failed to parse JSON file. Please ensure it's a valid JSON.\",\n                'error'\n              );\n              console.error('Error parsing import file:', error);\n            }\n          };\n          reader.readAsText(file);\n        }\n      },\n      [showNotification]\n    );\n\n    const confirmImport = React.useCallback(async () => {\n      setShowImportConfirmation(false);\n      if (importFileData) {\n        // Call the handleImportData function from appFunctions, passing necessary props\n        await handleImportData(currentUserId, showNotification, importFileData);\n        setImportFileData(null);\n        // Clear the file input after import attempt\n        document.getElementById('importFileInput').value = '';\n        window.location.reload(); // Force reload after import\n      }\n    }, [currentUserId, showNotification, importFileData]);\n\n    const cancelImport = React.useCallback(() => {\n      setShowImportConfirmation(false);\n      setImportFileData(null);\n      // Clear the file input if the user cancels\n      document.getElementById('importFileInput').value = '';\n    }, []);\n\n    const memoizedOnManageContent = React.useCallback(() => {\n      if (onManageContent) onManageContent();\n    }, [onManageContent]);\n\n    const memoizedOnLogout = React.useCallback(() => {\n      if (onLogout) onLogout();\n    }, [onLogout]);\n\n    const memoizedShowNotification = React.useCallback(\n      (msg, type) => {\n        if (showNotification) showNotification(msg, type);\n      },\n      [showNotification]\n    );\n\n    return (\n      <div id=\"page-profile\" className=\"page px-6 py-8\">\n        <header className=\"mb-6\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">My Profile</h1>\n          <p className=\"text-gray-500 mt-2\">Manage your account and app settings.</p>\n        </header>\n\n        <div className=\"bg-gray-100 p-6 rounded-lg mb-6\">\n          <div className=\"flex items-center space-x-4 relative\">\n            <div className=\"relative\">\n              <img\n                src={profileAdminImg}\n                alt=\"User Avatar\"\n                className=\"w-16 h-16 rounded-full border-2 border-white shadow\"\n              />\n              {/* Checkmark badge */}\n              <span className=\"absolute bottom-0 right-0 bg-green-500 rounded-full p-1 border-2 border-white\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-4 w-4 text-white\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"3\"\n                >\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n                </svg>\n              </span>\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-800\">Nikhil Kumar</h2>\n              <p className=\"text-gray-600 text-sm\">{userEmail || 'No Email'}</p>\n              <p className=\"text-xs text-gray-500 break-all\">Admin</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-700 mb-3\">Settings</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200\">\n              <div>\n                <p className=\"font-medium text-gray-800\">Admin Mode</p>\n                <p className=\"text-sm text-gray-500\">Enable to show all edit buttons</p>\n              </div>\n              <label className=\"relative inline-flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  className=\"sr-only peer\"\n                  checked={isAdmin}\n                  onChange={toggleAdmin}\n                />\n                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n              </label>\n            </div>\n            <button\n              onClick={memoizedOnManageContent}\n              className=\"w-full bg-blue-50 text-blue-700 font-semibold py-3 px-4 rounded-lg flex items-center gap-3 hover:bg-blue-100 transition duration-200\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"22\"\n                height=\"22\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.5\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"mr-2\"\n              >\n                <path d=\"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.72l-.43.22a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.22a2 2 0 0 1 1 1.72V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.72l.43-.22a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.22a2 2 0 0 1-1-1.72V4a2 2 0 0 0-2-2z\" />\n                <circle cx=\"12\" cy=\"12\" r=\"3\" />\n              </svg>\n              Manage Subjects & Tests\n            </button>\n            <button\n              onClick={() => handleExportData(currentUserId, memoizedShowNotification)}\n              className=\"w-full bg-green-50 text-green-700 font-semibold py-3 px-4 rounded-lg flex items-center gap-3 hover:bg-green-100 transition duration-200\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"22\"\n                height=\"22\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"mr-2\"\n              >\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                <polyline points=\"7 10 12 15 17 10\"></polyline>\n                <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n              </svg>\n              Export All Data\n            </button>\n            <label className=\"w-full bg-purple-50 text-purple-700 font-semibold py-3 px-4 rounded-lg flex items-center gap-3 hover:bg-purple-100 transition duration-200 cursor-pointer\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"22\"\n                height=\"22\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"mr-2\"\n              >\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                <polyline points=\"17 8 12 3 7 8\"></polyline>\n                <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\n              </svg>\n              Import Data\n              <input\n                type=\"file\"\n                accept=\".json\"\n                onChange={handleFileChange}\n                className=\"hidden\"\n                id=\"importFileInput\"\n              />\n            </label>\n          </div>\n        </div>\n\n        <div className=\"mt-auto pt-6 border-t border-gray-200\">\n          <button\n            onClick={memoizedOnLogout}\n            className=\"w-full bg-red-100 text-red-700 font-semibold py-3 px-4 rounded-lg flex items-center justify-center hover:bg-red-200 transition duration-300\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"20\"\n              height=\"20\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              className=\"mr-2\"\n            >\n              <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path>\n              <polyline points=\"17 16 22 12 17 8\"></polyline>\n              <line x1=\"22\" y1=\"12\" x2=\"10\" y2=\"12\"></line>\n            </svg>\n            Logout\n          </button>\n        </div>\n\n        {/* Import Confirmation Modal */}\n        {showImportConfirmation && (\n          <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-sm mx-auto\">\n              <h3 className=\"text-lg font-bold mb-4\">Confirm Data Import</h3>\n              <p className=\"text-gray-700 mb-6\">\n                Importing this data will overwrite your existing subjects, tests, focus items, and\n                timetable entries. Are you sure you want to proceed?\n              </p>\n              <div className=\"flex justify-end space-x-4\">\n                <button\n                  onClick={cancelImport}\n                  className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={confirmImport}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200\"\n                >\n                  Import Data\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nexport default ProfilePage;\n"],"names":["React","_ref","testData","_testData","todayFocusItems","_todayFocusItems","timetableEntries","_timetableEntries","onManageContent","onLogout","currentUserId","userName","_userName","userEmail","showNotification","onResetLocalData","_onResetLocalData","showImportConfirmation","setShowImportConfirmation","useState","importFileData","setImportFileData","isAdmin","toggleAdmin","useAdmin","handleFileChange","event","file","target","files","reader","FileReader","onload","e","parsedData","JSON","parse","result","subjects","todayFocus","timetable","error","console","readAsText","confirmImport","async","handleImportData","document","getElementById","value","window","location","reload","cancelImport","memoizedOnManageContent","memoizedOnLogout","memoizedShowNotification","msg","type","_jsxs","id","className","children","_jsx","src","profileAdminImg","alt","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","checked","onChange","onClick","width","height","cx","cy","r","handleExportData","points","x1","y1","x2","y2","accept"],"sourceRoot":""}