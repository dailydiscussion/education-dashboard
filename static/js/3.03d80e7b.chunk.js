"use strict";(self.webpackChunkmy_education_dashboard=self.webpackChunkmy_education_dashboard||[]).push([[3],{3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(555),s=a(43),n=a(277),i=a(487),l=a(579);const o=s.memo(e=>{let{event:t,nextEvent:a,isEditMode:r=!1,onEdit:s,status:o}=e;const c=(0,n.j)();const d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(e.checked)return{text:"Completed",colorClass:"text-green-600",dotClass:"bg-green-500"};const r=new Date("".concat(e.date,"T").concat(e.time)),s=new Date(r.getTime()+108e5),n=t?new Date("".concat(t.date,"T").concat(t.time)):null,i=function(e){const t=new Date(e);return t.getHours()<4&&t.setDate(t.getDate()-1),t.setHours(0,0,0,0),t}(r),l=new Date(i);return l.setDate(i.getDate()+1),l.setHours(4,0,0,0),a>l?{text:"Missed",colorClass:"text-red-600",dotClass:"bg-red-500"}:a<r?{text:"Upcoming",colorClass:"text-orange-600",dotClass:"bg-orange-400"}:a>=r&&a<s?{text:"Live",colorClass:"text-cyan-600",dotClass:"bg-cyan-500"}:a>=s&&(!n||a<n)||n&&a>=n?{text:"Missed",colorClass:"text-red-600",dotClass:"bg-red-500"}:{text:"Upcoming",colorClass:"text-orange-600",dotClass:"bg-orange-400"}};let u;if(o)switch(o){case"Completed":u={text:"Completed",colorClass:"text-green-600",dotClass:"bg-green-500"};break;case"Live":u={text:"Live",colorClass:"text-cyan-600",dotClass:"bg-cyan-500"};break;case"Missed":u={text:"Missed",colorClass:"text-red-600",dotClass:"bg-red-500"};break;case"Pending":u={text:"Upcoming",colorClass:"text-orange-600",dotClass:"bg-orange-400"};break;default:u={text:o,colorClass:"text-gray-600",dotClass:"bg-gray-300"}}else u=d(t,a,new Date);let m="flex justify-between items-center p-4 mb-3 rounded-xl";return t.checked||o&&"Completed"===o?m+=" bg-green-100":o&&"Missed"===o||!o&&"Missed"===u.text?m+=" bg-red-100":m+=" bg-gray-50",(0,l.jsxs)("div",{id:"timetable-event-".concat(t.id),className:m,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:t.time}),(0,l.jsx)("p",{className:"text-lg font-semibold text-gray-800 ".concat(t.checked?"line-through opacity-70":""),children:t.subject}),(0,l.jsx)("h4",{className:"text-base text-gray-600",children:t.topic}),!t.checked&&u&&(0,l.jsxs)("span",{className:"flex items-center gap-1 mt-1",children:[(0,l.jsx)("span",{className:"inline-block w-3 h-3 rounded-full border border-white flex-shrink-0 mr-2 ".concat(u.dotClass)}),(0,l.jsx)("span",{className:"text-sm font-semibold ".concat(u.colorClass),children:u.text})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-1",children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>s(t.id),className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Edit event",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,l.jsx)("button",{onClick:()=>c.deleteTimetableEntry(t.id),className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 mr-2","aria-label":"Delete event",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M3 6h18"}),(0,l.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,l.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,l.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,l.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}):(0,l.jsx)(i.P.button,{onClick:()=>c.checkTimetableEntry(t.id),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center","aria-label":t.checked?"Mark as incomplete":"Mark as complete",whileTap:{scale:.85},animate:{scale:t.checked?1.1:1,backgroundColor:t.checked?"#22c55e":"#ffffff00",borderColor:t.checked?"#22c55e":"#d1d5db"},transition:{type:"spring",stiffness:400,damping:15},children:t.checked&&(0,l.jsx)(i.P.svg,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500,damping:20},xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]})});var c=a(546),d=a(867);const u=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e){case"subject":return t?t.length<2?"Subject is too short":"":"Subject is required";case"topic":return t?t.length<2?"Topic is too short":"":"Topic is required";case"date":return t?new Date(t)<new Date((new Date).setHours(0,0,0,0))&&!a.createFutureEvent?"Date cannot be in the past":"":"Date is required";case"time":return t?"":"Time is required";case"futureDate":return a.createFutureEvent&&!t?"Future date is required":a.createFutureEvent&&new Date(t)<=new Date(a.date)?"Future date must be after the original date":"";default:return""}},m=e=>{let{isOpen:t,onClose:a,eventData:n,onUpdate:o,showNotification:m,onAddSimilar:x}=e;const[h,b]=(0,s.useState)({subject:"",topic:"",date:"",time:"",createFutureEvent:!1,futureDate:""}),[p,g]=(0,s.useState)({}),[f,v]=(0,s.useState)({}),[y,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(n){const e={subject:n.subject||"",topic:n.topic||"",date:n.date||"",time:n.time||"",createFutureEvent:!1,futureDate:""};b(e),g({}),v({})}},[n,t]);const w=(0,s.useCallback)(()=>{const e={};let t=!0;return Object.keys(h).forEach(a=>{if("futureDate"===a&&!h.createFutureEvent)return;const r=u(a,h[a],h);r&&(e[a]=r,t=!1)}),v(e),t},[h]),N=e=>{g(t=>(0,r.A)((0,r.A)({},t),{},{[e]:!0}));const t=u(e,h[e],h);v(a=>(0,r.A)((0,r.A)({},a),{},{[e]:t}))},k=e=>{const{name:t,value:a,type:s,checked:n}=e.target,i="checkbox"===s?n:a;if(b(e=>(0,r.A)((0,r.A)({},e),{},{[t]:i})),p[t]&&f[t]){const e=u(t,i,(0,r.A)((0,r.A)({},h),{},{[t]:i}));v(a=>(0,r.A)((0,r.A)({},a),{},{[t]:e}))}};return(0,l.jsx)(c.N,{children:t&&(0,l.jsx)(i.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:a,children:(0,l.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto p-6 relative",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Study Event"}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("label",{htmlFor:"edit-modal-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",id:"edit-modal-subject",name:"subject",className:"w-full px-4 py-2 rounded-lg border ".concat(p.subject&&f.subject?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50"),placeholder:"e.g., Anatomy",value:h.subject,onChange:k,onBlur:()=>N("subject"),"aria-invalid":p.subject&&f.subject?"true":"false","aria-describedby":"subject-error"}),p.subject&&f.subject&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,l.jsx)(d.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),p.subject&&f.subject&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"subject-error",children:f.subject})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("label",{htmlFor:"edit-modal-topic",className:"block text-sm font-medium text-gray-700 mb-1",children:["Topic ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",id:"edit-modal-topic",name:"topic",className:"w-full px-4 py-2 rounded-lg border ".concat(p.topic&&f.topic?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50"),placeholder:"e.g., Cardiovascular System",value:h.topic,onChange:k,onBlur:()=>N("topic"),"aria-invalid":p.topic&&f.topic?"true":"false","aria-describedby":"topic-error"}),p.topic&&f.topic&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,l.jsx)(d.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),p.topic&&f.topic&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"topic-error",children:f.topic})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("label",{htmlFor:"edit-modal-date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"date",id:"edit-modal-date",name:"date",className:"w-full px-4 py-2 rounded-lg border ".concat(p.date&&f.date?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50"),value:h.date,onChange:k,onBlur:()=>N("date"),min:(new Date).toISOString().split("T")[0],"aria-invalid":p.date&&f.date?"true":"false","aria-describedby":"date-error"}),p.date&&f.date&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,l.jsx)(d.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),p.date&&f.date&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"date-error",children:f.date})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("label",{htmlFor:"edit-modal-time",className:"block text-sm font-medium text-gray-700 mb-1",children:["Time ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"time",id:"edit-modal-time",name:"time",className:"w-full px-4 py-2 rounded-lg border ".concat(p.time&&f.time?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50"),value:h.time,onChange:k,onBlur:()=>N("time"),"aria-invalid":p.time&&f.time?"true":"false","aria-describedby":"time-error"}),p.time&&f.time&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,l.jsx)(d.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),p.time&&f.time&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"time-error",children:f.time})]}),(0,l.jsxs)("div",{className:"mb-6 pt-4 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Repeat Event"}),(0,l.jsx)("button",{type:"button",onClick:()=>{const e=!h.createFutureEvent;b(t=>(0,r.A)((0,r.A)({},t),{},{createFutureEvent:e,futureDate:e?h.date:""})),e||v(e=>(0,r.A)((0,r.A)({},e),{},{futureDate:""}))},className:"relative w-12 h-6 rounded-full focus:outline-none transition-colors duration-300 ".concat(h.createFutureEvent?"bg-blue-600":"bg-gray-300"),"aria-pressed":h.createFutureEvent,"aria-label":h.createFutureEvent?"Disable repeat event":"Enable repeat event",children:(0,l.jsx)("span",{className:"absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow transform transition-transform duration-300 ".concat(h.createFutureEvent?"translate-x-6":"translate-x-0")})})]}),h.createFutureEvent&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("label",{htmlFor:"future-date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Future Date ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"date",id:"future-date",name:"futureDate",min:h.date||(new Date).toISOString().split("T")[0],className:"w-full px-4 py-2 rounded-lg border ".concat(p.futureDate&&f.futureDate?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50"),value:h.futureDate,onChange:k,onBlur:()=>N("futureDate"),"aria-invalid":p.futureDate&&f.futureDate?"true":"false","aria-describedby":"future-date-error"}),p.futureDate&&f.futureDate&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,l.jsx)(d.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),p.futureDate&&f.futureDate&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"future-date-error",children:f.futureDate})]})]}),(0,l.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,l.jsx)("button",{type:"button",onClick:a,disabled:y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,l.jsx)("button",{type:"button",onClick:async()=>{if(!n)return void m("No event selected for editing.","error");const e=Object.keys(h).reduce((e,t)=>(e[t]=!0,e),{});g(e);if(w()){j(!0);try{h.createFutureEvent?(await x((0,r.A)((0,r.A)({},n),{},{subject:h.subject,topic:h.topic,date:h.futureDate,time:h.time,checked:!1})),m("New event created for future date.","success")):n.id&&(await o(n.id,h.subject,h.topic,h.date,h.time),m("Event updated successfully.","success")),a()}catch(t){console.error("Error updating event:",t),m(t.message||"Failed to update event. Please try again.","error")}finally{j(!1)}}else m("Please fix the errors in the form","error")},disabled:y||Object.keys(f).length>0,className:"px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(y||Object.keys(f).length>0?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:y?(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),h.createFutureEvent?"Creating...":"Saving..."]}):h.createFutureEvent?"Create Future Event":"Update Event"})]})]})})})};var x=a(377),h=a(59);const b=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)};function p(e,t){if(e.timetableEntries.length!==t.timetableEntries.length||e.selectedDisplayDate!==t.selectedDisplayDate)return!1;for(let a=0;a<e.timetableEntries.length;a++){const r=e.timetableEntries[a],s=t.timetableEntries[a];if(r.id!==s.id||r.checked!==s.checked||r.subject!==s.subject||r.topic!==s.topic||r.date!==s.date||r.time!==s.time)return!1}return!0}const g=s.memo(e=>{let{timetableEntries:t,showNotification:a,userId:i}=e;const c=(0,n.j)(),[d,u]=(0,s.useState)(!1),[p,g]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[w,N]=(0,s.useState)(b(new Date)),[k,C]=(0,s.useState)(""),[D,E]=(0,s.useState)(!1),[A,S]=(0,s.useState)(""),L=(0,s.useCallback)(e=>{v(e),e||j(null)},[]),M=(0,s.useCallback)(()=>{u(e=>!e)},[]),T=(0,s.useCallback)(()=>{g(!1)},[]),F=(0,s.useCallback)(()=>{L(!1)},[L]),B=(0,s.useCallback)(e=>{const a=t.find(t=>t.id===e);a&&(j(a),L(!0))},[t,L]),P=(0,s.useCallback)(e=>{c.deleteTimetableEntry(e)},[c]),O=(0,s.useCallback)(e=>{c.checkTimetableEntry(e)},[c]),z=(0,s.useCallback)(async(e,t,a,r,s)=>{await c.updateTimetableEntry(e,t,a,r,s),L(!1)},[c,L]),W=(0,s.useCallback)(e=>{c.addTimetableEntry(e.subject,e.topic,e.date,e.time)},[c]),q=(0,s.useMemo)(()=>{const e=new Date(w),t=6e4*e.getTimezoneOffset();return new Date(e.getTime()+t)},[w]),H=(0,s.useMemo)(()=>[...t].sort((e,t)=>e.date!==t.date?e.date.localeCompare(t.date):e.time.localeCompare(t.time)),[t]),U=(0,s.useMemo)(()=>{if(!k.trim()||k.trim().length<2)return H.filter(e=>e.date===w);const e=k.toLowerCase();return H.filter(t=>t.subject.toLowerCase().includes(e)||t.topic.toLowerCase().includes(e)||t.time.toLowerCase().includes(e))},[H,k,w]),V=(0,s.useMemo)(()=>{const e=new Date;return U.map(t=>{if(t.checked)return(0,r.A)((0,r.A)({},t),{},{status:"Completed"});const a=H.findIndex(e=>e.id===t.id),s=-1!==a?H[a+1]:void 0,n=new Date("".concat(t.date,"T").concat(t.time)),i=(e=>{if(e.endTime)return new Date("".concat(e.date,"T").concat(e.endTime));const[t]=e.time.split(":").map(Number);return new Date(new Date("".concat(e.date,"T").concat(e.time)).setHours(t+1))})(t),l=s?new Date("".concat(s.date,"T").concat(s.time)):null;return e>=n&&(!l||e<l)?(0,r.A)((0,r.A)({},t),{},{status:"Live"}):e<n?(0,r.A)((0,r.A)({},t),{},{status:"Pending"}):e>i&&s&&e>l&&!t.checked?(0,r.A)((0,r.A)({},t),{},{status:"Missed"}):(0,r.A)((0,r.A)({},t),{},{status:"Pending"})})},[U,H]),I=(0,s.useMemo)(()=>k.trim()?V.reduce((e,t)=>(e[t.date]||(e[t.date]=[]),e[t.date].push(t),e),{}):{},[V,k]),R=(0,s.useMemo)(()=>[{name:"subject",label:"Subject",placeholder:"e.g., Anatomy",required:!0},{name:"topic",label:"Topic",placeholder:"e.g., Cardiovascular System",required:!0},{name:"date",label:"Date",type:"date",required:!0,defaultValue:w},{name:"time",label:"Time",type:"time",required:!0,defaultValue:"09:00"}],[w]),_=(0,s.useCallback)(e=>{N(b(e))},[]),Y=(0,s.useCallback)(()=>{const e=new Date(q);e.setDate(e.getDate()-1),_(e)},[q,_]),Z=(0,s.useCallback)(()=>{const e=new Date(q);e.setDate(e.getDate()+1),_(e)},[q,_]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{id:"page-timetable",className:"page px-6 py-8",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable"}),(0,l.jsxs)("button",{onClick:M,className:"bg-blue-50 text-blue-700 font-semibold text-xs px-4 py-2 rounded-full flex items-center hover:bg-blue-100 transition duration-200","aria-label":d?"Done editing timetable":"Edit timetable",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,l.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),d?"Done":"Edit"]})]}),(0,l.jsx)("p",{className:"text-gray-500 mb-6",children:"Upcoming Study Schedule"}),(0,l.jsxs)("div",{className:"mb-6 relative",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",value:k,onChange:e=>{const t=e.target.value;if(C(t),A&&S(""),t.trim().length>=2){E(!0);const e=setTimeout(()=>{E(!1)},300);return()=>clearTimeout(e)}t.trim().length>0&&S("Please enter at least 2 characters")},placeholder:"Search events by subject, topic, or time...",className:"w-full pl-10 pr-10 py-2 rounded-lg border ".concat(A?"border-red-400":"border-gray-300"," focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white transition-colors duration-200"),"aria-label":"Search timetable events","aria-invalid":!!A,"aria-describedby":A?"search-error":void 0}),(0,l.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:D?(0,l.jsxs)("svg",{className:"animate-spin h-4 w-4 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),k&&(0,l.jsx)("button",{onClick:()=>{C(""),S("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Clear search",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsx)("div",{className:"flex justify-between mt-1 px-1",children:A?(0,l.jsx)("p",{id:"search-error",className:"text-xs text-red-500",children:A}):k?(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[k.length,"/50 characters \u2022 ",U.length," event",1!==U.length?"s":""," found"]}):(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Type at least 2 characters to search events"})})]}),!k.trim()&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",{onClick:()=>g(!0),className:"w-full bg-blue-50 text-blue-700 font-semibold mt-6 py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300 mb-2",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[(0,l.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,l.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Study Event"]}),(0,l.jsxs)("div",{className:"flex items-center justify-between px-0 py-6 text-gray-700 font-semibold text-lg",children:[(0,l.jsx)("button",{onClick:Y,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Previous day",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,l.jsx)("span",{className:"flex-grow text-center text-lg sm:text-base",children:q.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,l.jsx)("button",{onClick:Z,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Next day",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})]}),(0,l.jsx)("div",{id:"timetable-events-list",className:"space-y-4 bg-white rounded-lg min-h-[100px]",children:0===V.length?(0,l.jsx)(h.A,{title:k.trim().length>=2?"No events found":"Your timetable is empty",description:k.trim().length>=2?"No events match your search. Try different keywords or check your spelling.":"Add your first event to get started!",icon:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-300",children:[(0,l.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,l.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,l.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,l.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),(0,l.jsx)("path",{d:"M8 14h.01"}),(0,l.jsx)("path",{d:"M12 14h.01"}),(0,l.jsx)("path",{d:"M16 14h.01"}),(0,l.jsx)("path",{d:"M8 18h.01"}),(0,l.jsx)("path",{d:"M12 18h.01"}),(0,l.jsx)("path",{d:"M16 18h.01"})]}),action:(0,l.jsxs)("button",{onClick:()=>g(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Your First Event"]})}):(0,l.jsx)("div",{className:"space-y-4",children:k.trim()?Object.keys(I).sort().map(e=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-lg text-blue-800 mb-2 mt-6 pl-1 tracking-wide",children:new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,l.jsx)("div",{className:"space-y-4",children:I[e].map((e,t,a)=>{const r=V.find(t=>t.id===e.id)||e;return(0,l.jsx)(o,{event:e,status:r.status,nextEvent:a[t+1],isEditMode:d,onDelete:c.deleteTimetableEntry,onCheck:c.checkTimetableEntry,onEdit:B},e.id)})})]},e)):V.map((e,t)=>(0,l.jsx)(o,{event:e,status:e.status,nextEvent:V[t+1],isEditMode:d,onDelete:P,onCheck:O,onEdit:B},e.id))})})]}),(0,l.jsx)(x.A,{isOpen:p,onClose:T,onSave:e=>{c.addTimetableEntry(e.subject,e.topic,e.date,e.time)},title:"Add New Study Event",fields:R}),(0,l.jsx)(m,{isOpen:f,onClose:F,eventData:y,onUpdate:z,onAddSimilar:W,showNotification:a})]})},p)},59:(e,t,a)=>{a.d(t,{A:()=>n});a(43);var r=a(487),s=a(579);const n=e=>{let{title:t="No items found",description:a="There are no items to display at the moment.",icon:n,action:i,className:l=""}=e;return(0,s.jsxs)(r.P.div,{className:"flex flex-col items-center justify-center p-8 text-center ".concat(l),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[n&&(0,s.jsx)("div",{className:"mb-4 text-gray-400",children:n}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t}),(0,s.jsx)("p",{className:"text-gray-500 mb-6 max-w-md",children:a}),i&&(0,s.jsx)("div",{className:"mt-2",children:i})]})}},377:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(555),s=a(43),n=a(277),i=a(546),l=a(487),o=a(867),c=a(579);const d={},u=(e,t)=>{if(e.required&&!t)return"".concat(e.label," is required");if(t){if("email"===e.type&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return"Please enter a valid email address";if("url"===e.type&&!/^https?:\/\//.test(t))return"Please enter a valid URL starting with http:// or https://";if("number"===e.type){const a=Number(t);if(isNaN(a))return"Please enter a valid number";if(void 0!==e.min&&a<e.min)return"Must be at least ".concat(e.min);if(void 0!==e.max&&a>e.max)return"Cannot exceed ".concat(e.max)}if(e.minLength&&t.length<e.minLength)return"Must be at least ".concat(e.minLength," characters");if(e.maxLength&&t.length>e.maxLength)return"Cannot exceed ".concat(e.maxLength," characters");if(e.validate&&"function"===typeof e.validate){const a=e.validate(t,e);if(a)return a}}return""},m=e=>{let{isOpen:t,onClose:a,onSave:m,title:x,fields:h,initialState:b=d}=e;const p=(0,n.j)(),[g,f]=(0,s.useState)({}),[v,y]=(0,s.useState)({}),[j,w]=(0,s.useState)({}),[N,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(t){const e=h.reduce((e,t)=>{var a,r;return e[t.name]=null!==(a=null!==(r=b[t.name])&&void 0!==r?r:t.defaultValue)&&void 0!==a?a:"",e},{});f(e),y({}),w({})}else f({}),y({}),w({})},[t,h,b]);const C=(0,s.useCallback)(()=>{const e={};let t=!0;return h.forEach(a=>{const r=u(a,g[a.name]||"");r&&(e[a.name]=r,t=!1)}),w(e),t},[h,g]),D=e=>{y(t=>(0,r.A)((0,r.A)({},t),{},{[e.name]:!0}));const t=u(e,g[e.name]||"");w(a=>(0,r.A)((0,r.A)({},a),{},{[e.name]:t}))},E=e=>{const{name:t,value:a,type:s,checked:n}=e.target,i="checkbox"===s?n:a;if(f(e=>(0,r.A)((0,r.A)({},e),{},{[t]:i})),v[t]&&j[t]){const e=u(h.find(e=>e.name===t)||{},i);w(a=>(0,r.A)((0,r.A)({},a),{},{[t]:e}))}};return(0,c.jsx)(i.N,{children:t&&(0,c.jsx)(l.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:a,children:(0,c.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:x}),(0,c.jsx)("div",{className:"space-y-4",children:h.map(e=>{const t=v[e.name]&&j[e.name],a=g[e.name]||"";return(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,c.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700",children:[e.label,e.required&&(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),e.helpText&&(0,c.jsx)("span",{className:"text-xs text-gray-500",children:e.helpText})]}),"textarea"===e.type?(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("textarea",{id:e.name,name:e.name,placeholder:e.placeholder||"",value:a,onChange:E,onBlur:()=>D(e),disabled:e.disabled||!1,rows:e.rows||3,className:"w-full px-4 py-2 rounded-lg border ".concat(t?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50 disabled:bg-gray-100 disabled:text-gray-500 pr-10"),"aria-invalid":t?"true":"false","aria-describedby":"".concat(e.name,"-error")}),t&&(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,c.jsx)(o.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}):"select"===e.type?(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)("select",{id:e.name,name:e.name,value:a,onChange:E,onBlur:()=>D(e),disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border ".concat(t?"border-red-300 text-red-900 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50 disabled:bg-gray-100 disabled:text-gray-500 pr-10 appearance-none"),"aria-invalid":t?"true":"false","aria-describedby":"".concat(e.name,"-error"),children:[!a&&(0,c.jsx)("option",{value:"",children:e.placeholder||"Select an option"}),e.options&&e.options.map(e=>(0,c.jsx)("option",{value:e.value,children:e.label},e.value))]}),t&&(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,c.jsx)(o.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}),(0,c.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,c.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,c.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}):"checkbox"===e.type?(0,c.jsxs)("div",{className:"relative flex items-start",children:[(0,c.jsx)("div",{className:"flex items-center h-5",children:(0,c.jsx)("input",{id:e.name,name:e.name,type:"checkbox",checked:!!a,onChange:E,onBlur:()=>D(e),disabled:e.disabled||!1,className:"h-4 w-4 rounded ".concat(t?"text-red-600 border-red-300 focus:ring-red-500":"text-blue-600 border-gray-300 focus:ring-blue-500"),"aria-invalid":t?"true":"false","aria-describedby":"".concat(e.name,"-error")})}),(0,c.jsxs)("div",{className:"ml-3 text-sm",children:[(0,c.jsxs)("label",{htmlFor:e.name,className:"font-medium text-gray-700",children:[e.checkboxLabel||e.label,e.required&&(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),e.checkboxDescription&&(0,c.jsx)("p",{className:"text-gray-500",children:e.checkboxDescription})]})]}):(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,placeholder:e.placeholder||"",value:a,onChange:E,onBlur:()=>D(e),disabled:e.disabled||!1,min:e.min,max:e.max,step:e.step,className:"w-full px-4 py-2 rounded-lg border ".concat(t?"border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"," bg-gray-50 disabled:bg-gray-100 disabled:text-gray-500 ").concat("number"===e.type?"pr-12":"pr-10"),"aria-invalid":t?"true":"false","aria-describedby":"".concat(e.name,"-error")}),t&&(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,c.jsx)(o.A,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}),"number"===e.type&&e.unit&&!t&&(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,c.jsx)("span",{className:"text-gray-500 text-sm",children:e.unit})})]}),t&&(0,c.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"".concat(e.name,"-error"),children:j[e.name]})]},e.name)})}),(0,c.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:N,children:"Cancel"}),(0,c.jsx)("button",{type:"button",onClick:async()=>{const e=h.reduce((e,t)=>(e[t.name]=!0,e),{});y(e);if(C()){k(!0);try{m?await m(g):p.addTimetableEntry&&await p.addTimetableEntry(g),a()}catch(t){console.error("Error saving form:",t),p.showNotification&&p.showNotification(t.message||"Failed to save. Please try again.","error")}finally{k(!1)}}else p.showNotification&&p.showNotification("Please fix the errors in the form","error")},disabled:N||Object.keys(j).length>0,className:"px-4 py-2 font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition duration-300 ".concat(N||Object.keys(j).length>0?"bg-blue-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500"),children:N?(0,c.jsxs)("span",{className:"flex items-center",children:[(0,c.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]})]})})})}},867:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(986),s=a(43);const n=["title","titleId"];function i(e,t){let{title:a,titleId:i}=e,l=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),a?s.createElement("title",{id:i},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const l=s.forwardRef(i)}}]);
//# sourceMappingURL=3.03d80e7b.chunk.js.map