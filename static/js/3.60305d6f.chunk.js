"use strict";(self.webpackChunkmy_education_dashboard=self.webpackChunkmy_education_dashboard||[]).push([[3],{3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(43),s=a(986),l=a(277),i=a(487),o=a(579);const r=["id"],d=n.memo(e=>{let{event:t,isEditMode:a,onEdit:n}=e;const d=(0,l.j)(),c=((e,t,a)=>{if(a)return{text:"Completed",colorClass:"text-green-600"};const n=new Date;return new Date("".concat(e,"T").concat(t))<n?{text:"Missed",colorClass:"text-red-600"}:{text:"Pending",colorClass:"text-yellow-600"}})(t.date,t.time,t.checked),u="flex justify-between items-center p-4 mb-3 rounded-xl shadow-sm border ".concat(t.checked?"bg-green-100 border-green-300":"bg-white border-gray-200");return(0,o.jsxs)("div",{id:"timetable-event-".concat(t.id),className:u,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-gray-500",children:t.time}),(0,o.jsx)("p",{className:"text-lg font-semibold text-gray-800 ".concat(t.checked?"line-through opacity-70":""),children:t.subject}),(0,o.jsx)("h4",{className:"text-base text-gray-600",children:t.topic}),(0,o.jsx)("p",{className:"text-sm font-semibold ".concat(c.colorClass),children:c.text})]}),(0,o.jsx)("div",{className:"flex items-center gap-1",children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{console.log("Event to repeat:",t);const e=[];if(t.subject&&t.subject.trim()||e.push("subject"),t.topic&&t.topic.trim()||e.push("topic"),t.time&&t.time.trim()||e.push("time"),t.date&&t.date.trim()||e.push("date"),e.length>0)return void alert("Missing fields: "+e.join(", "));const a=new Date(t.date);a.setDate(a.getDate()+1);const n=a.toISOString().slice(0,10),{id:l}=t,i=(0,s.A)(t,r);d.addTimetableEntry(i.subject,i.topic,n,i.time)},className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Repeat for next day",title:"Repeat for next day",type:"button",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M17 1v6h-6"}),(0,o.jsx)("path",{d:"M7 23v-6h6"}),(0,o.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.13-3.36L17 7"}),(0,o.jsx)("path",{d:"M20.49 15A9 9 0 0 1 6.36 18.36L7 17"})]})}),(0,o.jsx)("button",{onClick:()=>n(t.id),className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Edit event",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,o.jsx)("button",{onClick:()=>d.deleteTimetableEntry(t.id),className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 mr-2","aria-label":"Delete event",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M3 6h18"}),(0,o.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,o.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,o.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,o.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}):(0,o.jsx)(i.P.button,{onClick:()=>d.checkTimetableEntry(t.id),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center","aria-label":t.checked?"Mark as incomplete":"Mark as complete",whileTap:{scale:.85},animate:{scale:t.checked?1.1:1,backgroundColor:t.checked?"#22c55e":"#ffffff00",borderColor:t.checked?"#22c55e":"#d1d5db"},transition:{type:"spring",stiffness:400,damping:15},children:t.checked&&(0,o.jsx)(i.P.svg,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500,damping:20},xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]})});var c=a(546);const u=e=>{let{isOpen:t,onClose:a,eventData:s,onUpdate:l,showNotification:r}=e;const[d,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[b,p]=(0,n.useState)("");(0,n.useEffect)(()=>{s&&(u(s.subject||""),x(s.topic||""),h(s.date||""),p(s.time||""))},[s]);return(0,o.jsx)(c.N,{children:t&&(0,o.jsx)(i.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:a,children:(0,o.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Study Event"}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{htmlFor:"edit-modal-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,o.jsx)("input",{type:"text",id:"edit-modal-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Anatomy",value:d,onChange:e=>u(e.target.value)})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{htmlFor:"edit-modal-topic",className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),(0,o.jsx)("input",{type:"text",id:"edit-modal-topic",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Cardiovascular System",value:m,onChange:e=>x(e.target.value)})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{htmlFor:"edit-modal-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,o.jsx)("input",{type:"date",id:"edit-modal-date",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:g,onChange:e=>h(e.target.value)})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"edit-modal-time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),(0,o.jsx)("input",{type:"time",id:"edit-modal-time",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:b,onChange:e=>p(e.target.value)})]}),(0,o.jsx)("button",{onClick:async()=>{s&&s.id?d&&m&&g&&b?(await l(s.id,d,m,g,b),a()):r("All fields are required.","error"):r("No event selected for editing.","error")},className:"w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Update Event"}),(0,o.jsx)("button",{onClick:a,className:"w-full mt-2 bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"})]})})})};var m=a(377);const x=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(n)};function g(e,t){if(e.timetableEntries.length!==t.timetableEntries.length||e.selectedDisplayDate!==t.selectedDisplayDate)return!1;for(let a=0;a<e.timetableEntries.length;a++){const n=e.timetableEntries[a],s=t.timetableEntries[a];if(n.id!==s.id||n.checked!==s.checked||n.subject!==s.subject||n.topic!==s.topic||n.date!==s.date||n.time!==s.time)return!1}return!0}const h=n.memo(e=>{let{timetableEntries:t,showNotification:a,userId:s}=e;const i=(0,l.j)(),[r,c]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!1),[b,p]=(0,n.useState)(!1),[f,y]=(0,n.useState)(null),[j,v]=(0,n.useState)(x(new Date)),w=(0,n.useCallback)(e=>{p(e),e||y(null)},[]),k=(0,n.useCallback)(e=>{const a=t.find(t=>t.id===e);a&&(y(a),w(!0))},[t,w]),N=(0,n.useCallback)(async(e,t,a,n,s)=>{await i.updateTimetableEntry(e,t,a,n,s),w(!1)},[i,w]),C=(0,n.useMemo)(()=>{const e=new Date(j),t=6e4*e.getTimezoneOffset();return new Date(e.getTime()+t)},[j]),S=(0,n.useMemo)(()=>[...t].filter(e=>e.date===j).sort((e,t)=>{const a=e.time.localeCompare(t.time);return 0!==a?a:e.checked===t.checked?0:e.checked?1:-1}),[t,j]),E=(0,n.useMemo)(()=>[{name:"subject",label:"Subject",placeholder:"e.g., Anatomy",required:!0},{name:"topic",label:"Topic",placeholder:"e.g., Cardiovascular System",required:!0},{name:"date",label:"Date",type:"date",required:!0,defaultValue:j},{name:"time",label:"Time",type:"time",required:!0,defaultValue:"09:00"}],[j]),D=(0,n.useCallback)(e=>{v(x(e))},[]),M=(0,n.useCallback)(()=>{const e=new Date(C);e.setDate(e.getDate()-1),D(e)},[C,D]),L=(0,n.useCallback)(()=>{const e=new Date(C);e.setDate(e.getDate()+1),D(e)},[C,D]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:"page-timetable",className:"page px-6 py-8",children:[(0,o.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable"}),(0,o.jsxs)("button",{onClick:()=>c(!r),className:"bg-blue-50 text-blue-700 font-semibold text-xs px-4 py-2 rounded-full flex items-center hover:bg-blue-100 transition duration-200","aria-label":r?"Done editing timetable":"Edit timetable",children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),r?"Done":"Edit"]})]}),(0,o.jsx)("p",{className:"text-gray-500 mb-2",children:"Upcoming Study Schedule"}),(0,o.jsxs)("button",{onClick:()=>h(!0),className:"w-full bg-blue-50 text-blue-700 font-semibold mt-6 py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300 mb-2",children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[(0,o.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,o.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Study Event"]}),(0,o.jsxs)("div",{className:"flex items-center justify-between px-0 py-6 text-gray-700 font-semibold text-lg",children:[(0,o.jsx)("button",{onClick:M,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Previous day",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,o.jsx)("span",{className:"flex-grow text-center text-lg sm:text-base",children:C.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,o.jsx)("button",{onClick:L,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Next day",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]}),(0,o.jsx)("div",{id:"timetable-events-list",className:"space-y-4 bg-white rounded-lg min-h-[100px]",children:0===S.length?(0,o.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Add a new study event to your timetable."}):(0,o.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,o.jsx)(d,{event:e,isEditMode:r,onDelete:i.deleteTimetableEntry,onCheck:i.checkTimetableEntry,onEdit:k},e.id))})})]}),(0,o.jsx)(m.A,{isOpen:g,onClose:()=>h(!1),onSave:e=>{i.addTimetableEntry(e.subject,e.topic,e.date,e.time)},title:"Add New Study Event",fields:E}),(0,o.jsx)(u,{isOpen:b,onClose:()=>w(!1),eventData:f,onUpdate:N})]})},g)},377:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(555),s=a(43),l=a(277),i=a(546),o=a(487),r=a(579);const d={},c=e=>{let{isOpen:t,onClose:a,onSave:c,title:u,fields:m,initialState:x=d}=e;const g=(0,l.j)(),[h,b]=(0,s.useState)({});(0,s.useEffect)(()=>{if(t){const e=m.reduce((e,t)=>(e[t.name]=x[t.name]||t.defaultValue||"",e),{});b(e)}else b({})},[t,m,x]);const p=e=>{const{name:t,value:a}=e.target;b(e=>(0,n.A)((0,n.A)({},e),{},{[t]:a}))};return(0,r.jsx)(i.N,{children:t&&(0,r.jsx)(o.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:a,children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:u}),(0,r.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),"textarea"===e.type?(0,r.jsx)("textarea",{id:e.name,name:e.name,placeholder:e.placeholder||"",value:h[e.name]||"",onChange:p,disabled:e.disabled||!1,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"}):"select"===e.type?(0,r.jsx)("select",{id:e.name,name:e.name,value:h[e.name]||"",onChange:p,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200",children:e.options&&e.options.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,r.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,placeholder:e.placeholder||"",value:h[e.name]||"",onChange:p,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"})]},e.name))}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{for(const e of m)if(e.required&&!h[e.name])return void(g.showNotification?g.showNotification("".concat(e.label," is required."),"error"):console.error("".concat(e.label," is required.")));c?c(h):g.addTimetableEntry&&g.addTimetableEntry(h),a()},className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Save"})]})]})})})}}}]);
//# sourceMappingURL=3.60305d6f.chunk.js.map