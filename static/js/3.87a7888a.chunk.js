"use strict";(self.webpackChunkmy_education_dashboard=self.webpackChunkmy_education_dashboard||[]).push([[3],{3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(43),n=a(986),i=a(277),l=a(487),r=a(579);const o=["id"],d=s.memo(e=>{let{event:t,nextEvent:a,isEditMode:s,onEdit:d}=e;const c=(0,i.j)();function u(e){const t=new Date(e);return t.getHours()<4&&t.setDate(t.getDate()-1),t.setHours(0,0,0,0),t}const m=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(e.checked)return{text:"Completed",colorClass:"text-green-600",dotClass:"bg-green-500"};const s=new Date("".concat(e.date,"T").concat(e.time)),n=t?new Date("".concat(t.date,"T").concat(t.time)):null,i=u(s),l=new Date(i);return l.setDate(i.getDate()+1),l.setHours(4,0,0,0),a>l?{text:"Missed",colorClass:"text-red-600",dotClass:"bg-red-500"}:a>=s&&(!n||a<n)&&u(a).getTime()===i.getTime()?{text:"Live",colorClass:"text-cyan-600",dotClass:"bg-cyan-500"}:a<s&&u(a).getTime()===i.getTime()?{text:"Pending",colorClass:"text-orange-600",dotClass:"bg-orange-400"}:{text:"Missed",colorClass:"text-red-600",dotClass:"bg-red-500"}}(t,a,new Date);let g="flex justify-between items-center p-4 mb-3 rounded-xl shadow-sm border";return t.checked?g+=" bg-green-100 border-green-300":"Missed"===m.text?g+=" bg-red-100 border-red-300":g+=" bg-white border-gray-200",(0,r.jsxs)("div",{id:"timetable-event-".concat(t.id),className:g,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:t.time}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-800 ".concat(t.checked?"line-through opacity-70":""),children:t.subject}),(0,r.jsx)("h4",{className:"text-base text-gray-600",children:t.topic}),!t.checked&&(0,r.jsxs)("span",{className:"flex items-center gap-1 mt-1",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full border border-white flex-shrink-0 mr-2 ".concat(m.dotClass)}),(0,r.jsx)("span",{className:"text-sm font-semibold ".concat(m.colorClass),children:m.text})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{const e=[];if(t.subject&&t.subject.trim()||e.push("subject"),t.topic&&t.topic.trim()||e.push("topic"),t.time&&t.time.trim()||e.push("time"),t.date&&t.date.trim()||e.push("date"),e.length>0)return void alert("Missing fields: "+e.join(", "));const a=new Date(t.date);a.setDate(a.getDate()+1);const s=a.toISOString().slice(0,10),{id:i}=t,l=(0,n.A)(t,o);c.addTimetableEntry(l.subject,l.topic,s,l.time)},className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Add similar event for next day",title:"Add similar event for next day",type:"button",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,r.jsx)("rect",{x:"3",y:"3",width:"13",height:"13",rx:"2",ry:"2"})]})}),(0,r.jsx)("button",{onClick:()=>d(t.id),className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Edit event",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,r.jsx)("button",{onClick:()=>c.deleteTimetableEntry(t.id),className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 mr-2","aria-label":"Delete event",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,r.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,r.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}):(0,r.jsx)(l.P.button,{onClick:()=>c.checkTimetableEntry(t.id),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center","aria-label":t.checked?"Mark as incomplete":"Mark as complete",whileTap:{scale:.85},animate:{scale:t.checked?1.1:1,backgroundColor:t.checked?"#22c55e":"#ffffff00",borderColor:t.checked?"#22c55e":"#d1d5db"},transition:{type:"spring",stiffness:400,damping:15},children:t.checked&&(0,r.jsx)(l.P.svg,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500,damping:20},xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]})});var c=a(546);const u=e=>{let{isOpen:t,onClose:a,eventData:n,onUpdate:i,showNotification:o}=e;const[d,u]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[h,p]=(0,s.useState)("");(0,s.useEffect)(()=>{n&&(u(n.subject||""),g(n.topic||""),b(n.date||""),p(n.time||""))},[n]);return(0,r.jsx)(c.N,{children:t&&(0,r.jsx)(l.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:a,children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Study Event"}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"edit-modal-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,r.jsx)("input",{type:"text",id:"edit-modal-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Anatomy",value:d,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"edit-modal-topic",className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),(0,r.jsx)("input",{type:"text",id:"edit-modal-topic",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Cardiovascular System",value:m,onChange:e=>g(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"edit-modal-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,r.jsx)("input",{type:"date",id:"edit-modal-date",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:x,onChange:e=>b(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"edit-modal-time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),(0,r.jsx)("input",{type:"time",id:"edit-modal-time",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:h,onChange:e=>p(e.target.value)})]}),(0,r.jsx)("button",{onClick:async()=>{n&&n.id?d&&m&&x&&h?(await i(n.id,d,m,x,h),a()):o("All fields are required.","error"):o("No event selected for editing.","error")},className:"w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Update Event"}),(0,r.jsx)("button",{onClick:a,className:"w-full mt-2 bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"})]})})})};var m=a(377);const g=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(s)};function x(e,t){if(e.timetableEntries.length!==t.timetableEntries.length||e.selectedDisplayDate!==t.selectedDisplayDate)return!1;for(let a=0;a<e.timetableEntries.length;a++){const s=e.timetableEntries[a],n=t.timetableEntries[a];if(s.id!==n.id||s.checked!==n.checked||s.subject!==n.subject||s.topic!==n.topic||s.date!==n.date||s.time!==n.time)return!1}return!0}const b=s.memo(e=>{let{timetableEntries:t,showNotification:a,userId:n}=e;const l=(0,i.j)(),[o,c]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),[j,v]=(0,s.useState)(g(new Date)),[w,k]=(0,s.useState)(""),N=(0,s.useCallback)(e=>{p(e),e||y(null)},[]),C=(0,s.useCallback)(e=>{const a=t.find(t=>t.id===e);a&&(y(a),N(!0))},[t,N]),D=(0,s.useCallback)(async(e,t,a,s,n)=>{await l.updateTimetableEntry(e,t,a,s,n),N(!1)},[l,N]),E=(0,s.useMemo)(()=>{const e=new Date(j),t=6e4*e.getTimezoneOffset();return new Date(e.getTime()+t)},[j]),S=(0,s.useMemo)(()=>[...t].sort((e,t)=>e.date!==t.date?e.date.localeCompare(t.date):e.time.localeCompare(t.time)),[t]),T=(0,s.useMemo)(()=>{if(!w.trim())return S.filter(e=>e.date===j);const e=w.toLowerCase();return S.filter(t=>t.subject.toLowerCase().includes(e)||t.topic.toLowerCase().includes(e)||t.time.toLowerCase().includes(e))},[S,w,j]),L=(0,s.useMemo)(()=>w.trim()?T.reduce((e,t)=>(e[t.date]||(e[t.date]=[]),e[t.date].push(t),e),{}):{},[T,w]),M=(0,s.useMemo)(()=>[{name:"subject",label:"Subject",placeholder:"e.g., Anatomy",required:!0},{name:"topic",label:"Topic",placeholder:"e.g., Cardiovascular System",required:!0},{name:"date",label:"Date",type:"date",required:!0,defaultValue:j},{name:"time",label:"Time",type:"time",required:!0,defaultValue:"09:00"}],[j]),A=(0,s.useCallback)(e=>{v(g(e))},[]),q=(0,s.useCallback)(()=>{const e=new Date(E);e.setDate(e.getDate()-1),A(e)},[E,A]),F=(0,s.useCallback)(()=>{const e=new Date(E);e.setDate(e.getDate()+1),A(e)},[E,A]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{id:"page-timetable",className:"page px-6 py-8",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable"}),(0,r.jsxs)("button",{onClick:()=>c(!o),className:"bg-blue-50 text-blue-700 font-semibold text-xs px-4 py-2 rounded-full flex items-center hover:bg-blue-100 transition duration-200","aria-label":o?"Done editing timetable":"Edit timetable",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),o?"Done":"Edit"]})]}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Upcoming Study Schedule"}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"Search events by subject, topic, or time...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-200 bg-gray-50"})}),!w.trim()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>b(!0),className:"w-full bg-blue-50 text-blue-700 font-semibold mt-6 py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300 mb-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[(0,r.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,r.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Study Event"]}),(0,r.jsxs)("div",{className:"flex items-center justify-between px-0 py-6 text-gray-700 font-semibold text-lg",children:[(0,r.jsx)("button",{onClick:q,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Previous day",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,r.jsx)("span",{className:"flex-grow text-center text-lg sm:text-base",children:E.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,r.jsx)("button",{onClick:F,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Next day",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})]}),(0,r.jsx)("div",{id:"timetable-events-list",className:"space-y-4 bg-white rounded-lg min-h-[100px]",children:0===T.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:w?"No events match your search.":"Add a new study event to your timetable."}):(0,r.jsx)("div",{className:"space-y-4",children:w.trim()?Object.keys(L).sort().map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-lg text-blue-800 mb-2 mt-6 pl-1 tracking-wide",children:new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,r.jsx)("div",{className:"space-y-4",children:L[e].map((e,t,a)=>(0,r.jsx)(d,{event:e,nextEvent:a[t+1],isEditMode:o,onDelete:l.deleteTimetableEntry,onCheck:l.checkTimetableEntry,onEdit:C},e.id))})]},e)):T.map((e,t)=>(0,r.jsx)(d,{event:e,nextEvent:T[t+1],isEditMode:o,onDelete:l.deleteTimetableEntry,onCheck:l.checkTimetableEntry,onEdit:C},e.id))})})]}),(0,r.jsx)(m.A,{isOpen:x,onClose:()=>b(!1),onSave:e=>{l.addTimetableEntry(e.subject,e.topic,e.date,e.time)},title:"Add New Study Event",fields:M}),(0,r.jsx)(u,{isOpen:h,onClose:()=>N(!1),eventData:f,onUpdate:D})]})},x)},377:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(555),n=a(43),i=a(277),l=a(546),r=a(487),o=a(579);const d={},c=e=>{let{isOpen:t,onClose:a,onSave:c,title:u,fields:m,initialState:g=d}=e;const x=(0,i.j)(),[b,h]=(0,n.useState)({});(0,n.useEffect)(()=>{if(t){const e=m.reduce((e,t)=>(e[t.name]=g[t.name]||t.defaultValue||"",e),{});h(e)}else h({})},[t,m,g]);const p=e=>{const{name:t,value:a}=e.target;h(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))};return(0,o.jsx)(l.N,{children:t&&(0,o.jsx)(r.P.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22},onClick:a,children:(0,o.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:u}),(0,o.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),"textarea"===e.type?(0,o.jsx)("textarea",{id:e.name,name:e.name,placeholder:e.placeholder||"",value:b[e.name]||"",onChange:p,disabled:e.disabled||!1,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"}):"select"===e.type?(0,o.jsx)("select",{id:e.name,name:e.name,value:b[e.name]||"",onChange:p,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200",children:e.options&&e.options.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,o.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,placeholder:e.placeholder||"",value:b[e.name]||"",onChange:p,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"})]},e.name))}),(0,o.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,o.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{for(const e of m)if(e.required&&!b[e.name])return void(x.showNotification?x.showNotification("".concat(e.label," is required."),"error"):console.error("".concat(e.label," is required.")));c?c(b):x.addTimetableEntry&&x.addTimetableEntry(b),a()},className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Save"})]})]})})})}}}]);
//# sourceMappingURL=3.87a7888a.chunk.js.map