/*! For license information please see main.8874134c.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var I=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===D?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return R(e(t))}catch(Rt){}}return null}var P=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},M=[],F=-1;function V(e){return{current:e}}function U(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B=V(null),q=V(null),H=V(null),W=V(null);function K(e,t){switch(z(H,t),z(q,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(B),z(B,e)}function G(){U(B),U(q),U(H)}function Q(e){null!==e.memoizedState&&z(W,e);var t=B.current,n=ad(t,e.type);t!==n&&(z(q,e),z(B,n))}function X(e){q.current===e&&(U(B),U(q)),W.current===e&&(U(W),Yd._currentValue=j)}var Y=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,$=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ye(r):0!==(o&=a)?i=ye(o):n||0!==(n=a&~e)&&(i=ye(n)):0!==(a=r&~s)?i=ye(a):0!==o?i=ye(o):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ie(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:dh(e.type)}var De=Math.random().toString(36).slice(2),Re="__reactFiber$"+De,Pe="__reactProps$"+De,Oe="__reactContainer$"+De,Le="__reactEvents$"+De,je="__reactListeners$"+De,Me="__reactHandles$"+De,Fe="__reactResources$"+De,Ve="__reactMarker$"+De;function Ue(e){delete e[Re],delete e[Pe],delete e[Le],delete e[je],delete e[Me]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xd(e);null!==e;){if(n=e[Re])return n;e=xd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ve]=!0}var Ke=new Set,Ge={};function Qe(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Ye,Je,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&($e.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(Rt){var t=Rt.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Je=-1<Rt.stack.indexOf("\n    at")?" (<anonymous>)":-1<Rt.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Je}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Rt){var r=Rt}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(Rt){return"\nError generating stack: "+Rt.message+"\n"+Rt.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function vt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(P(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Et(e,s,t[s])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),It=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return It.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Ot=null;function Lt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Pe]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var jt=!1;function Mt(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Pt||null!==Ot)&&(qc(),Pt&&(t=Pt,e=Ot,Ot=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Pe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Vt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Lh){Ut=!1}var Bt=null,qt=null,Ht=null;function Wt(){if(Ht)return Ht;var e,t,n=qt,r=n.length,i="value"in Bt?Bt.value:Bt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Qt(){return!1}function Xt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Qt,this.isPropagationStopped=Qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,Jt,$t,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},en=Xt(Zt),tn=h({},Zt,{view:0,detail:0}),nn=Xt(tn),rn=h({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Yt=e.screenX-$t.screenX,Jt=e.screenY-$t.screenY):Jt=Yt=0,$t=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),sn=Xt(rn),on=Xt(h({},rn,{dataTransfer:0})),an=Xt(h({},tn,{relatedTarget:0})),ln=Xt(h({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=Xt(h({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Xt(h({},Zt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function mn(){return pn}var gn=h({},tn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),vn=Xt(gn),yn=Xt(h({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Xt(h({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),wn=Xt(h({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Xt(h({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Xt(h({},Zt,{newState:0,oldState:0})),Sn=[9,13,27,32],En=Vt&&"CompositionEvent"in window,_n=null;Vt&&"documentMode"in document&&(_n=document.documentMode);var Tn=Vt&&"TextEvent"in window&&!_n,Cn=Vt&&(!En||_n&&8<_n&&11>=_n),In=String.fromCharCode(32),Nn=!1;function An(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Ln(e,t,n,r){Pt?Ot?Ot.push(r):Ot=[r]:Pt=r,0<(t=Ku(t,"onChange")).length&&(n=new en("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,Mn=null;function Fn(e){Fu(e,0)}function Vn(e){if(ht(qe(e)))return e}function Un(e,t){if("change"===e)return t}var zn=!1;if(Vt){var Bn;if(Vt){var qn="oninput"in document;if(!qn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),qn="function"===typeof Hn.oninput}Bn=qn}else Bn=!1;zn=Bn&&(!document.documentMode||9<document.documentMode)}function Wn(){jn&&(jn.detachEvent("onpropertychange",Kn),Mn=jn=null)}function Kn(e){if("value"===e.propertyName&&Vn(Mn)){var t=[];Ln(t,Mn,e,Dt(e)),Mt(Fn,t)}}function Gn(e,t,n){"focusin"===e?(Wn(),Mn=n,(jn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Wn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Mn)}function Xn(e,t){if("click"===e)return Vn(t)}function Yn(e,t){if("input"===e||"change"===e)return Vn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Jn(e[i],t[i]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function er(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function tr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function nr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Vt&&"documentMode"in document&&11>=document.documentMode,sr=null,or=null,ar=null,lr=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==sr||sr!==ft(r)||("selectionStart"in(r=sr)&&rr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&$n(ar,r)||(ar=r,0<(r=Ku(or,"onSelect")).length&&(t=new en("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},hr={},fr={};function pr(e){if(hr[e])return hr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return hr[e]=n[t];return e}Vt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var mr=pr("animationend"),gr=pr("animationiteration"),vr=pr("animationstart"),yr=pr("transitionrun"),br=pr("transitionstart"),wr=pr("transitioncancel"),xr=pr("transitionend"),kr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){kr.set(e,t),Qe(t,[e])}Sr.push("scrollEnd");var _r=new WeakMap;function Tr(e,t){if("object"===typeof e&&null!==e){var n=_r.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},_r.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Ir=0,Nr=0;function Ar(){for(var e=Ir,t=Nr=Ir=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var s=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Dr(e,t,n,r){Cr[Ir++]=e,Cr[Ir++]=t,Cr[Ir++]=n,Cr[Ir++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Dr(e,t,n,r),Lr(e)}function Pr(e,t){return Dr(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Lr(e){if(50<Oc)throw Oc=0,Lc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var jr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Mr(e,t,n,r)}function Vr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Vr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fr(31,n,t,i)).elementType=C,e.lanes=s,e;case g:return qr(n.children,i,s,t);case v:a=8,i|=24;break;case y:return(e=Fr(12,n,t,2|i)).elementType=y,e.lanes=s,e;case S:return(e=Fr(13,n,t,i)).elementType=S,e.lanes=s,e;case E:return(e=Fr(19,n,t,i)).elementType=E,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case w:a=9;break e;case k:a=11;break e;case _:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function qr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=[],Gr=0,Qr=null,Xr=0,Yr=[],Jr=0,$r=null,Zr=1,ei="";function ti(e,t){Kr[Gr++]=Xr,Kr[Gr++]=Qr,Qr=e,Xr=t}function ni(e,t,n){Yr[Jr++]=Zr,Yr[Jr++]=ei,Yr[Jr++]=$r,$r=e;var r=Zr;e=ei;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zr=1<<32-fe(t)+i|n<<i|r,ei=s+e}else Zr=1<<s|n<<i|r,ei=e}function ri(e){null!==e.return&&(ti(e,1),ni(e,1,0))}function ii(e){for(;e===Qr;)Qr=Kr[--Gr],Kr[Gr]=null,Xr=Kr[--Gr],Kr[Gr]=null;for(;e===$r;)$r=Yr[--Jr],Yr[Jr]=null,ei=Yr[--Jr],Yr[Jr]=null,Zr=Yr[--Jr],Yr[Jr]=null}var si=null,oi=null,ai=!1,li=null,ci=!1,ui=Error(o(519));function di(e){throw vi(Tr(Error(o(418,"")),e)),ui}function hi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[Pe]=r,n){case"dialog":Vu("cancel",t),Vu("close",t);break;case"iframe":case"object":case"embed":Vu("load",t);break;case"video":case"audio":for(n=0;n<ju.length;n++)Vu(ju[n],t);break;case"source":Vu("error",t);break;case"img":case"image":case"link":Vu("error",t),Vu("load",t);break;case"details":Vu("toggle",t);break;case"input":Vu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Vu("invalid",t);break;case"textarea":Vu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||$u(t.textContent,n)?(null!=r.popover&&(Vu("beforetoggle",t),Vu("toggle",t)),null!=r.onScroll&&Vu("scroll",t),null!=r.onScrollEnd&&Vu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||di(e)}function fi(e){for(si=e.return;si;)switch(si.tag){case 5:case 13:return void(ci=!1);case 27:case 3:return void(ci=!0);default:si=si.return}}function pi(e){if(e!==si)return!1;if(!ai)return fi(e),ai=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&oi&&di(e),fi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){oi=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}oi=null}}else 27===n?(n=oi,md(e.type)?(e=wd,wd=null,oi=e):oi=n):oi=si?bd(e.stateNode.nextSibling):null;return!0}function mi(){oi=si=null,ai=!1}function gi(){var e=li;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),li=null),e}function vi(e){null===li?li=[e]:li.push(e)}var yi=V(null),bi=null,wi=null;function xi(e,t,n){z(yi,t._currentValue),t._currentValue=n}function ki(e){e._currentValue=yi.current,U(yi)}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Si(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Si(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function _i(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Jn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&Ei(t,e,n,r),t.flags|=262144}function Ti(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){bi=e,wi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ii(e){return Ai(bi,e)}function Ni(e,t){return null===bi&&Ci(e),Ai(e,t)}function Ai(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===wi){if(null===e)throw Error(o(308));wi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wi=wi.next=t;return n}var Di="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Oi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Li(){return{controller:new Di,data:new Map,refCount:0}}function ji(e){e.refCount--,0===e.refCount&&Ri(Pi,function(){e.controller.abort()})}var Mi=null,Fi=0,Vi=0,Ui=null;function zi(){if(0===--Fi&&null!==Mi){null!==Ui&&(Ui.status="fulfilled");var e=Mi;Mi=null,Vi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Mi){var n=Mi=[];Fi=0,Vi=Du(),Ui={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fi++,t.then(zi,zi)}(0,t),null!==Bi&&Bi(e,t)};var qi=V(null);function Hi(){var e=qi.current;return null!==e?e:sc.pooledCache}function Wi(e,t){z(qi,null===t?qi.current:t.pool)}function Ki(){var e=Hi();return null===e?null:{parent:Oi._currentValue,pool:e}}var Gi=Error(o(460)),Qi=Error(o(474)),Xi=Error(o(542)),Yi={then:function(){}};function Ji(e){return"fulfilled"===(e=e.status)||"rejected"===e}function $i(){}function Zi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then($i,$i),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ns(e=t.reason),e;default:if("string"===typeof t.status)t.then($i,$i);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ns(e=t.reason),e}throw es=t,Gi}}var es=null;function ts(){if(null===es)throw Error(o(459));var e=es;return es=null,e}function ns(e){if(e===Gi||e===Xi)throw Error(o(483))}var rs=!1;function is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ss(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function os(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function as(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ic)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Dr(e,r,t,n),Lr(e)}function ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function cs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var us=!1;function ds(){if(us){if(null!==Ui)throw Ui}}function hs(e,t,n,r){us=!1;var i=e.updateQueue;rs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(ac&f)===f:(r&f)===f){0!==f&&f===Vi&&(us=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:rs=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=d}}function fs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function ps(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fs(n[e],t)}var ms=V(null),gs=V(0);function vs(e,t){z(gs,e=fc),z(ms,t),fc=e|t.baseLanes}function ys(){z(gs,fc),z(ms,ms.current)}function bs(){fc=gs.current,U(ms),U(gs)}var ws=0,xs=null,ks=null,Ss=null,Es=!1,_s=!1,Ts=!1,Cs=0,Is=0,Ns=null,As=0;function Ds(){throw Error(o(321))}function Rs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return ws=s,xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Qo:Xo,Ts=!1,s=n(r,i),Ts=!1,_s&&(s=Ls(t,n,r,i)),Os(e),s}function Os(e){O.H=Go;var t=null!==ks&&null!==ks.next;if(ws=0,Ss=ks=xs=null,Es=!1,Is=0,Ns=null,t)throw Error(o(300));null===e||Na||null!==(e=e.dependencies)&&Ti(e)&&(Na=!0)}function Ls(e,t,n,r){xs=e;var i=0;do{if(_s&&(Ns=null),Is=0,_s=!1,25<=i)throw Error(o(301));if(i+=1,Ss=ks=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Yo,s=t(n,r)}while(_s);return s}function js(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Bs(t):t,e=e.useState()[0],(null!==ks?ks.memoizedState:null)!==e&&(xs.flags|=1024),t}function Ms(){var e=0!==Cs;return Cs=0,e}function Fs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Vs(e){if(Es){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Es=!1}ws=0,Ss=ks=xs=null,_s=!1,Is=Cs=0,Ns=null}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ss?xs.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function zs(){if(null===ks){var e=xs.alternate;e=null!==e?e.memoizedState:null}else e=ks.next;var t=null===Ss?xs.memoizedState:Ss.next;if(null!==t)Ss=t,ks=e;else{if(null===e){if(null===xs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ks=e).memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},null===Ss?xs.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function Bs(e){var t=Is;return Is+=1,null===Ns&&(Ns=[]),e=Zi(Ns,e,t),t=xs,null===(null===Ss?t.memoizedState:Ss.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Qo:Xo),e}function qs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bs(e);if(e.$$typeof===x)return Ii(e)}throw Error(o(438,String(e)))}function Hs(e){var t=null,n=xs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=I;return t.index++,n}function Ws(e,t){return"function"===typeof t?t(e):t}function Ks(e){return Gs(zs(),ks,e)}function Gs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ac&h)===h:(ws&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Vi&&(d=!0);else{if((ws&f)===f){u=u.next,f===Vi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=s):c=c.next=h,xs.lanes|=f,mc|=f}h=u.action,Ts&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,xs.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Jn(s,e.memoizedState)&&(Na=!0,d&&null!==(n=Ui)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Qs(e){var t=zs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Jn(s,t.memoizedState)||(Na=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Xs(e,t,n){var r=xs,i=zs(),s=ai;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Jn((ks||i).memoizedState,n);if(a&&(i.memoizedState=n,Na=!0),i=i.queue,bo(2048,8,$s.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Ss&&1&Ss.memoizedState.tag){if(r.flags|=2048,go(9,{destroy:void 0,resource:void 0},Js.bind(null,r,i,n,t),null),null===sc)throw Error(o(349));s||0!==(124&ws)||Ys(r,t,n)}return n}function Ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Js(e,t,n,r){t.value=n,t.getSnapshot=r,Zs(t)&&eo(e)}function $s(e,t,n){return n(function(){Zs(t)&&eo(e)})}function Zs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function eo(e){var t=Pr(e,2);null!==t&&Fc(t,e,2)}function to(e){var t=Us();if("function"===typeof e){var n=e;if(e=n(),Ts){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},t}function no(e,t,n,r){return e.baseState=n,Gs(e,ks,"function"===typeof r?r:Ws)}function ro(e,t,n,r,i){if(Ho(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,io(t,s)):(s.next=n.next,t.pending=n.next=s)}}function io(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),so(e,t,a)}catch(c){ao(e,t,c)}finally{O.T=s}}else try{so(e,t,s=n(i,r))}catch(u){ao(e,t,u)}}function so(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oo(e,t,n)},function(n){return ao(e,t,n)}):oo(e,t,n)}function oo(e,t,n){t.status="fulfilled",t.value=n,lo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,io(e,n)))}function ao(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,lo(t),t=t.next}while(t!==r)}e.action=null}function lo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function co(e,t){return t}function uo(e,t){if(ai){var n=sc.formState;if(null!==n){e:{var r=xs;if(ai){if(oi){t:{for(var i=oi,s=ci;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=bd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){oi=bd(i.nextSibling),r="F!"===i.data;break e}}di(r)}r=!1}r&&(t=n[0])}}return(n=Us()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},n.queue=r,n=zo.bind(null,xs,r),r.dispatch=n,r=to(!1),s=qo.bind(null,xs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Us()).queue=i,n=ro.bind(null,xs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ho(e){return fo(zs(),ks,e)}function fo(e,t,n){if(t=Gs(e,t,co)[0],e=Ks(Ws)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Bs(t)}catch(Rt){if(Rt===Gi)throw Xi;throw Rt}else r=t;var i=(t=zs()).queue,s=i.dispatch;return n!==t.memoizedState&&(xs.flags|=2048,go(9,{destroy:void 0,resource:void 0},po.bind(null,i,n),null)),[r,s,e]}function po(e,t){e.action=t}function mo(e){var t=zs(),n=ks;if(null!==n)return fo(t,n,e);zs(),t=t.memoizedState;var r=(n=zs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function go(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vo(){return zs().memoizedState}function yo(e,t,n,r){var i=Us();r=void 0===r?null:r,xs.flags|=e,i.memoizedState=go(1|t,{destroy:void 0,resource:void 0},n,r)}function bo(e,t,n,r){var i=zs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ks&&null!==r&&Rs(r,ks.memoizedState.deps)?i.memoizedState=go(t,s,n,r):(xs.flags|=e,i.memoizedState=go(1|t,s,n,r))}function wo(e,t){yo(8390656,8,e,t)}function xo(e,t){bo(2048,8,e,t)}function ko(e,t){return bo(4,2,e,t)}function So(e,t){return bo(4,4,e,t)}function Eo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function _o(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,4,Eo.bind(null,t,e),n)}function To(){}function Co(e,t){var n=zs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Rs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Io(e,t){var n=zs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Rs(t,r[1]))return r[0];if(r=e(),Ts){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function No(e,t,n){return void 0===n||0!==(1073741824&ws)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),xs.lanes|=e,mc|=e,n)}function Ao(e,t,n,r){return Jn(n,t)?n:null!==ms.current?(e=No(e,n,r),Jn(e,t)||(Na=!0),e):0===(42&ws)?(Na=!0,e.memoizedState=n):(e=Mc(),xs.lanes|=e,mc|=e,t)}function Do(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,qo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Bo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),jc());else Bo(e,t,r,jc())}catch(u){Bo(e,t,{then:function(){},status:"rejected",reason:u},jc())}finally{L.p=s,O.T=o}}function Ro(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Oo(e).queue;Do(e,i,t,j,null===n?Ro:function(){return Lo(e),n(r)})}function Oo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Lo(e){Bo(e,Oo(e).next.queue,{},jc())}function jo(){return Ii(Yd)}function Mo(){return zs().memoizedState}function Fo(){return zs().memoizedState}function Vo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=jc(),r=as(t,e=os(n),n);return null!==r&&(Fc(r,t,n),ls(r,t,n)),t={cache:Li()},void(e.payload=t)}t=t.return}}function Uo(e,t,n){var r=jc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ho(e)?Wo(t,n):null!==(n=Rr(e,t,n,r))&&(Fc(n,e,r),Ko(n,t,r))}function zo(e,t,n){Bo(e,t,n,jc())}function Bo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ho(e))Wo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o))return Dr(e,t,i,0),null===sc&&Ar(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Fc(n,e,r),Ko(n,t,r),!0}return!1}function qo(e,t,n,r){if(r={lane:2,revertLane:Du(),action:r,hasEagerState:!1,eagerState:null,next:null},Ho(e)){if(t)throw Error(o(479))}else null!==(t=Rr(e,n,r,2))&&Fc(t,e,2)}function Ho(e){var t=e.alternate;return e===xs||null!==t&&t===xs}function Wo(e,t){_s=Es=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ko(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Go={readContext:Ii,use:qs,useCallback:Ds,useContext:Ds,useEffect:Ds,useImperativeHandle:Ds,useLayoutEffect:Ds,useInsertionEffect:Ds,useMemo:Ds,useReducer:Ds,useRef:Ds,useState:Ds,useDebugValue:Ds,useDeferredValue:Ds,useTransition:Ds,useSyncExternalStore:Ds,useId:Ds,useHostTransitionStatus:Ds,useFormState:Ds,useActionState:Ds,useOptimistic:Ds,useMemoCache:Ds,useCacheRefresh:Ds},Qo={readContext:Ii,use:qs,useCallback:function(e,t){return Us().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:wo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4194308,4,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=Us();t=void 0===t?null:t;var r=e();if(Ts){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Us();if(void 0!==n){var i=n(t);if(Ts){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Uo.bind(null,xs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Us().memoizedState=e},useState:function(e){var t=(e=to(e)).queue,n=zo.bind(null,xs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:To,useDeferredValue:function(e,t){return No(Us(),e,t)},useTransition:function(){var e=to(!1);return e=Do.bind(null,xs,e.queue,!0,!1),Us().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xs,i=Us();if(ai){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===sc)throw Error(o(349));0!==(124&ac)||Ys(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,wo($s.bind(null,r,s,e),[e]),r.flags|=2048,go(9,{destroy:void 0,resource:void 0},Js.bind(null,r,s,n,t),null),n},useId:function(){var e=Us(),t=sc.identifierPrefix;if(ai){var n=ei;t="\xab"+t+"R"+(n=(Zr&~(1<<32-fe(Zr)-1)).toString(32)+n),0<(n=Cs++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=As++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:jo,useFormState:uo,useActionState:uo,useOptimistic:function(e){var t=Us();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qo.bind(null,xs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hs,useCacheRefresh:function(){return Us().memoizedState=Vo.bind(null,xs)}},Xo={readContext:Ii,use:qs,useCallback:Co,useContext:Ii,useEffect:xo,useImperativeHandle:_o,useInsertionEffect:ko,useLayoutEffect:So,useMemo:Io,useReducer:Ks,useRef:vo,useState:function(){return Ks(Ws)},useDebugValue:To,useDeferredValue:function(e,t){return Ao(zs(),ks.memoizedState,e,t)},useTransition:function(){var e=Ks(Ws)[0],t=zs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Xs,useId:Mo,useHostTransitionStatus:jo,useFormState:ho,useActionState:ho,useOptimistic:function(e,t){return no(zs(),0,e,t)},useMemoCache:Hs,useCacheRefresh:Fo},Yo={readContext:Ii,use:qs,useCallback:Co,useContext:Ii,useEffect:xo,useImperativeHandle:_o,useInsertionEffect:ko,useLayoutEffect:So,useMemo:Io,useReducer:Qs,useRef:vo,useState:function(){return Qs(Ws)},useDebugValue:To,useDeferredValue:function(e,t){var n=zs();return null===ks?No(n,e,t):Ao(n,ks.memoizedState,e,t)},useTransition:function(){var e=Qs(Ws)[0],t=zs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Xs,useId:Mo,useHostTransitionStatus:jo,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){var n=zs();return null!==ks?no(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hs,useCacheRefresh:Fo},Jo=null,$o=0;function Zo(e){var t=$o;return $o+=1,null===Jo&&(Jo=[]),Zi(Jo,e,t)}function ea(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ta(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function na(e){return(0,e._init)(e._payload)}function ra(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&na(s)===t.type)?(ea(t=i(t,n.props),n),t.return=e,t):(ea(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=qr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return ea(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Wr(t,e.mode,n)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),n)}if(P(t)||A(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Zo(t),n);if(t.$$typeof===x)return h(e,Ni(e,t),n);ta(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=(i=n._init)(n._payload),r)}if(P(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Zo(n),r);if(n.$$typeof===x)return f(e,t,Ni(e,n),r);ta(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(P(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,Zo(r),i);if(r.$$typeof===x)return v(e,t,n,Ni(t,r),i);ta(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===T&&na(b)===c.type){n(l,c.sibling),ea(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=qr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ea(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return a(l);case T:return y(l,c,u=(b=u._init)(u._payload),d)}if(P(u))return function(i,o,a,l){for(var c=null,u=null,d=o,p=o=0,m=null;null!==d&&p<a.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,a[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===a.length)return n(i,d),ai&&ti(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===u?c=d:u.sibling=d,u=d);return ai&&ti(i,p),c}for(d=r(d);p<a.length;p++)null!==(m=v(d,i,p,a[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),ai&&ti(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,p=a,m=a=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(i,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(i,p),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,p=g}if(y.done)return n(i,p),ai&&ti(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return ai&&ti(i,m),u}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),ai&&ti(i,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,Zo(u),d);if(u.$$typeof===x)return y(l,c,Ni(l,u),d);ta(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Hr(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{$o=0;var i=y(e,t,n,r);return Jo=null,i}catch(Rt){if(Rt===Gi||Rt===Xi)throw Rt;var s=Fr(29,Rt,null,e.mode);return s.lanes=r,s.return=e,s}}}var ia=ra(!0),sa=ra(!1),oa=V(null),aa=null;function la(e){var t=e.alternate;z(ha,1&ha.current),z(oa,e),null===aa&&(null===t||null!==ms.current||null!==t.memoizedState)&&(aa=e)}function ca(e){if(22===e.tag){if(z(ha,ha.current),z(oa,e),null===aa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(aa=e)}}else ua()}function ua(){z(ha,ha.current),z(oa,oa.current)}function da(e){U(oa),aa===e&&(aa=null),U(ha)}var ha=V(0);function fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function pa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jc(),i=os(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=as(e,i,r))&&(Fc(t,e,r),ls(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jc(),i=os(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=as(e,i,r))&&(Fc(t,e,r),ls(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jc(),r=os(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=as(e,r,n))&&(Fc(t,e,n),ls(t,e,n))}};function ga(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ya(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ba="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function wa(e){ba(e)}function xa(e){console.error(e)}function ka(e){ba(e)}function Sa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ea(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function _a(e,t,n){return(n=os(n)).tag=3,n.payload={element:null},n.callback=function(){Sa(e,t)},n}function Ta(e){return(e=os(e)).tag=3,e}function Ca(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ea(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ea(t,n,r),"function"!==typeof i&&(null===Tc?Tc=new Set([this]):Tc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ia=Error(o(461)),Na=!1;function Aa(e,t,n,r){t.child=null===e?sa(t,null,n,r):ia(t,e.child,n,r)}function Da(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ci(t),r=Ps(e,t,n,o,s,i),a=Ms(),null===e||Na?(ai&&a&&ri(t),t.flags|=1,Aa(e,t,r,i),t.child):(Fs(e,t,i),Ja(e,t,i))}function Ra(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Vr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!$a(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(o,r)&&e.ref===t.ref)return Ja(e,t,i)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(Na=!1,t.pendingProps=r=s,!$a(e,i))return t.lanes=e.lanes,Ja(e,t,i);0!==(131072&e.flags)&&(Na=!0)}}return Ma(e,t,n,r,i)}function Oa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return La(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,La(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wi(0,null!==s?s.cachePool:null),null!==s?vs(t,s):ys(),ca(t)}else null!==s?(Wi(0,s.cachePool),vs(t,s),ua(),t.memoizedState=null):(null!==e&&Wi(0,null),ys(),ua());return Aa(e,t,i,n),t.child}function La(e,t,n,r){var i=Hi();return i=null===i?null:{parent:Oi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Wi(0,null),ys(),ca(t),null!==e&&_i(e,t,r,!0),null}function ja(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ma(e,t,n,r,i){return Ci(t),n=Ps(e,t,n,r,void 0,i),r=Ms(),null===e||Na?(ai&&r&&ri(t),t.flags|=1,Aa(e,t,n,i),t.child):(Fs(e,t,i),Ja(e,t,i))}function Fa(e,t,n,r,i,s){return Ci(t),t.updateQueue=null,n=Ls(t,r,n,i),Os(e),r=Ms(),null===e||Na?(ai&&r&&ri(t),t.flags|=1,Aa(e,t,n,s),t.child):(Fs(e,t,s),Ja(e,t,s))}function Va(e,t,n,r,i){if(Ci(t),null===t.stateNode){var s=jr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ii(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ma,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},is(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ii(o):jr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(pa(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&ma.enqueueReplaceState(s,s.state,null),hs(t,r,s,i),ds(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ya(n,a);s.props=l;var c=s.context,u=n.contextType;o=jr,"object"===typeof u&&null!==u&&(o=Ii(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&va(t,s,r,o),rs=!1;var h=t.memoizedState;s.state=h,hs(t,r,s,i),ds(),c=t.memoizedState,a||h!==c||rs?("function"===typeof d&&(pa(t,n,d,r),c=t.memoizedState),(l=rs||ga(t,n,l,r,h,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ss(e,t),u=ya(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=jr,"object"===typeof c&&null!==c&&(l=Ii(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&va(t,s,r,l),rs=!1,h=t.memoizedState,s.state=h,hs(t,r,s,i),ds();var f=t.memoizedState;o!==d||h!==f||rs||null!==e&&null!==e.dependencies&&Ti(e.dependencies)?("function"===typeof a&&(pa(t,n,a,r),f=t.memoizedState),(u=rs||ga(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ti(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,ja(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ia(t,e.child,null,i),t.child=ia(t,null,n,i)):Aa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ja(e,t,i),e}function Ua(e,t,n,r){return mi(),t.flags|=256,Aa(e,t,n,r),t.child}var za={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ba(e){return{baseLanes:e,cachePool:Ki()}}function qa(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yc),e}function Ha(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ha.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ai){if(s?la(t):ua(),ai){var l,c=oi;if(l=c){e:{for(l=c,c=ci;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=bd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Zr,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},(l=Fr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,si=t,oi=null,l=!0):l=!1}l||di(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yd(c)?t.lanes=32:t.lanes=536870912,null;da(t)}return c=i.children,i=i.fallback,s?(ua(),c=Ka({mode:"hidden",children:c},s=t.mode),i=qr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Ba(n),s.childLanes=qa(e,r,n),t.memoizedState=za,i):(la(t),Wa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(la(t),t.flags&=-257,t=Ga(e,t,n)):null!==t.memoizedState?(ua(),t.child=e.child,t.flags|=128,t=null):(ua(),s=i.fallback,c=t.mode,i=Ka({mode:"visible",children:i.children},c),(s=qr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,ia(t,e.child,null,n),(i=t.child).memoizedState=Ba(n),i.childLanes=qa(e,r,n),t.memoizedState=za,t=s);else if(la(t),yd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,vi({value:i,source:null,stack:null}),t=Ga(e,t,n)}else if(Na||_i(e,t,n,!1),r=0!==(n&e.childLanes),Na||r){if(null!==(r=sc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ie(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Fc(r,e,i),Ia;"$?"===c.data||Xc(),t=Ga(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,oi=bd(c.nextSibling),si=t,ai=!0,li=null,ci=!1,null!==e&&(Yr[Jr++]=Zr,Yr[Jr++]=ei,Yr[Jr++]=$r,Zr=e.id,ei=e.overflow,$r=t),(t=Wa(t,i.children)).flags|=4096);return t}return s?(ua(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ur(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Ur(u,s):(s=qr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Ba(n):(null!==(l=c.cachePool)?(u=Oi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ki(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=qa(e,r,n),t.memoizedState=za,i):(la(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Wa(e,t){return(t=Ka({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ka(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,n){return ia(t,e.child,null,n),(e=Wa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Xa(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ya(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Aa(e,t,r.children,n),0!==(2&(r=ha.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qa(e,n,t);else if(19===e.tag)Qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ha,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xa(t,!0,n,null,s);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(_i(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ti(e))}function Za(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Na=!0;else{if(!$a(e,n)&&0===(128&t.flags))return Na=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),xi(0,Oi,e.memoizedState.cache),mi();break;case 27:case 5:Q(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:xi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(la(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ha(e,t,n):(la(t),null!==(e=Ja(e,t,n))?e.sibling:null);la(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(_i(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ya(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ha,ha.current),r)break;return null;case 22:case 23:return t.lanes=0,Oa(e,t,n);case 24:xi(0,Oi,e.memoizedState.cache)}return Ja(e,t,n)}(e,t,n);Na=0!==(131072&e.flags)}else Na=!1,ai&&0!==(1048576&t.flags)&&ni(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===k){t.tag=11,t=Da(null,t,r,e,n);break e}if(i===_){t.tag=14,t=Ra(null,t,r,e,n);break e}}throw t=R(r)||r,Error(o(306,t,""))}Vr(r)?(e=ya(r,e),t.tag=1,t=Va(null,t,r,e,n)):(t.tag=0,t=Ma(null,t,r,e,n))}return t;case 0:return Ma(e,t,t.type,t.pendingProps,n);case 1:return Va(e,t,r=t.type,i=ya(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,ss(e,t),hs(t,r,null,n);var a=t.memoizedState;if(r=a.cache,xi(0,Oi,r),r!==s.cache&&Ei(t,[Oi],n,!0),ds(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ua(e,t,r,n);break e}if(r!==i){vi(i=Tr(Error(o(424)),t)),t=Ua(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(oi=bd(e.firstChild),si=t,ai=!0,li=null,ci=!0,n=sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),r===i){t=Ja(e,t,n);break e}Aa(e,t,r,n)}t=t.child}return t;case 26:return ja(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:ai||(n=t.type,e=t.pendingProps,(r=sd(H.current).createElement(n))[Re]=t,r[Pe]=e,nd(r,n,e),We(r),t.stateNode=r):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ai&&(r=t.stateNode=kd(t.type,t.pendingProps,H.current),si=t,ci=!0,i=oi,md(t.type)?(wd=i,oi=bd(r.firstChild)):oi=i),Aa(e,t,t.pendingProps.children,n),ja(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ai&&((i=r=oi)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=bd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ci))?(t.stateNode=r,si=t,oi=bd(r.firstChild),ci=!1,i=!0):i=!1),i||di(t)),Q(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ld(i,s)?r=null:null!==a&&ld(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,js,null,null,n),Yd._currentValue=i),ja(e,t),Aa(e,t,r,n),t.child;case 6:return null===e&&ai&&((e=n=oi)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,ci))?(t.stateNode=n,si=t,oi=null,e=!0):e=!1),e||di(t)),null;case 13:return Ha(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ia(t,null,r,n):Aa(e,t,r,n),t.child;case 11:return Da(e,t,t.type,t.pendingProps,n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,xi(0,t.type,r.value),Aa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ii(i)),t.flags|=1,Aa(e,t,r,n),t.child;case 14:return Ra(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ya(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ka(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Oa(e,t,n);case 24:return Ci(t),r=Ii(Oi),null===e?(null===(i=Hi())&&(i=sc,s=Li(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},is(t),xi(0,Oi,i)):(0!==(e.lanes&n)&&(ss(e,t),hs(t,null,null,n),ds()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),xi(0,Oi,r)):(r=s.cache,xi(0,Oi,r),r!==i.cache&&Ei(t,[Oi],n,!0))),Aa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=oa.current)&&((4194048&ac)===ac?null!==aa:(62914560&ac)!==ac&&0===(536870912&ac)||t!==aa))throw es=Yi,Qi;e.flags|=8192}}function nl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,bc|=t)}function rl(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var r=t.pendingProps;switch(ii(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ki(Oi),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(pi(t)?el(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,gi())),il(t),null;case 26:return n=t.memoizedState,null===e?(el(t),null!==n?(il(t),tl(t,n)):(il(t),t.flags&=-16777217)):n?n!==e.memoizedState?(el(t),il(t),tl(t,n)):(il(t),t.flags&=-16777217):(e.memoizedProps!==r&&el(t),il(t),t.flags&=-16777217),null;case 27:X(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&el(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return il(t),null}e=B.current,pi(t)?hi(t):(e=kd(i,r,n),t.stateNode=e,el(t))}return il(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&el(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return il(t),null}if(e=B.current,pi(t))hi(t);else{switch(i=sd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[Pe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(nd(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return il(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&el(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,pi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=si))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||$u(e.nodeValue,n)))||di(t)}else(e=sd(e).createTextNode(r))[Re]=t,t.stateNode=e}return il(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=pi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Re]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),i=!1}else i=gi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(da(t),t):(da(t),null)}if(da(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nl(t,t.updateQueue),il(t),null;case 4:return G(),null===e&&Bu(t.stateNode.containerInfo),il(t),null;case 10:return ki(t.type),il(t),null;case 19:if(U(ha),null===(i=t.memoizedState))return il(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)rl(i,!1);else{if(0!==pc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=fa(e))){for(t.flags|=128,rl(i,!1),e=s.updateQueue,t.updateQueue=e,nl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(ha,1&ha.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Ec&&(t.flags|=128,r=!0,rl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=fa(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,nl(t,e),rl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!ai)return il(t),null}else 2*te()-i.renderingStartTime>Ec&&536870912!==n&&(t.flags|=128,r=!0,rl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ha.current,z(ha,r?1&e|2:1&e),t):(il(t),null);case 22:case 23:return da(t),bs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null!==(n=t.updateQueue)&&nl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ki(Oi),il(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ol(e,t){switch(ii(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ki(Oi),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(da(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(ha),null;case 4:return G(),null;case 10:return ki(t.type),null;case 22:case 23:return da(t),bs(),null!==e&&U(qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ki(Oi),null;default:return null}}function al(e,t){switch(ii(t),t.tag){case 3:ki(Oi),G();break;case 26:case 27:case 5:X(t);break;case 4:G();break;case 13:da(t);break;case 19:U(ha);break;case 10:ki(t.type);break;case 22:case 23:da(t),bs(),null!==e&&U(qi);break;case 24:ki(Oi)}}function ll(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){hu(t,t.return,a)}}function cl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){hu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){hu(t,t.return,u)}}function ul(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ps(t,n)}catch(r){hu(e,e.return,r)}}}function dl(e,t,n){n.props=ya(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){hu(e,t,r)}}function hl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){hu(e,t,i)}}function fl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){hu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){hu(e,t,s)}else n.current=null}function pl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){hu(e,e.return,i)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||ed(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&ed(e,t,f,p,r,h)}}return void gt(e,a,l,c,u,d,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||ed(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&ed(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ed(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&ed(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ed(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ed(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ed(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:ed(e,t,u,f,r,p)}return;default:if(Tt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&td(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||td(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&ed(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ed(e,t,h,f,r,p)}(r,e.type,n,t),r[Pe]=t}catch(i){hu(e,e.return,i)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function vl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function wl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);nd(t,r,n),t[Re]=e,t[Pe]=n}catch(s){hu(e,e.return,s)}}var xl=!1,kl=!1,Sl=!1,El="function"===typeof WeakSet?WeakSet:Set,_l=null;function Tl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Vl(e,n),4&r&&ll(5,n);break;case 1:if(Vl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){hu(n,n.return,o)}else{var i=ya(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){hu(n,n.return,a)}}64&r&&ul(n),512&r&&hl(n,n.return);break;case 3:if(Vl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ps(e,t)}catch(o){hu(n,n.return,o)}}break;case 27:null===t&&4&r&&wl(n);case 26:case 5:Vl(e,n),null===t&&4&r&&pl(n),512&r&&hl(n,n.return);break;case 12:Vl(e,n);break;case 13:Vl(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||kl,i=xl;var s=kl;xl=r,(kl=t)&&!s?zl(e,n,0!==(8772&n.subtreeFlags)):Vl(e,n),xl=i,kl=s}break;case 30:break;default:Vl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Il=null,Nl=!1;function Al(e,t,n){for(n=n.child;null!==n;)Dl(e,t,n),n=n.sibling}function Dl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:kl||fl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:kl||fl(n,t);var r=Il,i=Nl;md(n.type)&&(Il=n.stateNode,Nl=!1),Al(e,t,n),Sd(n.stateNode),Il=r,Nl=i;break;case 5:kl||fl(n,t);case 6:if(r=Il,i=Nl,Il=null,Al(e,t,n),Nl=i,null!==(Il=r))if(Nl)try{(9===Il.nodeType?Il.body:"HTML"===Il.nodeName?Il.ownerDocument.body:Il).removeChild(n.stateNode)}catch(o){hu(n,t,o)}else try{Il.removeChild(n.stateNode)}catch(o){hu(n,t,o)}break;case 18:null!==Il&&(Nl?(gd(9===(e=Il).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nh(e)):gd(Il,n.stateNode));break;case 4:r=Il,i=Nl,Il=n.stateNode.containerInfo,Nl=!0,Al(e,t,n),Il=r,Nl=i;break;case 0:case 11:case 14:case 15:kl||cl(2,n,t),kl||cl(4,n,t),Al(e,t,n);break;case 1:kl||(fl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&dl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:kl=(r=kl)||null!==n.memoizedState,Al(e,t,n),kl=r;break;default:Al(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nh(e)}catch(n){hu(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new El),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new El),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=vu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Ol(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Il=l.stateNode,Nl=!1;break e}break;case 5:Il=l.stateNode,Nl=!1;break e;case 3:case 4:Il=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Il)throw Error(o(160));Dl(s,a,i),Il=null,Nl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)jl(t,e),t=t.sibling}var Ll=null;function jl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ol(t,e),Ml(e),4&r&&(cl(3,e,e.return),ll(3,e),cl(5,e,e.return));break;case 1:Ol(t,e),Ml(e),512&r&&(kl||null===n||fl(n,n.return)),64&r&&xl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ll;if(Ol(t,e),Ml(e),512&r&&(kl||null===n||fl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ve]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),nd(s,r,n),s[Re]=e,We(s),r=s;break e;case"link":var a=zd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}nd(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=zd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}nd(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Re]=e,We(s),r=s}e.stateNode=r}else Bd(i,e.type,e.stateNode);else e.stateNode=jd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Bd(i,e.type,e.stateNode):jd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ol(t,e),Ml(e),512&r&&(kl||null===n||fl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ol(t,e),Ml(e),512&r&&(kl||null===n||fl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(p){hu(e,e.return,p)}}4&r&&null!=e.stateNode&&ml(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Sl=!0);break;case 6:if(Ol(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){hu(e,e.return,p)}}break;case 3:if(Ud=null,i=Ll,Ll=Td(t.containerInfo),Ol(t,e),Ll=i,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nh(t.containerInfo)}catch(p){hu(e,e.return,p)}Sl&&(Sl=!1,Fl(e));break;case 4:r=Ll,Ll=Td(e.stateNode.containerInfo),Ol(t,e),Ml(e),Ll=r;break;case 12:default:Ol(t,e),Ml(e);break;case 13:Ol(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Sc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=xl,d=kl;if(xl=u||i,kl=d||c,Ol(t,e),kl=d,xl=u,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||xl||kl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){hu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){hu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Ol(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(gl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;bl(e,vl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),bl(e,vl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;yl(e,vl(e),a);break;default:throw Error(o(161))}}catch(l){hu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Vl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),Ul(t);break;case 1:fl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&dl(t,t.return,n),Ul(t);break;case 27:Sd(t.stateNode);case 26:case 5:fl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:zl(i,s,n),ll(4,s);break;case 1:if(zl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){hu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)fs(l[i],a)}catch(c){hu(r,r.return,c)}}n&&64&o&&ul(s),hl(s,s.return);break;case 27:wl(s);case 26:case 5:zl(i,s,n),n&&null===r&&4&o&&pl(s),hl(s,s.return);break;case 12:zl(i,s,n);break;case 13:zl(i,s,n),n&&4&o&&Rl(i,s);break;case 22:null===s.memoizedState&&zl(i,s,n),hl(s,s.return);break;case 30:break;default:zl(i,s,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ji(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e))}function Hl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,r),t=t.sibling}function Wl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,r),2048&i&&ll(9,t);break;case 1:case 13:default:Hl(e,t,n,r);break;case 3:Hl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e)));break;case 12:if(2048&i){Hl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){hu(t,t.return,l)}}else Hl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Hl(e,t,n,r):Gl(e,t):2&s._visibility?Hl(e,t,n,r):(s._visibility|=2,Kl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Bl(o,t);break;case 24:Hl(e,t,n,r),2048&i&&ql(t.alternate,t)}}function Kl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Kl(s,o,a,l,i),ll(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Kl(s,o,a,l,i):Gl(s,o):(u._visibility|=2,Kl(s,o,a,l,i)),i&&2048&c&&Bl(o.alternate,o);break;case 24:Kl(s,o,a,l,i),i&&2048&c&&ql(o.alternate,o);break;default:Kl(s,o,a,l,i)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Gl(n,r),2048&i&&Bl(r.alternate,r);break;case 24:Gl(n,r),2048&i&&ql(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Ql=8192;function Xl(e){if(e.subtreeFlags&Ql)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Xl(e),e.flags&Ql&&null!==e.memoizedState&&function(e,t,n){if(null===Hd)throw Error(o(475));var r=Hd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Dd(n.href),s=e.querySelector(Rd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Kd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void We(s);s=e.ownerDocument||e,n=Pd(n),(i=Ed.get(i))&&Fd(n,i),We(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),nd(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Kd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Ll;Ll=Td(e.stateNode.containerInfo),Xl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ql,Ql=16777216,Xl(e),Ql=t):Xl(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];_l=r,tc(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:$l(e),2048&e.flags&&cl(9,e,e.return);break;case 3:case 12:default:$l(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):$l(e)}}function ec(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];_l=r,tc(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:cl(8,t,t.return),ec(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==_l;){var n=_l;switch(n.tag){case 0:case 11:case 15:cl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:ji(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,_l=r;else e:for(n=e;null!==_l;){var i=(r=_l).sibling,s=r.return;if(Cl(r),r===n){_l=null;break e}if(null!==i){i.return=s,_l=i;break e}_l=s}}}var nc={getCacheForType:function(e){var t=Ii(Oi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},rc="function"===typeof WeakMap?WeakMap:Map,ic=0,sc=null,oc=null,ac=0,lc=0,cc=null,uc=!1,dc=!1,hc=!1,fc=0,pc=0,mc=0,gc=0,vc=0,yc=0,bc=0,wc=null,xc=null,kc=!1,Sc=0,Ec=1/0,_c=null,Tc=null,Cc=0,Ic=null,Nc=null,Ac=0,Dc=0,Rc=null,Pc=null,Oc=0,Lc=null;function jc(){if(0!==(2&ic)&&0!==ac)return ac&-ac;if(null!==O.T){return 0!==Vi?Vi:Du()}return Ae()}function Mc(){0===yc&&(yc=0===(536870912&ac)||ai?ke():536870912);var e=oa.current;return null!==e&&(e.flags|=32),yc}function Fc(e,t,n){(e!==sc||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Wc(e,0),Bc(e,ac,yc,!1)),_e(e,n),0!==(2&ic)&&e===sc||(e===sc&&(0===(2&ic)&&(gc|=n),4===pc&&Bc(e,ac,yc,!1)),Eu(e))}function Vc(e,t,n){if(0!==(6&ic))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=ic;ic|=2;var r=Gc(),i=Qc();sc!==e||ac!==t?(_c=null,Ec=te()+500,Wc(e,t)):dc=we(e,t);e:for(;;)try{if(0!==lc&&null!==oc){t=oc;var s=cc;t:switch(lc){case 1:lc=0,cc=null,tu(e,t,s,1);break;case 2:case 9:if(Ji(s)){lc=0,cc=null,eu(t);break}t=function(){2!==lc&&9!==lc||sc!==e||(lc=7),Eu(e)},s.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Ji(s)?(lc=0,cc=null,eu(t)):(lc=0,cc=null,tu(e,t,s,7));break;case 5:var a=null;switch(oc.tag){case 26:a=oc.memoizedState;case 5:case 27:var l=oc;if(!a||qd(a)){lc=0,cc=null;var c=l.sibling;if(null!==c)oc=c;else{var u=l.return;null!==u?(oc=u,nu(u)):oc=null}break t}}lc=0,cc=null,tu(e,t,s,5);break;case 6:lc=0,cc=null,tu(e,t,s,6);break;case 8:Hc(),pc=6;break e;default:throw Error(o(462))}}$c();break}catch(d){Kc(e,d)}return wi=bi=null,O.H=r,O.A=i,ic=n,null!==oc?0:(sc=null,ac=0,Ar(),pc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){dc&&!r&&Bc(e,t,0,!1);break}if(n=e.current.alternate,!s||zc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=wc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,a).flags|=256),2!==(a=Yc(l,a,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=s,gc|=s,i=4;break e}s=xc,xc=i,null!==s&&(null===xc?xc=s:xc.push.apply(xc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Wc(e,0),Bc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Bc(r,t,yc,!uc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Sc+300-te())){if(Bc(r,t,yc,!uc),0!==be(r,0,!0))break e;r.timeoutHandle=ud(Uc.bind(null,r,n,xc,_c,kc,t,yc,gc,bc,uc,s,2,-0,0),i)}else Uc(r,n,xc,_c,kc,t,yc,gc,bc,uc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}Eu(e)}function Uc(e,t,n,r,i,s,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Hd={stylesheets:null,count:0,unsuspend:Wd},Yl(t),null!==(h=function(){if(null===Hd)throw Error(o(475));var e=Hd;return e.stylesheets&&0===e.count&&Qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(iu.bind(null,e,t,s,n,r,i,a,l,c,d,1,f,p)),void Bc(e,s,a,!u);iu(e,t,s,n,r,i,a,l,c)}function zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,n,r){t&=~vc,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Te(e,n,t)}function qc(){return 0!==(6&ic)||(_u(0,!1),!1)}function Hc(){if(null!==oc){if(0===lc)var e=oc.return;else wi=bi=null,Vs(e=oc),Jo=null,$o=0,e=oc;for(;null!==e;)al(e.alternate,e),e=e.return;oc=null}}function Wc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,dd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),sc=e,oc=n=Ur(e.current,null),ac=t,lc=0,cc=null,uc=!1,dc=we(e,t),hc=!1,bc=yc=vc=gc=mc=pc=0,xc=wc=null,kc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return fc=t,Ar(),n}function Kc(e,t){xs=null,O.H=Go,t===Gi||t===Xi?(t=ts(),lc=3):t===Qi?(t=ts(),lc=4):lc=t===Ia?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,cc=t,null===oc&&(pc=1,Sa(e,Tr(t,e.current)))}function Gc(){var e=O.H;return O.H=Go,null===e?Go:e}function Qc(){var e=O.A;return O.A=nc,e}function Xc(){pc=4,uc||(4194048&ac)!==ac&&null!==oa.current||(dc=!0),0===(134217727&mc)&&0===(134217727&gc)||null===sc||Bc(sc,ac,yc,!1)}function Yc(e,t,n){var r=ic;ic|=2;var i=Gc(),s=Qc();sc===e&&ac===t||(_c=null,Wc(e,t)),t=!1;var o=pc;e:for(;;)try{if(0!==lc&&null!==oc){var a=oc,l=cc;switch(lc){case 8:Hc(),o=6;break e;case 3:case 2:case 9:case 6:null===oa.current&&(t=!0);var c=lc;if(lc=0,cc=null,tu(e,a,l,c),n&&dc){o=0;break e}break;default:c=lc,lc=0,cc=null,tu(e,a,l,c)}}Jc(),o=pc;break}catch(u){Kc(e,u)}return t&&e.shellSuspendCounter++,wi=bi=null,ic=r,O.H=i,O.A=s,null===oc&&(sc=null,ac=0,Ar()),o}function Jc(){for(;null!==oc;)Zc(oc)}function $c(){for(;null!==oc&&!Z();)Zc(oc)}function Zc(e){var t=Za(e.alternate,e,fc);e.memoizedProps=e.pendingProps,null===t?nu(e):oc=t}function eu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fa(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Fa(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Vs(t);default:al(n,t),t=Za(n,t=oc=zr(t,fc),fc)}e.memoizedProps=e.pendingProps,null===t?nu(e):oc=t}function tu(e,t,n,r){wi=bi=null,Vs(t),Jo=null,$o=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&_i(t,n,i,!0),null!==(n=oa.current)){switch(n.tag){case 13:return null===aa?Xc():null===n.alternate&&0===pc&&(pc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),fu(e,r,i)),!1;case 22:return n.flags|=65536,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),fu(e,r,i)),!1}throw Error(o(435,n.tag))}return fu(e,r,i),Xc(),!1}if(ai)return null!==(t=oa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==ui&&vi(Tr(e=Error(o(422),{cause:r}),n))):(r!==ui&&vi(Tr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Tr(r,n),cs(e,i=_a(e.stateNode,r,i)),4!==pc&&(pc=2)),!1;var s=Error(o(520),{cause:r});if(s=Tr(s,n),null===wc?wc=[s]:wc.push(s),4!==pc&&(pc=2),null===t)return!0;r=Tr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,cs(n,e=_a(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Tc||!Tc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ca(i=Ta(i),e,n,r),cs(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ac))return pc=1,Sa(e,Tr(n,e.current)),void(oc=null)}catch(s){if(null!==i)throw oc=i,s;return pc=1,Sa(e,Tr(n,e.current)),void(oc=null)}32768&t.flags?(ai||1===r?e=!0:dc||0!==(536870912&ac)?e=!1:(uc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=oa.current)&&13===r.tag&&(r.flags|=16384))),ru(t,e)):nu(t)}function nu(e){var t=e;do{if(0!==(32768&t.flags))return void ru(t,uc);e=t.return;var n=sl(t.alternate,t,fc);if(null!==n)return void(oc=n);if(null!==(t=t.sibling))return void(oc=t);oc=t=e}while(null!==t);0===pc&&(pc=5)}function ru(e,t){do{var n=ol(e.alternate,e);if(null!==n)return n.flags&=32767,void(oc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(oc=e);oc=e=n}while(null!==e);pc=6,oc=null}function iu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{cu()}while(0!==Cc);if(0!==(6&ic))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Nr,a,l,c),e===sc&&(oc=sc=null,ac=0),Nc=t,Ic=e,Ac=n,Dc=s,Rc=i,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,function(){return uu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=ic,ic|=4;try{!function(e,t){if(e=e.containerInfo,rd=ih,rr(e=nr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},ih=!1,_l=t;null!==_l;)if(e=(t=_l).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,_l=e;else for(;null!==_l;){switch(s=(t=_l).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=ya(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){hu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))vd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,_l=e;break}_l=t.return}}(e,t)}finally{ic=a,L.p=i,O.T=r}}Cc=1,su(),ou(),au()}}function su(){if(1===Cc){Cc=0;var e=Ic,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=ic;ic|=4;try{jl(t,e);var s=id,o=nr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&tr(a.ownerDocument.documentElement,a)){if(null!==l&&rr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var v=er(a,m),y=er(a,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}ih=!!rd,id=rd=null}finally{ic=i,L.p=r,O.T=n}}e.current=t,Cc=2}}function ou(){if(2===Cc){Cc=0;var e=Ic,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=ic;ic|=4;try{Tl(e,t.alternate,t)}finally{ic=i,L.p=r,O.T=n}}Cc=3}}function au(){if(4===Cc||3===Cc){Cc=0,ee();var e=Ic,t=Nc,n=Ac,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cc=5:(Cc=0,Nc=Ic=null,lu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Tc=null),Ne(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&Ac)&&cu(),Eu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Lc?Oc++:(Oc=0,Lc=e):Oc=0,_u(0,!1)}}function lu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,ji(t)))}function cu(e){return su(),ou(),au(),uu()}function uu(){if(5!==Cc)return!1;var e=Ic,t=Dc;Dc=0;var n=Ne(Ac),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Rc,Rc=null;var s=Ic,a=Ac;if(Cc=0,Nc=Ic=null,Ac=0,0!==(6&ic))throw Error(o(331));var l=ic;if(ic|=4,Zl(s.current),Wl(s,s.current,a,n),ic=l,_u(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{L.p=i,O.T=r,lu(e,t)}}function du(e,t,n){t=Tr(n,t),null!==(e=as(e,t=_a(e.stateNode,t,2),2))&&(_e(e,2),Eu(e))}function hu(e,t,n){if(3===e.tag)du(e,e,n);else for(;null!==t;){if(3===t.tag){du(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Tc||!Tc.has(r))){e=Tr(n,e),null!==(r=as(t,n=Ta(2),2))&&(Ca(n,r,t,e),_e(r,2),Eu(r));break}}t=t.return}}function fu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(hc=!0,i.add(n),e=pu.bind(null,e,t,n),t.then(e,e))}function pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(ac&n)===n&&(4===pc||3===pc&&(62914560&ac)===ac&&300>te()-Sc?0===(2&ic)&&Wc(e,0):vc|=n,bc===ac&&(bc=0)),Eu(e)}function mu(e,t){0===t&&(t=Se()),null!==(e=Pr(e,t))&&(_e(e,t),Eu(e))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function vu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),mu(e,n)}var yu=null,bu=null,wu=!1,xu=!1,ku=!1,Su=0;function Eu(e){e!==bu&&null===e.next&&(null===bu?yu=bu=e:bu=bu.next=e),xu=!0,wu||(wu=!0,fd(function(){0!==(6&ic)?J(re,Tu):Cu()}))}function _u(e,t){if(!ku&&xu){ku=!0;do{for(var n=!1,r=yu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Au(r,s))}else s=ac,0===(3&(s=be(r,r===sc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Au(r,s));r=r.next}}while(n);ku=!1}}function Tu(){Cu()}function Cu(){xu=wu=!1;var e=0;0!==Su&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==cd&&(cd=e,!0);return cd=null,!1}()&&(e=Su),Su=0);for(var t=te(),n=null,r=yu;null!==r;){var i=r.next,s=Iu(r,t);0===s?(r.next=null,null===n?yu=i:n.next=i,null===i&&(bu=n)):(n=r,(0!==e||0!==(3&s))&&(xu=!0)),r=i}_u(e,!1)}function Iu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=ac,n=be(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&$(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&$(r),Ne(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Nu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&$(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(cu()&&e.callbackNode!==n)return null;var r=ac;return 0===(r=be(e,e===sc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Vc(e,r,t),Iu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function Au(e,t){if(cu())return null;Vc(e,t,!0)}function Du(){return 0===Su&&(Su=ke()),Su}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ou=0;Ou<Sr.length;Ou++){var Lu=Sr[Ou];Er(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}Er(mr,"onAnimationEnd"),Er(gr,"onAnimationIteration"),Er(vr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(yr,"onTransitionRun"),Er(br,"onTransitionStart"),Er(wr,"onTransitionCancel"),Er(xr,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function Fu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ba(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ba(u)}i.currentTarget=null,s=l}}}}function Vu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[zu]){e[zu]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Mu.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zu]||(t[zu]=!0,Uu("selectionchange",!1,t))}}function qu(e,t,n,r){switch(dh(t)){case 2:var i=sh;break;case 8:i=oh;break;default:i=ah}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Mt(function(){var r=s,i=Dt(n),o=[];e:{var a=kr.get(e);if(void 0!==a){var c=en,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case mr:case gr:case vr:c=ln;break;case xr:c=wn;break;case"scroll":case"scrollend":c=nn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=kn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ft(m,f))&&d.push(Wu(m,g,p)),h)break;m=m.return}0<d.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?a:qe(c),p=null==u?a:qe(u),(a=new d(g,m+"leave",c,n,i)).target=h,a.relatedTarget=p,g=null,ze(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Gu(p))m++;for(p=0,g=f;g;g=Gu(g))p++;for(;0<m-p;)d=Gu(d),m--;for(;0<p-m;)f=Gu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Qu(o,a,c,d,!1),null!==u&&null!==h&&Qu(o,h,u,d,!0)}if("select"===(c=(a=r?qe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=Un;else if(On(a))if(zn)v=Yn;else{v=Qn;var y=Gn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Tt(r.elementType)&&(v=Un):v=Xn;switch(v&&(v=v(e,r))?Ln(o,v,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&yt(a,"number",a.value)),y=r?qe(r):window,e){case"focusin":(On(y)||"true"===y.contentEditable)&&(sr=y,or=r,ar=null);break;case"focusout":ar=or=sr=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,cr(o,n,i);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":cr(o,n,i)}var b;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Wt()):(qt="value"in(Bt=i)?Bt.value:Bt.textContent,Rn=!0)),0<(y=Ku(r,w)).length&&(w=new un(w,e,null,n,i),o.push({event:w,listeners:y}),b?w.data=b:null!==(b=Dn(n))&&(w.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Nn=!0,In);case"textInput":return(e=t.data)===In&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!En&&An(e,t)?(e=Wt(),Ht=qt=Bt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Ku(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Ru((i[Pe]||null).action),o=r.submitter;o&&null!==(t=(t=o[Pe]||null)?Ru(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new en("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Su){var e=o?Pu(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Pu(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Fu(o,t)})}function Wu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ku(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ft(e,n))&&r.unshift(Wu(e,i,s)),null!=(i=Ft(e,t))&&r.push(Wu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Qu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Ft(n,s))&&o.unshift(Wu(n,c,l)):i||null!=(c=Ft(n,s))&&o.push(Wu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Ju(e){return("string"===typeof e?e:""+e).replace(Xu,"\n").replace(Yu,"")}function $u(e,t){return t=Ju(t),Ju(e)===t}function Zu(){}function ed(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&ed(e,t,"name",i.name,i,null),ed(e,t,"formEncType",i.formEncType,i,null),ed(e,t,"formMethod",i.formMethod,i,null),ed(e,t,"formTarget",i.formTarget,i,null)):(ed(e,t,"encType",i.encType,i,null),ed(e,t,"method",i.method,i,null),ed(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"onScroll":null!=r&&Vu("scroll",e);break;case"onScrollEnd":null!=r&&Vu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Vu("beforetoggle",e),Vu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function td(e,t,n,r,i,s){switch(n){case"style":_t(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Vu("scroll",e);break;case"onScrollEnd":null!=r&&Vu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Pe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function nd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vu("error",e),Vu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ed(e,t,r,a,n,null)}}return s&&ed(e,t,"srcSet",n.srcSet,n,null),void(i&&ed(e,t,"src",n.src,n,null));case"input":Vu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:ed(e,t,i,d,n,null)}}return vt(e,r,l,c,u,a,s,!1),void dt(e);case"select":for(s in Vu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:ed(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Vu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:ed(e,t,a,l,n,null)}return xt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else ed(e,t,c,i,n,null);return;case"dialog":Vu("beforetoggle",e),Vu("toggle",e),Vu("cancel",e),Vu("close",e);break;case"iframe":case"object":Vu("load",e);break;case"video":case"audio":for(i=0;i<ju.length;i++)Vu(ju[i],e);break;case"image":Vu("error",e),Vu("load",e);break;case"details":Vu("toggle",e);break;case"embed":case"source":case"link":Vu("error",e),Vu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ed(e,t,u,i,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&td(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&ed(e,t,l,i,n,null))}var rd=null,id=null;function sd(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cd=null;var ud="function"===typeof setTimeout?setTimeout:void 0,dd="function"===typeof clearTimeout?clearTimeout:void 0,hd="function"===typeof Promise?Promise:void 0,fd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof hd?function(e){return hd.resolve(null).then(e).catch(pd)}:ud;function pd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function gd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Sd(o.documentElement),2&n&&Sd(o.body),4&n)for(Sd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Nh(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Nh(t)}function vd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":vd(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var wd=null;function xd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function kd(e,t,n){switch(t=sd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var Ed=new Map,_d=new Set;function Td(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=L.d;L.d={f:function(){var e=Cd.f(),t=qc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Lo(t):Cd.r(e)},D:function(e){Cd.D(e),Nd("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),Nd("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Id;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=Dd(e);break;case"script":s=Od(e)}Ed.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ed.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Rd(s))||"script"===t&&r.querySelector(Ld(s))||(nd(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Id;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Od(e)}if(!Ed.has(s)&&(e=h({rel:"modulepreload",href:e},t),Ed.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(s)))return}nd(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Id;if(n&&e){var r=He(n).hoistableScripts,i=Od(e),s=r.get(i);s||((s=n.querySelector(Ld(i)))||(e=h({src:e,async:!0},t),(t=Ed.get(i))&&Vd(e,t),We(s=n.createElement("script")),nd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Cd.S(e,t,n);var r=Id;if(r&&e){var i=He(r).hoistableStyles,s=Dd(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Rd(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ed.get(s))&&Fd(e,n);var l=o=r.createElement("link");We(l),nd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Md(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Cd.M(e,t);var n=Id;if(n&&e){var r=He(n).hoistableScripts,i=Od(e),s=r.get(i);s||((s=n.querySelector(Ld(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Ed.get(i))&&Vd(e,t),We(s=n.createElement("script")),nd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Id="undefined"===typeof document?null:document;function Nd(e,t,n){var r=Id;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),_d.has(i)||(_d.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(nd(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Ad(e,t,n,r){var i=(i=H.current)?Td(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Dd(n.href),(r=(n=He(i).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Dd(n.href);var s=He(i).hoistableStyles,a=s.get(e);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,a),(s=i.querySelector(Rd(e)))&&!s._p&&(a.instance=s,a.state.loading=5),Ed.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ed.set(e,n),s||function(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),nd(t,"link",n),We(t),e.head.appendChild(t))}(i,e,n,a.state))),t&&null===r)throw Error(o(528,""));return a}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Od(n),(r=(n=He(i).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Dd(e){return'href="'+mt(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Od(e){return'[src="'+mt(e)+'"]'}function Ld(e){return"script[async]"+e}function jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),nd(r,"style",i),Md(r,n.precedence,e),t.instance=r;case"stylesheet":i=Dd(n.href);var s=e.querySelector(Rd(i));if(s)return t.state.loading|=4,t.instance=s,We(s),s;r=Pd(n),(i=Ed.get(i))&&Fd(r,i),We(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),nd(s,"link",r),t.state.loading|=4,Md(s,n.precedence,e),t.instance=s;case"script":return s=Od(n.src),(i=e.querySelector(Ld(s)))?(t.instance=i,We(i),i):(r=n,(i=Ed.get(s))&&Vd(r=h({},n),i),We(i=(e=e.ownerDocument||e).createElement("script")),nd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Md(r,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Vd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function zd(e,t,n){if(null===Ud){var r=new Map,i=Ud=new Map;i.set(n,r)}else(r=(i=Ud).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ve]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hd=null;function Wd(){}function Kd(){if(this.count--,0===this.count)if(this.stylesheets)Qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Xd,e),Gd=null,Kd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Kd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:x,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function Jd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function $d(e,t,n,r,i,s,o,a,l,c,u,d){return e=new Jd(e,t,n,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=Li()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},is(s),e}function Zd(e){return e?e=jr:jr}function eh(e,t,n,r,i,s){i=Zd(i),null===r.context?r.context=i:r.pendingContext=i,(r=os(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=as(e,r,t))&&(Fc(n,0,t),ls(n,e,t))}function th(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nh(e,t){th(e,t),(e=e.alternate)&&th(e,t)}function rh(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Fc(t,0,67108864),nh(e,67108864)}}var ih=!0;function sh(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,ah(e,t,n,r)}finally{L.p=s,O.T=i}}function oh(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,ah(e,t,n,r)}finally{L.p=s,O.T=i}}function ah(e,t,n,r){if(ih){var i=lh(r);if(null===i)Hu(e,t,r,ch,n),wh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return fh=xh(fh,e,t,n,r,i),!0;case"dragenter":return ph=xh(ph,e,t,n,r,i),!0;case"mouseover":return mh=xh(mh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gh.set(s,xh(gh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vh.set(s,xh(vh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(wh(e,r),4&t&&-1<bh.indexOf(e)){for(;null!==i;){var s=Be(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ye(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Eu(s),0===(6&ic)&&(Ec=te()+500,_u(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Fc(a,0,2),qc(),nh(s,2)}if(null===(s=lh(r))&&Hu(e,t,r,ch,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hu(e,t,r,null,n)}}function lh(e){return uh(e=Dt(e))}var ch=null;function uh(e){if(ch=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ch=e,null}function dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var hh=!1,fh=null,ph=null,mh=null,gh=new Map,vh=new Map,yh=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wh(e,t){switch(e){case"focusin":case"focusout":fh=null;break;case"dragenter":case"dragleave":ph=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(t.pointerId)}}function xh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&rh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function kh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=jc();e=Ie(e);var t=Pr(n,e);null!==t&&Fc(t,0,e),nh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=lh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&rh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Eh(e,t,n){Sh(e)&&n.delete(t)}function _h(){hh=!1,null!==fh&&Sh(fh)&&(fh=null),null!==ph&&Sh(ph)&&(ph=null),null!==mh&&Sh(mh)&&(mh=null),gh.forEach(Eh),vh.forEach(Eh)}function Th(e,t){e.blockedOn===t&&(e.blockedOn=null,hh||(hh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_h)))}var Ch=null;function Ih(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===uh(r||n))continue;break}var s=Be(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Nh(e){function t(t){return Th(t,e)}null!==fh&&Th(fh,e),null!==ph&&Th(ph,e),null!==mh&&Th(mh,e),gh.forEach(t),vh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)kh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Pe]||null;if("function"===typeof s)o||Ih(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Pe]||null)a=o.formAction;else if(null!==uh(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ih(n)}}}function Ah(e){this._internalRoot=e}function Dh(e){this._internalRoot=e}Dh.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));eh(t.current,jc(),e,t,null,null)},Dh.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;eh(e.current,2,null,e,null,null),qc(),t[Oe]=null}},Dh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&kh(e)}};var Rh=i.version;if("19.1.0"!==Rh)throw Error(o(527,Rh,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{ue=Oh.inject(Ph),de=Oh}catch(jh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=wa,s=xa,l=ka;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=$d(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,Bu(e),new Ah(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=wa,l=xa,c=ka,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=$d(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Zd(null),n=t.current,(i=os(r=Ie(r=jc()))).callback=null,as(n,i,r),n=r,t.current.lanes=n,_e(t,n),Eu(t),e[Oe]=t.current,Bu(e),new Dh(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(){}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return N((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+C(e,0):s,x(o)?(i="",null!=u&&(i=u.replace(T,"$&/")+"/"),N(o,t,i,"",function(e){return e})):null!=o&&(_(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+u,o=E(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,p=""===s?".":s+":";if(x(e))for(var m=0;m<e.length;m++)u+=N(s=e[m],t,i,a=p+C(s,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,a=p+C(s,m++),o);else if("object"===a){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(I,I):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return E(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(P,R)}catch(s){R(s)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,E||(E=!0,S());else{var t=r(u);null!==t&&R(k,t.startTime-e)}}var S,E=!1,_=-1,T=5,C=-1;function I(){return!!v||!(t.unstable_now()-C<T)}function N(){if(v=!1,E){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),p=!0;var s=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(k,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=N,S=function(){D.postMessage(null)}}else S=function(){y(N,0)};function R(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(_),_=-1):g=!0,R(k,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new h;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return d.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const g=()=>{try{return m().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/education-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},v=e=>{var t,n;return null===(n=null===(t=g())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},y=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},b=e=>{var t;return null===(t=g())||void 0===t?void 0:t["_".concat(e)]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function x(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function k(e){return(await fetch(e,{credentials:"include"})).ok}const S={};let E=!1;function _(e,t){if("undefined"===typeof window||"undefined"===typeof document||!x(window.location.host)||S[e]===t||S[e]||E)return;function n(e){return"__firebase__banner__".concat(e)}S[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(S))S[t]?e.emulator.push(t):e.prod.push(t);return e}(),s=i.prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{E=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,i,l,n),document.body.appendChild(t)}s?(i.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function C(){var e;const t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function I(){return!C()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"===typeof indexedDB}catch(e){return!1}}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(R,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new A(n,s,t)}}const R=/\{\$([^}]+)}/g;function P(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(O(n)&&O(s)){if(!P(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O(e){return null!==e&&"object"===typeof e}function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function j(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function M(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class F{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function U(e){return e&&e._delegate?e._delegate:e}class z{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const B="[DEFAULT]";class q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:B})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===B?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.component?this.component.multipleInstances?e:B:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const W=[];var K;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(K||(K={}));const G={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Q=K.INFO,X={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Y=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=X[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class J{constructor(e){this.name=e,this._logLevel=Q,this._logHandler=Y,this._userLogHandler=null,W.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?G[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...t),this._logHandler(this,K.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...t),this._logHandler(this,K.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.INFO,...t),this._logHandler(this,K.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.WARN,...t),this._logHandler(this,K.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.ERROR,...t),this._logHandler(this,K.ERROR,...t)}}let $,Z;const ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=new WeakMap;let se={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return te.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ne.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return le(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ce(this),n),le(ee.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return le(e.apply(ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ce(this),t,...r);return ne.set(s,t.sort?t.sort():[t]),le(s)}}function ae(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(te.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});te.set(e,t)}(e),t=e,($||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,se):e);var t}function le(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(le(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ee.set(t,e)}).catch(()=>{}),ie.set(t,e),t}(e);if(re.has(e))return re.get(e);const t=ae(e);return t!==e&&(re.set(e,t),ie.set(t,e)),t}const ce=e=>ie.get(e);const ue=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],he=new Map;function fe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(he.get(t))return he.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=de.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ue.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return he.set(t,s),s}se=(e=>c(c({},e),{},{get:(t,n,r)=>fe(t,n)||e.get(t,n,r),has:(t,n)=>!!fe(t,n)||e.has(t,n)}))(se);class pe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const me="@firebase/app",ge="0.13.2",ve=new J("@firebase/app"),ye="@firebase/app-compat",be="@firebase/analytics-compat",we="@firebase/analytics",xe="@firebase/app-check-compat",ke="@firebase/app-check",Se="@firebase/auth",Ee="@firebase/auth-compat",_e="@firebase/database",Te="@firebase/data-connect",Ce="@firebase/database-compat",Ie="@firebase/functions",Ne="@firebase/functions-compat",Ae="@firebase/installations",De="@firebase/installations-compat",Re="@firebase/messaging",Pe="@firebase/messaging-compat",Oe="@firebase/performance",Le="@firebase/performance-compat",je="@firebase/remote-config",Me="@firebase/remote-config-compat",Fe="@firebase/storage",Ve="@firebase/storage-compat",Ue="@firebase/firestore",ze="@firebase/ai",Be="@firebase/firestore-compat",qe="firebase",He="[DEFAULT]",We={[me]:"fire-core",[ye]:"fire-core-compat",[we]:"fire-analytics",[be]:"fire-analytics-compat",[ke]:"fire-app-check",[xe]:"fire-app-check-compat",[Se]:"fire-auth",[Ee]:"fire-auth-compat",[_e]:"fire-rtdb",[Te]:"fire-data-connect",[Ce]:"fire-rtdb-compat",[Ie]:"fire-fn",[Ne]:"fire-fn-compat",[Ae]:"fire-iid",[De]:"fire-iid-compat",[Re]:"fire-fcm",[Pe]:"fire-fcm-compat",[Oe]:"fire-perf",[Le]:"fire-perf-compat",[je]:"fire-rc",[Me]:"fire-rc-compat",[Fe]:"fire-gcs",[Ve]:"fire-gcs-compat",[Ue]:"fire-fst",[Be]:"fire-fst-compat",[ze]:"fire-vertex","fire-js":"fire-js",[qe]:"fire-js-all"},Ke=new Map,Ge=new Map,Qe=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ye(e){const t=e.name;if(Qe.has(t))return ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qe.set(t,e);for(const n of Ke.values())Xe(n,e);for(const n of Ge.values())Xe(n,e);return!0}function Je(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $e(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ze=new D("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class et{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new z("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ze.create("app-deleted",{appName:this._name})}}const tt="11.10.0";function nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:He,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Ze.create("bad-app-name",{appName:String(i)});if(n||(n=y()),!n)throw Ze.create("no-options");const s=Ke.get(i);if(s){if(P(n,s.options)&&P(r,s.config))return s;throw Ze.create("duplicate-app",{appName:i})}const o=new H(i);for(const l of Qe.values())o.addComponent(l);const a=new et(n,r,o);return Ke.set(i,a),a}function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;const t=Ke.get(e);if(!t&&e===He&&y())return nt();if(!t)throw Ze.create("no-app",{appName:e});return t}function it(e,t,n){var r;let i=null!==(r=We[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ve.warn(e.join(" "))}Ye(new z("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const st="firebase-heartbeat-store";let ot=null;function at(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=le(o);return r&&o.addEventListener("upgradeneeded",e=>{r(le(o.result),e.oldVersion,e.newVersion,le(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(st)}catch(n){console.warn(n)}}}).catch(e=>{throw Ze.create("idb-open",{originalErrorMessage:e.message})})),ot}async function lt(e,t){try{const n=(await at()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(t,ct(e)),await n.done}catch(n){if(n instanceof A)ve.warn(n.message);else{const e=Ze.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ve.warn(e.message)}}}function ct(e){return"".concat(e.name,"!").concat(e.options.appId)}class ut{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ht(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=dt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ve.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=dt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ft(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ft(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ve.warn(t),""}}}function dt(){return(new Date).toISOString().substring(0,10)}class ht{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!N()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await at()).transaction(st),n=await t.objectStore(st).get(ct(e));return await t.done,n}catch(t){if(t instanceof A)ve.warn(t.message);else{const e=Ze.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ve.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ft(e){return f(JSON.stringify({version:2,heartbeats:e})).length}var pt;pt="",Ye(new z("platform-logger",e=>new pe(e),"PRIVATE")),Ye(new z("heartbeat",e=>new ut(e),"PRIVATE")),it(me,ge,pt),it(me,ge,"esm2017"),it("fire-js","");var mt,gt,vt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},yt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,gt=yt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},mt=yt.Integer=r}).apply("undefined"!==typeof vt?vt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var bt,wt,xt,kt,St,Et,_t,Tt,Ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},It={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ct&&Ct];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(D)}};var D=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,P);var j={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function X(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)X(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;x(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}d(ye,P),d(be,P);var we={},xe=null;function ke(){return xe=xe||new ne}function Se(e){P.call(this,we.La,e)}function Ee(e){const t=ke();re(t,new Se(t))}function _e(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=ke();re(t,new _e(t,e))}function Ce(e,t){P.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Se,P),we.STAT_EVENT="statevent",d(_e,P),we.Ma="timingevent",d(Ce,P),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var De,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},De=new Oe;var Me={},Fe={};function Ve(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Lt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||yn(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),an(n)}pn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&vn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),qe(a)),r.g=o}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=nn(this.g);e="";var s=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==h&&Ge(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),Ke(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Dt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new Dt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Dt?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Pt(this,t),Lt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,Nt)),e.i=new Dt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,At)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,Nt=/[#\?@]/g,At=/#/g;function Dt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Pt(e,t){Rt(e),t=jt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return Rt(e),t=jt(e,t),e.g.has(t)}function Lt(e,t,n){Pt(e,t),0<n.length&&(e.i=null,e.g.set(jt(e,t),h(n)),e.h+=n.length)}function jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ft(){this.g=new fe}function Vt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ut(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Kt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Gt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Dt.prototype).add=function(e,t){Rt(this),this.i=null,e=jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)Ot(this,e)&&(t=t.concat(this.g.get(jt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,Ot(this,e=jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Ut,pe),Ut.prototype.g=function(){return new zt(this.l,this.j)},Ut.prototype.i=(mt={},function(){return mt}),d(zt,ne),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Ht(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Gt,ne);var Qt=/^https?$/i,Xt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Jt(e),Zt(e)}function Jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Qt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Jt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),dn(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}xn(e)}function an(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),I||(C(),I=!0),N.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),dn(e,r),e.m&&e.o&&Kt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function dn(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Vt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),I||(C(),I=!0),N.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Kt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function vn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),mn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new Ce(r,n)),cn(e)}else fn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),dn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Ut({eb:n})):new Gt(e.pa)).Ha(e.J),t}function En(){}function _n(){}function Tn(e,t){ne.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nn(this)}function Cn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){be.call(this),this.status=1}function Nn(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?me(this.o):me(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Yt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Yt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Wt(s)))+"&"+t:this.m&&Kt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||Je(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),pn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},_n.prototype.g=function(e,t){return new Tn(e,t)},d(Tn,ne),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){on(this.g)},Tn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&cn(t)},Tn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Tn.aa.N.call(this)},d(Cn,ye),d(In,be),d(Nn,En),Nn.prototype.ua=function(){re(this.g,"a")},Nn.prototype.ta=function(e){re(this.g,new Cn(e))},Nn.prototype.sa=function(e){re(this.g,new In)},Nn.prototype.ra=function(){re(this.g,"b")},_n.prototype.createWebChannel=_n.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,Tt=It.createWebChannelTransport=function(){return new _n},_t=It.getStatEventTarget=function(){return ke()},Et=It.Event=we,St=It.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,kt=It.ErrorCode=Re,Pe.COMPLETE="complete",xt=It.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,wt=It.WebChannel=ge,It.FetchXmlHttpFactory=Ut,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,bt=It.XhrIo=Gt}).apply("undefined"!==typeof Ct?Ct:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Nt="@firebase/firestore",At="4.8.0";class Dt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");let Rt="11.10.0";const Pt=new J("@firebase/firestore");function Ot(){return Pt.logLevel}function Lt(e){if(Pt.logLevel<=K.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ft);Pt.debug("Firestore (".concat(Rt,"): ").concat(e),...i)}}function jt(e){if(Pt.logLevel<=K.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ft);Pt.error("Firestore (".concat(Rt,"): ").concat(e),...i)}}function Mt(e){if(Pt.logLevel<=K.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ft);Pt.warn("Firestore (".concat(Rt,"): ").concat(e),...i)}}function Ft(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Vt(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ut(e,r,n)}function Ut(e,t,n){let r="FIRESTORE (".concat(Rt,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw jt(r),new Error(r)}function zt(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ut(t,i,r)}function Bt(e,t){return e}const qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ht extends A{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Wt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Kt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Gt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dt.UNAUTHENTICATED))}shutdown(){}}class Qt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xt{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wt,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wt)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zt("string"==typeof t.accessToken,31837,{l:t}),new Kt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zt(null===e||"string"==typeof e,2055,{h:e}),new Dt(e)}}class Yt{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jt{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Yt(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $t{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zt{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$e(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){zt(void 0===this.o,3512);const n=e=>{null!=e.error&&Lt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Lt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $t(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(zt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new $t(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function en(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function tn(){return new TextEncoder}class nn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=en(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function rn(e,t){return e<t?-1:e>t?1:0}function sn(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return rn(r,i);{const s=tn(),o=an(s.encode(on(e,n)),s.encode(on(t,n)));return 0!==o?o:rn(r,i)}}n+=r>65535?2:1}return rn(e.length,t.length)}function on(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function an(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return rn(e[n],t[n]);return rn(e.length,t.length)}function ln(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const cn="__name__";class un{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vt(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Vt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===un.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof un?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=un.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return rn(e.length,t.length)}static compareSegments(e,t){const n=un.isNumericId(e),r=un.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?un.extractNumericId(e).compare(un.extractNumericId(t)):sn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mt.fromString(e.substring(4,e.length-2))}}class dn extends un{construct(e,t,n){return new dn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ht(qt.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new dn(e)}static emptyPath(){return new dn([])}}const hn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends un{construct(e,t,n){return new fn(e,t,n)}static isValidIdentifier(e){return hn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===cn}static keyField(){return new fn([cn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ht(qt.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ht(qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ht(qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ht(qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}class pn{constructor(e){this.path=e}static fromPath(e){return new pn(dn.fromString(e))}static fromName(e){return new pn(dn.fromString(e).popFirst(5))}static empty(){return new pn(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pn(new dn(e.slice()))}}function mn(e,t,n){if(!n)throw new Ht(qt.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gn(e){if(!pn.isDocumentKey(e))throw new Ht(qt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vn(e){if(pn.isDocumentKey(e))throw new Ht(qt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function bn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Vt(12329,{type:typeof e})}function wn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ht(qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bn(e);throw new Ht(qt.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function xn(e,t){const n={typeString:e};return t&&(n.value=t),n}function kn(e,t){if(!yn(e))throw new Ht(qt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Ht(qt.INVALID_ARGUMENT,n);return!0}const Sn=-62135596800,En=1e6;class _n{static now(){return _n.fromMillis(Date.now())}static fromDate(e){return _n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*En);return new _n(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ht(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ht(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sn)throw new Ht(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ht(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/En}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kn(e,_n._jsonSchema))return new _n(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_n._jsonSchemaVersion="firestore/timestamp/1.0",_n._jsonSchema={type:xn("string",_n._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};class Tn{static fromTimestamp(e){return new Tn(e)}static min(){return new Tn(new _n(0,0))}static max(){return new Tn(new _n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Cn=-1;class In{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}In.UNKNOWN_ID=-1;function Nn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tn.fromTimestamp(1e9===r?new _n(n+1,0):new _n(n,r));return new Dn(i,pn.empty(),t)}function An(e){return new Dn(e.readTime,e.key,Cn)}class Dn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dn(Tn.min(),pn.empty(),Cn)}static max(){return new Dn(Tn.max(),pn.empty(),Cn)}}function Rn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pn.comparator(e.documentKey,t.documentKey),0!==n?n:rn(e.largestBatchId,t.largestBatchId))}const Pn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class On{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ln(e){if(e.code!==qt.FAILED_PRECONDITION||e.message!==Pn)throw e;Lt("LocalStore","Unexpectedly lost primary lease")}class jn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new jn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof jn?t:jn.resolve(t)}catch(e){return jn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):jn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):jn.reject(t)}static resolve(e){return new jn((t,n)=>{t(e)})}static reject(e){return new jn((t,n)=>{n(e)})}static waitFor(e){return new jn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=jn.resolve(!1);for(const n of e)t=t.next(e=>e?jn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new jn((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new jn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Mn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fn(e){return"IndexedDbTransactionError"===e.name}class Vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Vn.ue=-1;const Un=-1;function zn(e){return null==e}function Bn(e){return 0===e&&1/e==-1/0}function qn(e){return"number"==typeof e&&Number.isInteger(e)&&!Bn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Hn="\x01";function Wn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Gn(t)),t=Kn(e.get(n),t);return Gn(t)}function Kn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Hn:n+="\x01\x11";break;default:n+=t}}return n}function Gn(e){return e+Hn+"\x01"}const Qn="remoteDocuments",Xn="owner",Yn="mutationQueues",Jn="mutations";const $n="documentMutations",Zn="remoteDocumentsV14",er="remoteDocumentGlobal",tr="targets",nr="targetDocuments",rr="targetGlobal",ir="collectionParents",sr="clientMetadata",or="bundles",ar="namedQueries",lr="indexConfiguration",cr="indexState",ur="indexEntries",dr="documentOverlays",hr="globals",fr=[Yn,Jn,$n,Qn,tr,Xn,rr,nr,sr,er,ir,or,ar],pr=[Yn,Jn,$n,Zn,tr,Xn,rr,nr,sr,er,ir,or,ar,dr],mr=pr,gr=[...mr,lr,cr,ur];function vr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function br(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class wr{constructor(e,t){this.comparator=e,this.root=t||kr.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xr(this.root,e,this.comparator,!1)}getReverseIterator(){return new xr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xr(this.root,e,this.comparator,!0)}}class xr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:kr.RED,this.left=null!=r?r:kr.EMPTY,this.right=null!=i?i:kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new kr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return kr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1,kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sr{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Er(this.data.getIterator())}getIteratorFrom(e){return new Er(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Sr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sr(this.comparator);return t.data=e,t}}class Er{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _r{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new _r([])}unionWith(e){let t=new Sr(fn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ln(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Tr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Tr("Invalid base64 string: "+e):e}}(e);return new Cr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const Ir=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(e){if(zt(!!e,39018),"string"==typeof e){let t=0;const n=Ir.exec(e);if(zt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ar(e.seconds),nanos:Ar(e.nanos)}}function Ar(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Dr(e){return"string"==typeof e?Cr.fromBase64String(e):Cr.fromUint8Array(e)}const Rr="server_timestamp",Pr="__type__",Or="__previous_value__",Lr="__local_write_time__";function jr(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Pr])||void 0===n?void 0:n.stringValue)===Rr}function Mr(e){const t=e.mapValue.fields[Or];return jr(t)?Mr(t):t}function Fr(e){const t=Nr(e.mapValue.fields[Lr].timestampValue);return new _n(t.seconds,t.nanos)}class Vr{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ur="(default)";class zr{constructor(e,t){this.projectId=e,this.database=t||Ur}static empty(){return new zr("","")}get isDefaultDatabase(){return this.database===Ur}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}const Br="__type__",qr="__max__",Hr={mapValue:{fields:{__type__:{stringValue:qr}}}},Wr="__vector__",Kr="value";function Gr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jr(e)?4:ui(e)?9007199254740991:li(e)?10:11:Vt(28295,{value:e})}function Qr(e,t){if(e===t)return!0;const n=Gr(e);if(n!==Gr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fr(e).isEqual(Fr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nr(e.timestampValue),r=Nr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Dr(e.bytesValue).isEqual(Dr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ar(e.geoPointValue.latitude)===Ar(t.geoPointValue.latitude)&&Ar(e.geoPointValue.longitude)===Ar(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ar(e.integerValue)===Ar(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ar(e.doubleValue),r=Ar(t.doubleValue);return n===r?Bn(n)===Bn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ln(e.arrayValue.values||[],t.arrayValue.values||[],Qr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vr(n)!==vr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qr(n[i],r[i])))return!1;return!0}(e,t);default:return Vt(52216,{left:e})}}function Xr(e,t){return void 0!==(e.values||[]).find(e=>Qr(e,t))}function Yr(e,t){if(e===t)return 0;const n=Gr(e),r=Gr(t);if(n!==r)return rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ar(e.integerValue||e.doubleValue),r=Ar(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jr(e.timestampValue,t.timestampValue);case 4:return Jr(Fr(e),Fr(t));case 5:return sn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Dr(e),r=Dr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=rn(n[i],r[i]);if(0!==e)return e}return rn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rn(Ar(e.latitude),Ar(t.latitude));return 0!==n?n:rn(Ar(e.longitude),Ar(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return $r(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Kr])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Kr])||void 0===r?void 0:r.arrayValue,u=rn((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:$r(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Hr.mapValue&&t===Hr.mapValue)return 0;if(e===Hr.mapValue)return 1;if(t===Hr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=sn(r[o],s[o]);if(0!==e)return e;const t=Yr(n[r[o]],i[s[o]]);if(0!==t)return t}return rn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Vt(23264,{le:n})}}function Jr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rn(e,t);const n=Nr(e),r=Nr(t),i=rn(n.seconds,r.seconds);return 0!==i?i:rn(n.nanos,r.nanos)}function $r(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Yr(n[i],r[i]);if(e)return e}return rn(n.length,r.length)}function Zr(e){return ei(e)}function ei(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Dr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ei(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ei(e.fields[i]));return n+"}"}(e.mapValue):Vt(61005,{value:e})}function ti(e){switch(Gr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Mr(e);return t?16+ti(t):16;case 5:return 2*e.stringValue.length;case 6:return Dr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ti(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return yr(e.fields,(e,n)=>{t+=e.length+ti(n)}),t}(e.mapValue);default:throw Vt(13486,{value:e})}}function ni(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ri(e){return!!e&&"integerValue"in e}function ii(e){return!!e&&"arrayValue"in e}function si(e){return!!e&&"nullValue"in e}function oi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ai(e){return!!e&&"mapValue"in e}function li(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Br])||void 0===n?void 0:n.stringValue)===Wr}function ci(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return yr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ci(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ci(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ui(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===qr}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ai(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ci(t)}setAll(e){let t=fn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ci(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ai(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ai(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){yr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new di(ci(this.value))}}function hi(e){const t=[];return yr(e.fields,(e,n)=>{const r=new fn([e]);if(ai(n)){const e=hi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new _r(t)}class fi{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new fi(e,0,Tn.min(),Tn.min(),Tn.min(),di.empty(),0)}static newFoundDocument(e,t,n,r){return new fi(e,1,t,Tn.min(),n,r,0)}static newNoDocument(e,t){return new fi(e,2,t,Tn.min(),Tn.min(),di.empty(),0)}static newUnknownDocument(e,t){return new fi(e,3,t,Tn.min(),Tn.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class pi{constructor(e,t){this.position=e,this.inclusive=t}}function mi(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?pn.comparator(pn.fromName(o.referenceValue),n.key):Yr(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qr(e.position[n],t.position[n]))return!1;return!0}class vi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function yi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class bi{}class wi extends bi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ii(e,t,n):"array-contains"===t?new Ri(e,n):"in"===t?new Pi(e,n):"not-in"===t?new Oi(e,n):"array-contains-any"===t?new Li(e,n):new wi(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ni(e,n):new Ai(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Yr(t,this.value)):null!==t&&Gr(this.value)===Gr(t)&&this.matchesComparison(Yr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xi extends bi{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new xi(e,t)}matches(e){return ki(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ki(e){return"and"===e.op}function Si(e){return Ei(e)&&ki(e)}function Ei(e){for(const t of e.filters)if(t instanceof xi)return!1;return!0}function _i(e){if(e instanceof wi)return e.field.canonicalString()+e.op.toString()+Zr(e.value);if(Si(e))return e.filters.map(e=>_i(e)).join(",");{const t=e.filters.map(e=>_i(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ti(e,t){return e instanceof wi?function(e,t){return t instanceof wi&&e.op===t.op&&e.field.isEqual(t.field)&&Qr(e.value,t.value)}(e,t):e instanceof xi?function(e,t){return t instanceof xi&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ti(n,t.filters[r]),!0)}(e,t):void Vt(19439)}function Ci(e){return e instanceof wi?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zr(e.value))}(e):e instanceof xi?function(e){return e.op.toString()+" {"+e.getFilters().map(Ci).join(" ,")+"}"}(e):"Filter"}class Ii extends wi{constructor(e,t,n){super(e,t,n),this.key=pn.fromName(n.referenceValue)}matches(e){const t=pn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ni extends wi{constructor(e,t){super(e,"in",t),this.keys=Di("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ai extends wi{constructor(e,t){super(e,"not-in",t),this.keys=Di("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Di(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pn.fromName(e.referenceValue))}class Ri extends wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ii(t)&&Xr(t.arrayValue,this.value)}}class Pi extends wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xr(this.value.arrayValue,t)}}class Oi extends wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Xr(this.value.arrayValue,t)}}class Li extends wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ii(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Xr(this.value.arrayValue,e))}}class ji{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Pe=null}}function Mi(e){return new ji(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Fi(e){const t=Bt(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>_i(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),zn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Zr(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Zr(e)).join(",")),t.Pe=e}return t.Pe}function Vi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ti(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gi(e.startAt,t.startAt)&&gi(e.endAt,t.endAt)}function Ui(e){return pn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Bi(e,t,n,r,i,s,o,a){return new zi(e,t,n,r,i,s,o,a)}function qi(e){return new zi(e)}function Hi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wi(e){return null!==e.collectionGroup}function Ki(e){const t=Bt(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Sr(fn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new vi(r,n))}),e.has(fn.keyField().canonicalString())||t.Te.push(new vi(fn.keyField(),n))}return t.Te}function Gi(e){const t=Bt(e);return t.Ie||(t.Ie=Qi(t,Ki(e))),t.Ie}function Qi(e,t){if("F"===e.limitType)return Mi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new vi(e.field,t)});const n=e.endAt?new pi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pi(e.startAt.position,e.startAt.inclusive):null;return Mi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Xi(e,t){const n=e.filters.concat([t]);return new zi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yi(e,t,n){return new zi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ji(e,t){return Vi(Gi(e),Gi(t))&&e.limitType===t.limitType}function $i(e){return"".concat(Fi(Gi(e)),"|lt:").concat(e.limitType)}function Zi(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ci(e)).join(", "),"]")),zn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Zr(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Zr(e)).join(",")),"Target(".concat(t,")")}(Gi(e)),"; limitType=").concat(e.limitType,")")}function es(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ki(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=mi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ki(e),t))&&!(e.endAt&&!function(e,t,n){const r=mi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ki(e),t))}(e,t)}function ts(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ns(e){return(t,n)=>{let r=!1;for(const i of Ki(e)){const e=rs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function rs(e,t,n){const r=e.field.isKeyField()?pn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yr(r,i):Vt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Vt(19790,{direction:e.dir})}}class is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return br(this.inner)}size(){return this.innerSize}}const ss=new wr(pn.comparator);function os(){return ss}const as=new wr(pn.comparator);function ls(){let e=as;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function cs(e){let t=as;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function us(){return hs()}function ds(){return hs()}function hs(){return new is(e=>e.toString(),(e,t)=>e.isEqual(t))}const fs=new wr(pn.comparator),ps=new Sr(pn.comparator);function ms(){let e=ps;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const gs=new Sr(rn);function vs(){return gs}function ys(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bn(t)?"-0":t}}function bs(e){return{integerValue:""+e}}function ws(e,t){return qn(t)?bs(t):ys(e,t)}class xs{constructor(){this._=void 0}}function ks(e,t,n){return e instanceof _s?function(e,t){const n={fields:{[Pr]:{stringValue:Rr},[Lr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jr(t)&&(t=Mr(t)),t&&(n.fields[Or]=t),{mapValue:n}}(n,t):e instanceof Ts?Cs(e,t):e instanceof Is?Ns(e,t):function(e,t){const n=Es(e,t),r=Ds(n)+Ds(e.Ee);return ri(n)&&ri(e.Ee)?bs(r):ys(e.serializer,r)}(e,t)}function Ss(e,t,n){return e instanceof Ts?Cs(e,t):e instanceof Is?Ns(e,t):n}function Es(e,t){return e instanceof As?function(e){return ri(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class _s extends xs{}class Ts extends xs{constructor(e){super(),this.elements=e}}function Cs(e,t){const n=Rs(t);for(const r of e.elements)n.some(e=>Qr(e,r))||n.push(r);return{arrayValue:{values:n}}}class Is extends xs{constructor(e){super(),this.elements=e}}function Ns(e,t){let n=Rs(t);for(const r of e.elements)n=n.filter(e=>!Qr(e,r));return{arrayValue:{values:n}}}class As extends xs{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Ds(e){return Ar(e.integerValue||e.doubleValue)}function Rs(e){return ii(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ps{constructor(e,t){this.version=e,this.transformResults=t}}class Os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ls(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class js{}function Ms(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gs(e.key,Os.none()):new Bs(e.key,e.data,Os.none());{const n=e.data,r=di.empty();let i=new Sr(fn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new qs(e.key,r,new _r(i.toArray()),Os.none())}}function Fs(e,t,n){e instanceof Bs?function(e,t,n){const r=e.value.clone(),i=Ws(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qs?function(e,t,n){if(!Ls(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ws(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vs(e,t,n,r){return e instanceof Bs?function(e,t,n,r){if(!Ls(e.precondition,t))return n;const i=e.value.clone(),s=Ks(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof qs?function(e,t,n,r){if(!Ls(e.precondition,t))return n;const i=Ks(e.fieldTransforms,r,t),s=t.data;return s.setAll(Hs(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ls(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Us(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Es(r.transform,e||null);null!=i&&(null===n&&(n=di.empty()),n.set(r.field,i))}return n||null}function zs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ln(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ts&&t instanceof Ts||e instanceof Is&&t instanceof Is?ln(e.elements,t.elements,Qr):e instanceof As&&t instanceof As?Qr(e.Ee,t.Ee):e instanceof _s&&t instanceof _s}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bs extends js{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qs extends js{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hs(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ws(e,t,n){const r=new Map;zt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ss(o,a,n[i]))}return r}function Ks(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ks(e,s,t))}return r}class Gs extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qs extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xs{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Fs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vs(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vs(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ds();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ms(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Tn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ms())}isEqual(e){return this.batchId===e.batchId&&ln(this.mutations,e.mutations,(e,t)=>zs(e,t))&&ln(this.baseMutations,e.baseMutations,(e,t)=>zs(e,t))}}class Ys{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){zt(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=fs;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ys(e,t,n,r)}}class Js{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class $s{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zs,eo;function to(e){switch(e){case qt.OK:return Vt(64938);case qt.CANCELLED:case qt.UNKNOWN:case qt.DEADLINE_EXCEEDED:case qt.RESOURCE_EXHAUSTED:case qt.INTERNAL:case qt.UNAVAILABLE:case qt.UNAUTHENTICATED:return!1;case qt.INVALID_ARGUMENT:case qt.NOT_FOUND:case qt.ALREADY_EXISTS:case qt.PERMISSION_DENIED:case qt.FAILED_PRECONDITION:case qt.ABORTED:case qt.OUT_OF_RANGE:case qt.UNIMPLEMENTED:case qt.DATA_LOSS:return!0;default:return Vt(15467,{code:e})}}function no(e){if(void 0===e)return jt("GRPC error has no .code"),qt.UNKNOWN;switch(e){case Zs.OK:return qt.OK;case Zs.CANCELLED:return qt.CANCELLED;case Zs.UNKNOWN:return qt.UNKNOWN;case Zs.DEADLINE_EXCEEDED:return qt.DEADLINE_EXCEEDED;case Zs.RESOURCE_EXHAUSTED:return qt.RESOURCE_EXHAUSTED;case Zs.INTERNAL:return qt.INTERNAL;case Zs.UNAVAILABLE:return qt.UNAVAILABLE;case Zs.UNAUTHENTICATED:return qt.UNAUTHENTICATED;case Zs.INVALID_ARGUMENT:return qt.INVALID_ARGUMENT;case Zs.NOT_FOUND:return qt.NOT_FOUND;case Zs.ALREADY_EXISTS:return qt.ALREADY_EXISTS;case Zs.PERMISSION_DENIED:return qt.PERMISSION_DENIED;case Zs.FAILED_PRECONDITION:return qt.FAILED_PRECONDITION;case Zs.ABORTED:return qt.ABORTED;case Zs.OUT_OF_RANGE:return qt.OUT_OF_RANGE;case Zs.UNIMPLEMENTED:return qt.UNIMPLEMENTED;case Zs.DATA_LOSS:return qt.DATA_LOSS;default:return Vt(39323,{code:e})}}(eo=Zs||(Zs={}))[eo.OK=0]="OK",eo[eo.CANCELLED=1]="CANCELLED",eo[eo.UNKNOWN=2]="UNKNOWN",eo[eo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eo[eo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eo[eo.NOT_FOUND=5]="NOT_FOUND",eo[eo.ALREADY_EXISTS=6]="ALREADY_EXISTS",eo[eo.PERMISSION_DENIED=7]="PERMISSION_DENIED",eo[eo.UNAUTHENTICATED=16]="UNAUTHENTICATED",eo[eo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eo[eo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eo[eo.ABORTED=10]="ABORTED",eo[eo.OUT_OF_RANGE=11]="OUT_OF_RANGE",eo[eo.UNIMPLEMENTED=12]="UNIMPLEMENTED",eo[eo.INTERNAL=13]="INTERNAL",eo[eo.UNAVAILABLE=14]="UNAVAILABLE",eo[eo.DATA_LOSS=15]="DATA_LOSS";let ro=null;const io=new mt([4294967295,4294967295],0);function so(e){const t=tn().encode(e),n=new gt;return n.update(t),new Uint8Array(n.digest())}function oo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new mt([n,r],0),new mt([i,s],0)]}class ao{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new lo("Invalid padding: ".concat(t));if(n<0)throw new lo("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new lo("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new lo("Invalid padding when bitmap length is 0: ".concat(t));this.fe=8*e.length-t,this.ge=mt.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(mt.fromNumber(n)));return 1===r.compare(io)&&(r=new mt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=so(e),[n,r]=oo(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ao(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.fe)return;const t=so(e),[n,r]=oo(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class co{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,uo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new co(Tn.min(),r,new wr(rn),os(),ms())}}class uo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new uo(n,t,ms(),ms(),ms())}}class ho{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class fo{constructor(e,t){this.targetId=e,this.De=t}}class po{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class mo{constructor(){this.ve=0,this.Ce=yo(),this.Fe=Cr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ms(),t=ms(),n=ms();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Vt(38017,{changeType:i})}}),new uo(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=yo()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,zt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class go{constructor(e){this.We=e,this.Ge=new Map,this.ze=os(),this.je=vo(),this.Je=vo(),this.He=new wr(rn)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:Vt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const i=r.target;if(Ui(i))if(0===n){const e=new pn(i.path);this.Xe(t,e,fi.newNoDocument(e,Tn.min()))}else zt(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),i=n?this.ut(n,e,r):1;if(0!==i){this.rt(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==ro||ro.ct(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,i))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Dr(n).toUint8Array()}catch(e){if(e instanceof Tr)return Mt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ao(s,r,i)}catch(e){return Mt(e instanceof lo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.fe?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.We.lt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const i=this.st(r);if(i){if(n.current&&Ui(i.target)){const t=new pn(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,fi.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=ms();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new co(e,t,this.He,this.ze,n);return this.ze=os(),this.je=vo(),this.Je=vo(),this.He=new wr(rn),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new mo,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Sr(rn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Sr(rn),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||Lt("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mo),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function vo(){return new wr(pn.comparator)}function yo(){return new wr(pn.comparator)}const bo={asc:"ASCENDING",desc:"DESCENDING"},wo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xo={and:"AND",or:"OR"};class ko{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function So(e,t){return e.useProto3Json||zn(t)?t:{value:t}}function Eo(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function _o(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function To(e,t){return Eo(e,t.toTimestamp())}function Co(e){return zt(!!e,49232),Tn.fromTimestamp(function(e){const t=Nr(e);return new _n(t.seconds,t.nanos)}(e))}function Io(e,t){return No(e,t).canonicalString()}function No(e,t){const n=function(e){return new dn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ao(e){const t=dn.fromString(e);return zt(Yo(t),10190,{key:t.toString()}),t}function Do(e,t){return Io(e.databaseId,t.path)}function Ro(e,t){const n=Ao(t);if(n.get(1)!==e.databaseId.projectId)throw new Ht(qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ht(qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pn(jo(n))}function Po(e,t){return Io(e.databaseId,t)}function Oo(e){const t=Ao(e);return 4===t.length?dn.emptyPath():jo(t)}function Lo(e){return new dn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jo(e){return zt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Mo(e,t,n){return{name:Do(e,t),fields:n.value.mapValue.fields}}function Fo(e,t){let n;if(t instanceof Bs)n={update:Mo(e,t.key,t.value)};else if(t instanceof Gs)n={delete:Do(e,t.key)};else if(t instanceof qs)n={update:Mo(e,t.key,t.data),updateMask:Xo(t.fieldMask)};else{if(!(t instanceof Qs))return Vt(16599,{Rt:t.type});n={verify:Do(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof _s)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ts)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Is)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof As)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Vt(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:To(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Vt(27497)}(e,t.precondition)),n}function Vo(e,t){return{documents:[Po(e,t.path)]}}function Uo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Po(e,i);const s=function(e){if(0!==e.length)return Qo(xi.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ko(e.field),direction:qo(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=So(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function zo(e){let t=Oo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zt(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Bo(e);return t instanceof xi&&Si(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new vi(Go(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,zn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new pi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new pi(n,t)}(n.endAt)),Bi(t,i,o,s,a,"F",l,c)}function Bo(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Go(e.unaryFilter.field);return wi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Go(e.unaryFilter.field);return wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Go(e.unaryFilter.field);return wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Go(e.unaryFilter.field);return wi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}}(e):void 0!==e.fieldFilter?function(e){return wi.create(Go(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xi.create(e.compositeFilter.filters.map(e=>Bo(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}}(e.compositeFilter.op))}(e):Vt(30097,{filter:e})}function qo(e){return bo[e]}function Ho(e){return wo[e]}function Wo(e){return xo[e]}function Ko(e){return{fieldPath:e.canonicalString()}}function Go(e){return fn.fromServerFormat(e.fieldPath)}function Qo(e){return e instanceof wi?function(e){if("=="===e.op){if(oi(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NAN"}};if(si(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oi(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NOT_NAN"}};if(si(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(e.field),op:Ho(e.op),value:e.value}}}(e):e instanceof xi?function(e){const t=e.getFilters().map(e=>Qo(e));return 1===t.length?t[0]:{compositeFilter:{op:Wo(e.op),filters:t}}}(e):Vt(54877,{filter:e})}function Xo(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Yo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Jo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tn.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Cr.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $o{constructor(e){this.gt=e}}function Zo(e){const t=zo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yi(t,t.limit,"L"):t}class ea{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ar(e.integerValue));else if("doubleValue"in e){const n=Ar(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Bn(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=Nr(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Dr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?ui(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):li(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Vt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const i=e.fields||{};this.Ct(t,53);const s=Kr,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(Ar(o)),this.xt(s,t),this.Dt(i[s],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),pn.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}ea.Ut=new ea;class ta{constructor(){this.Dn=new na}addToCollectionParentIndex(e,t){return this.Dn.add(t),jn.resolve()}getCollectionParents(e,t){return jn.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return jn.resolve()}deleteFieldIndex(e,t){return jn.resolve()}deleteAllFieldIndexes(e){return jn.resolve()}createTargetIndexes(e,t){return jn.resolve()}getDocumentsMatchingTarget(e,t){return jn.resolve(null)}getIndexType(e,t){return jn.resolve(0)}getFieldIndexes(e,t){return jn.resolve([])}getNextCollectionGroupToUpdate(e){return jn.resolve(null)}getMinOffset(e,t){return jn.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,t){return jn.resolve(Dn.min())}updateCollectionGroup(e,t,n){return jn.resolve()}updateIndexEntries(e,t){return jn.resolve()}}class na{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sr(dn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Sr(dn.comparator)).toArray()}}new Uint8Array(0);const ra={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ia=41943040;class sa{static withCacheSize(e){return new sa(e,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}sa.DEFAULT_COLLECTION_PERCENTILE=10,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sa.DEFAULT=new sa(ia,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sa.DISABLED=new sa(-1,0,0);class oa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new oa(0)}static ur(){return new oa(-1)}}const aa="LruGarbageCollector",la=1048576;function ca(e,t){let[n,r]=e,[i,s]=t;const o=rn(n,i);return 0===o?rn(r,s):o}class ua{constructor(e){this.Tr=e,this.buffer=new Sr(ca),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ca(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class da{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){Lt(aa,"Garbage collection scheduled in ".concat(e,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fn(e)?Lt(aa,"Ignoring IndexedDB error during garbage collection: ",e):await Ln(e)}await this.Rr(3e5)})}}class ha{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return jn.resolve(Vn.ue);const n=new ua(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),jn.resolve(ra)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ra):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ot()<=K.DEBUG&&Lt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),jn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function fa(e,t){return new ha(e,t)}class pa{constructor(){this.changes=new is(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?jn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ma{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ga{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vs(n.mutation,e,_r.empty(),_n.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ms()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ms();const r=us();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ls();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=us();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ms()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=os();const s=hs(),o=hs();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof qs)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Vs(o.mutation,t,o.mutation.getFieldMask(),_n.now())):s.set(t.key,_r.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new ma(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=hs();let r=new wr((e,t)=>e-t),i=ms();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||_r.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ms()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=ds();l.forEach(e=>{if(!i.has(e)){const r=Ms(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return jn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return pn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):jn.resolve(us());let o=Cn,a=i;return s.next(t=>jn.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?jn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ms())).next(e=>({batchId:o,changes:cs(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pn(t)).next(e=>{let t=ls();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ls();return this.indexManager.getCollectionParents(e,i).next(o=>jn.forEach(o,o=>{const a=function(e,t){return new zi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,fi.newInvalidDocument(r)))});let n=ls();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Vs(s.mutation,r,_r.empty(),_n.now()),es(t,r)&&(n=n.insert(e,r))}),n})}}class va{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return jn.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Co(e.createTime)}}(t)),jn.resolve()}getNamedQuery(e,t){return jn.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Zo(e.bundledQuery),readTime:Co(e.readTime)}}(t)),jn.resolve()}}class ya{constructor(){this.overlays=new wr(pn.comparator),this.kr=new Map}getOverlay(e,t){return jn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=us();return jn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),jn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),jn.resolve()}getOverlaysForCollection(e,t,n){const r=us(),i=t.length+1,s=new pn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return jn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new wr((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=us(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=us(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return jn.resolve(o)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Js(t,n));let i=this.kr.get(t);void 0===i&&(i=ms(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}class ba{constructor(){this.sessionToken=Cr.EMPTY_BYTE_STRING}getSessionToken(e){return jn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,jn.resolve()}}class wa{constructor(){this.qr=new Sr(xa.Qr),this.$r=new Sr(xa.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new xa(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new xa(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new pn(new dn([])),n=new xa(t,e),r=new xa(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new pn(new dn([])),n=new xa(t,e),r=new xa(t,e+1);let i=ms();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new xa(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xa{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pn.comparator(e.key,t.key)||rn(e.Hr,t.Hr)}static Ur(e,t){return rn(e.Hr,t.Hr)||pn.comparator(e.key,t.key)}}class ka{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Sr(xa.Qr)}checkEmpty(e){return jn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Xs(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Yr=this.Yr.add(new xa(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return jn.resolve(s)}lookupMutationBatch(e,t){return jn.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return jn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return jn.resolve(0===this.mutationQueue.length?Un:this.er-1)}getAllMutationBatches(e){return jn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xa(t,0),r=new xa(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),jn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sr(rn);return t.forEach(e=>{const t=new xa(e,0),r=new xa(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),jn.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pn.isDocumentKey(i)||(i=i.child(""));const s=new xa(new pn(i),0);let o=new Sr(rn);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},s),jn.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){zt(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return jn.forEach(t.mutations,r=>{const i=new xa(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new xa(t,0),r=this.Yr.firstAfterOrEqual(n);return jn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,jn.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sa{constructor(e){this.ni=e,this.docs=new wr(pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return jn.resolve(n?n.document.mutableCopy():fi.newInvalidDocument(t))}getEntries(e,t){let n=os();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fi.newInvalidDocument(e))}),jn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=os();const s=t.path,o=new pn(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Rn(An(o),n)<=0||(r.has(o.key)||es(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return jn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Vt(9500)}ri(e,t){return jn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ea(this)}getSize(e){return jn.resolve(this.size)}}class Ea extends pa{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),jn.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class _a{constructor(e){this.persistence=e,this.ii=new is(e=>Fi(e),Vi),this.lastRemoteSnapshotVersion=Tn.min(),this.highestTargetId=0,this.si=0,this.oi=new wa,this.targetCount=0,this._i=oa.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),jn.resolve()}getLastRemoteSnapshotVersion(e){return jn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return jn.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),jn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),jn.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new oa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,jn.resolve()}updateTargetData(e,t){return this.hr(t),jn.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,jn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),jn.waitFor(i).next(()=>r)}getTargetCount(e){return jn.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return jn.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),jn.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),jn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),jn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return jn.resolve(n)}containsKey(e,t){return jn.resolve(this.oi.containsKey(t))}}class Ta{constructor(e,t){this.ai={},this.overlays={},this.ui=new Vn(0),this.ci=!1,this.ci=!0,this.li=new ba,this.referenceDelegate=e(this),this.hi=new _a(this),this.indexManager=new ta,this.remoteDocumentCache=function(e){return new Sa(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new $o(t),this.Ti=new va(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ya,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new ka(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){Lt("MemoryPersistence","Starting transaction:",e);const r=new Ca(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return jn.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class Ca extends On{constructor(e){super(),this.currentSequenceNumber=e}}class Ia{constructor(e){this.persistence=e,this.Ai=new wa,this.Ri=null}static Vi(e){return new Ia(e)}get mi(){if(this.Ri)return this.Ri;throw Vt(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),jn.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),jn.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),jn.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jn.forEach(this.mi,n=>{const r=pn.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,Tn.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return jn.or([()=>jn.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Na{constructor(e,t){this.persistence=e,this.gi=new is(e=>Wn(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=fa(this,t)}static Vi(e,t){return new Na(e,t)}Ii(){}di(e){return jn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return jn.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?jn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Tn.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),jn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),jn.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),jn.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),jn.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ti(e.data.value)),t}Sr(e,t,n){return jn.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return jn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Aa{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=ms(),r=ms();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Aa(e,t.fromCache,n,r)}}class Da{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ra{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=I()?8:Mn(T())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Da;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(Ot()<=K.DEBUG&&Lt("QueryEngine","SDK will not create cache indexes for query:",Zi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),jn.resolve()):(Ot()<=K.DEBUG&&Lt("QueryEngine","Query:",Zi(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(Ot()<=K.DEBUG&&Lt("QueryEngine","The SDK decides to create cache indexes for query:",Zi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):jn.resolve())}ps(e,t){if(Hi(t))return jn.resolve(null);let n=Gi(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Yi(t,null,"F"),n=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ms(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ds(t,s,i,n.readTime)?this.ps(e,Yi(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,r){return Hi(t)||r.isEqual(Tn.min())?jn.resolve(null):this.gs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ds(t,s,n,r)?jn.resolve(null):(Ot()<=K.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zi(t)),this.vs(e,s,t,Nn(r,Cn)).next(e=>e))})}bs(e,t){let n=new Sr(ns(e));return t.forEach((t,r)=>{es(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return Ot()<=K.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",Zi(t)),this.gs.getDocumentsMatchingQuery(e,t,Dn.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Pa="LocalStore";class Oa{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new wr(rn),this.Ms=new is(e=>Fi(e),Vi),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ga(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function La(e,t,n,r){return new Oa(e,t,n,r)}async function ja(e,t){const n=Bt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=ms();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ma(e){const t=Bt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Fa(e,t,n){let r=ms(),i=ms();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=os();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Tn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Lt(Pa,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ls:r,ks:i}})}function Va(e,t){const n=Bt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Un),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ua(e,t){const n=Bt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(i=>i?(r=i,jn.resolve(r)):n.hi.allocateTargetId(e).next(i=>(r=new Jo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function za(e,t,n){const r=Bt(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Fn(e))throw e;Lt(Pa,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Ba(e,t,n){const r=Bt(e);let i=Tn.min(),s=ms();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Bt(e),i=r.Ms.get(n);return void 0!==i?jn.resolve(r.Fs.get(i)):r.hi.getTargetData(t,n)}(r,e,Gi(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:Tn.min(),n?s:ms())).next(e=>(qa(r,ts(t),e),{documents:e,qs:s})))}function qa(e,t,n){let r=e.xs.get(t)||Tn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class Ha{constructor(){this.activeTargetIds=vs()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wa{constructor(){this.Fo=new Ha,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ha,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ka{xo(e){}shutdown(){}}const Ga="ConnectivityMonitor";class Qa{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Lt(Ga,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Lt(Ga,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xa=null;function Ya(){return null===Xa?Xa=268435456+Math.round(2147483648*Math.random()):Xa++,"0x"+Xa.toString(16)}const Ja="RestConnection",$a={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Za{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===Ur?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const s=Ya(),o=this.Go(e,t.toUriEncodedString());Lt(Ja,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,i);const{host:l}=new URL(o),c=x(l);return this.jo(e,o,a,n,c).then(t=>(Lt(Ja,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Mt(Ja,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=$a[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class el{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const tl="WebChannelConnection";class nl extends Za{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const s=Ya();return new Promise((i,o)=>{const a=new bt;a.setWithCredentials(!0),a.listenOnce(xt.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case kt.NO_ERROR:const t=a.getResponseJson();Lt(tl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case kt.TIMEOUT:Lt(tl,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Ht(qt.DEADLINE_EXCEEDED,"Request time out"));break;case kt.HTTP_ERROR:const n=a.getStatus();if(Lt(tl,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qt).indexOf(t)>=0?t:qt.UNKNOWN}(t.status);o(new Ht(e,t.message))}else o(new Ht(qt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ht(qt.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{c_:e,streamId:s,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{Lt(tl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Lt(tl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Ya(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Tt(),o=_t(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Lt(tl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.T_(u);let d=!1,h=!1;const f=new el({Ho:t=>{h?Lt(tl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Lt(tl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Lt(tl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,wt.EventType.OPEN,()=>{h||(Lt(tl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.s_())}),p(u,wt.EventType.CLOSE,()=>{h||(h=!0,Lt(tl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.__(),this.I_(u))}),p(u,wt.EventType.ERROR,t=>{h||(h=!0,Mt(tl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.__(new Ht(qt.UNAVAILABLE,"The operation could not be completed")))}),p(u,wt.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];zt(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Lt(tl,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Zs[e];if(void 0!==t)return no(t)}(t),i=o.message;void 0===n&&(n=qt.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.__(new Ht(n,i)),u.close()}else Lt(tl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.a_(i)}}),p(o,Et.STAT_EVENT,t=>{t.stat===St.PROXY?Lt(tl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===St.NOPROXY&&Lt(tl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function rl(){return"undefined"!=typeof document?document:null}function il(e){return new ko(e,!0)}class sl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&Lt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const ol="PersistentStream";class al{constructor(e,t,n,r,i,s,o,a){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sl(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===qt.RESOURCE_EXHAUSTED?(jt(t.toString()),jt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===qt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new Ht(qt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Lt(ol,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Lt(ol,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ll extends al{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Vt(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(zt(void 0===t||"string"==typeof t,58123),Cr.fromBase64String(t||"")):(zt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Cr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?qt.UNKNOWN:no(e.code);return new Ht(t,e.message||"")}(o);n=new po(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ro(e,r.document.name),s=Co(r.document.updateTime),o=r.document.createTime?Co(r.document.createTime):Tn.min(),a=new di({mapValue:{fields:r.document.fields}}),l=fi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ho(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ro(e,r.document),s=r.readTime?Co(r.readTime):Tn.min(),o=fi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ho([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ro(e,r.document),s=r.removedTargetIds||[];n=new ho([],s,i,null)}else{if(!("filter"in t))return Vt(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new $s(r,i),o=e.targetId;n=new fo(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Tn.min():t.readTime?Co(t.readTime):Tn.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=Lo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ui(r)?{documents:Vo(e,r)}:{query:Uo(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_o(e,t.resumeToken);const r=So(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Tn.min())>0){n.readTime=Eo(e,t.snapshotVersion.toTimestamp());const r=So(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=Lo(this.serializer),t.removeTarget=e,this.k_(t)}}class cl extends al{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(zt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Co(e.updateTime):Co(t);return n.isEqual(Tn.min())&&(n=Co(t)),new Ps(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Co(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Lo(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Fo(this.serializer,e))};this.k_(t)}}class ul{}class dl extends ul{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ht(qt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Wo(e,No(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ht(qt.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Jo(e,No(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ht(qt.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class hl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(jt(t),this._a=!1):Lt("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const fl="RemoteStore";class pl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{Sl(this)&&(Lt(fl,"Restarting streams for network reachability change."),await async function(e){const t=Bt(e);t.Ia.add(4),await gl(t),t.Aa.set("Unknown"),t.Ia.delete(4),await ml(t)}(this))})}),this.Aa=new hl(n,r)}}async function ml(e){if(Sl(e))for(const t of e.da)await t(!0)}async function gl(e){for(const t of e.da)await t(!1)}function vl(e,t){const n=Bt(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),kl(n)?xl(n):Bl(n).x_()&&bl(n,t))}function yl(e,t){const n=Bt(e),r=Bl(n);n.Ta.delete(t),r.x_()&&wl(n,t),0===n.Ta.size&&(r.x_()?r.B_():Sl(n)&&n.Aa.set("Unknown"))}function bl(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bl(e).H_(t)}function wl(e,t){e.Ra.$e(t),Bl(e).Y_(t)}function xl(e){e.Ra=new go({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Bl(e).start(),e.Aa.aa()}function kl(e){return Sl(e)&&!Bl(e).M_()&&e.Ta.size>0}function Sl(e){return 0===Bt(e).Ia.size}function El(e){e.Ra=void 0}async function _l(e){e.Aa.set("Online")}async function Tl(e){e.Ta.forEach((t,n)=>{bl(e,t)})}async function Cl(e,t){El(e),kl(e)?(e.Aa.la(t),xl(e)):e.Aa.set("Unknown")}async function Il(e,t,n){if(e.Aa.set("Online"),t instanceof po&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){Lt(fl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Nl(e,n)}else if(t instanceof ho?e.Ra.Ye(t):t instanceof fo?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Tn.min()))try{const t=await Ma(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Cr.EMPTY_BYTE_STRING,r.snapshotVersion)),wl(e,t);const i=new Jo(r.target,t,n,r.sequenceNumber);bl(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Lt(fl,"Failed to raise snapshot:",t),await Nl(e,t)}}async function Nl(e,t,n){if(!Fn(t))throw t;e.Ia.add(1),await gl(e),e.Aa.set("Offline"),n||(n=()=>Ma(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Lt(fl,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await ml(e)})}function Al(e,t){return t().catch(n=>Nl(e,n,t))}async function Dl(e){const t=Bt(e),n=ql(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Un;for(;Rl(t);)try{const e=await Va(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,Pl(t,e)}catch(e){await Nl(t,e)}Ol(t)&&Ll(t)}function Rl(e){return Sl(e)&&e.Pa.length<10}function Pl(e,t){e.Pa.push(t);const n=ql(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Ol(e){return Sl(e)&&!ql(e).M_()&&e.Pa.length>0}function Ll(e){ql(e).start()}async function jl(e){ql(e).na()}async function Ml(e){const t=ql(e);for(const n of e.Pa)t.X_(n.mutations)}async function Fl(e,t,n){const r=e.Pa.shift(),i=Ys.from(r,t,n);await Al(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Dl(e)}async function Vl(e,t){t&&ql(e).Z_&&await async function(e,t){if(function(e){return to(e)&&e!==qt.ABORTED}(t.code)){const n=e.Pa.shift();ql(e).N_(),await Al(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Dl(e)}}(e,t),Ol(e)&&Ll(e)}async function Ul(e,t){const n=Bt(e);n.asyncQueue.verifyOperationInProgress(),Lt(fl,"RemoteStore received new credentials");const r=Sl(n);n.Ia.add(3),await gl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await ml(n)}async function zl(e,t){const n=Bt(e);t?(n.Ia.delete(2),await ml(n)):t||(n.Ia.add(2),await gl(n),n.Aa.set("Unknown"))}function Bl(e){return e.Va||(e.Va=function(e,t,n){const r=Bt(e);return r.ia(),new ll(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:_l.bind(null,e),e_:Tl.bind(null,e),n_:Cl.bind(null,e),J_:Il.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),kl(e)?xl(e):e.Aa.set("Unknown")):(await e.Va.stop(),El(e))})),e.Va}function ql(e){return e.ma||(e.ma=function(e,t,n){const r=Bt(e);return r.ia(),new cl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:jl.bind(null,e),n_:Vl.bind(null,e),ea:Ml.bind(null,e),ta:Fl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Dl(e)):(await e.ma.stop(),e.Pa.length>0&&(Lt(fl,"Stopping write stream with ".concat(e.Pa.length," pending writes")),e.Pa=[]))})),e.ma}class Hl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Hl(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ht(qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wl(e,t){if(jt("AsyncQueue","".concat(t,": ").concat(e)),Fn(e))return new Ht(qt.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pn.comparator(t.key,n.key):(e,t)=>pn.comparator(e.key,t.key),this.keyedMap=ls(),this.sortedSet=new wr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Gl{constructor(){this.fa=new wr(pn.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Vt(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ql{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ql(e,t,Kl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ji(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xl{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Yl{constructor(){this.queries=Jl(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Bt(e),r=n.queries;n.queries=Jl(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new Ht(qt.ABORTED,"Firestore shutting down"))}}function Jl(){return new is(e=>$i(e),Ji)}async function $l(e,t){const n=Bt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new Xl,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Wl(e,"Initialization of query '".concat(Zi(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&nc(n)}async function Zl(e,t){const n=Bt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.wa.indexOf(t);e>=0&&(s.wa.splice(e,1),0===s.wa.length?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ec(e,t){const n=Bt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(i)&&(r=!0);t.ya=i}}r&&nc(n)}function tc(e,t,n){const r=Bt(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function nc(e){e.Da.forEach(e=>{e.next()})}var rc,ic;(ic=rc||(rc={})).Fa="default",ic.Cache="cache";class sc{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ql(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rc.Cache}}class oc{constructor(e){this.key=e}}class ac{constructor(e){this.key=e}}class lc{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ms(),this.mutatedKeys=ms(),this.Xa=ns(e),this.eu=new Kl(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Gl,r=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=es(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Xa(u,a)>0||l&&this.Xa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:s,ru:n,Ds:o,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const o=t&&!r?this.ou():[],a=0===this.Za.size&&this.current&&!r?1:0,l=a!==this.Ya;return this.Ya=a,0!==s.length||l?{snapshot:new Ql(this.query,e.eu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Gl,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ms(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new ac(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new oc(n))}),t}uu(e){this.Ha=e.qs,this.Za=ms();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ql.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const cc="SyncEngine";class uc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class dc{constructor(e){this.key=e,this.lu=!1}}class hc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new is(e=>$i(e),Ji),this.Tu=new Map,this.Iu=new Set,this.du=new wr(pn.comparator),this.Eu=new Map,this.Au=new wa,this.Ru={},this.Vu=new Map,this.mu=oa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function fc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Oc(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await mc(r,t,n,!0),i}async function pc(e,t){const n=Oc(e);await mc(n,t,!0,!1)}async function mc(e,t,n,r){const i=await Ua(e.localStore,Gi(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await gc(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&vl(e.remoteStore,i),a}async function gc(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await Ba(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ic(e,t.targetId,a._u),a.snapshot}(e,t,n,r);const s=await Ba(e.localStore,t,!0),o=new lc(t,s.qs),a=o.nu(s.documents),l=uo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Ic(e,n,c._u);const u=new uc(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function vc(e,t,n){const r=Bt(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(e=>!Ji(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await za(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yl(r.remoteStore,i.targetId),Tc(r,i.targetId)}).catch(Ln)):(Tc(r,i.targetId),await za(r.localStore,i.targetId,!0))}async function yc(e,t){const n=Bt(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yl(n.remoteStore,r.targetId))}async function bc(e,t){const n=Bt(e);try{const e=await function(e,t){const n=Bt(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.hi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.hi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Cr.EMPTY_BYTE_STRING,Tn.min()).withLastLimboFreeSnapshotVersion(Tn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.hi.updateTargetData(e,c))});let a=os(),l=ms();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Fa(e,s,t.documentUpdates).next(e=>{a=e.Ls,l=e.ks})),!r.isEqual(Tn.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return jn.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Fs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(zt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?zt(r.lu,14607):e.removedDocuments.size>0&&(zt(r.lu,42227),r.lu=!1))}),await Dc(n,e,t)}catch(e){await Ln(e)}}function wc(e,t,n){const r=Bt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Bt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&nc(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function xc(e,t,n){const r=Bt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let e=new wr(pn.comparator);e=e.insert(s,fi.newNoDocument(s,Tn.min()));const n=ms().add(s),i=new co(Tn.min(),new Map,new wr(rn),e,n);await bc(r,i),r.du=r.du.remove(s),r.Eu.delete(t),Ac(r)}else await za(r.localStore,t,!1).then(()=>Tc(r,t,n)).catch(Ln)}async function kc(e,t){const n=Bt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Bt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=jn.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);zt(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ms();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);_c(n,r,null),Ec(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dc(n,e)}catch(e){await Ln(e)}}async function Sc(e,t,n){const r=Bt(e);try{const e=await function(e,t){const n=Bt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(zt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);_c(r,t,n),Ec(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Dc(r,e)}catch(n){await Ln(n)}}function Ec(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function _c(e,t,n){const r=Bt(e);let i=r.Ru[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Tc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||Cc(e,t)})}function Cc(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(yl(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Ac(e))}function Ic(e,t,n){for(const r of n)r instanceof oc?(e.Au.addReference(r.key,t),Nc(e,r)):r instanceof ac?(Lt(cc,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Cc(e,r.key)):Vt(19791,{yu:r})}function Nc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(Lt(cc,"New document in limbo: "+n),e.Iu.add(r),Ac(e))}function Ac(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new pn(dn.fromString(t)),r=e.mu.next();e.Eu.set(r,new dc(n)),e.du=e.du.insert(n,r),vl(e.remoteStore,new Jo(Gi(qi(n.path)),r,"TargetPurposeLimboResolution",Vn.ue))}}async function Dc(e,t,n){const r=Bt(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{o.push(r.gu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Aa.Es(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.hu.J_(i),await async function(e,t){const n=Bt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>jn.forEach(t,t=>jn.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>jn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Fn(e))throw e;Lt(Pa,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,s))}async function Rc(e,t){const n=Bt(e);if(!n.currentUser.isEqual(t)){Lt(cc,"User change. New user:",t.toKey());const e=await ja(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new Ht(qt.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Dc(n,e.Bs)}}function Pc(e,t){const n=Bt(e),r=n.Eu.get(t);if(r&&r.lu)return ms().add(r.key);{let e=ms();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function Oc(e){const t=Bt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xc.bind(null,t),t.hu.J_=ec.bind(null,t.eventManager),t.hu.pu=tc.bind(null,t.eventManager),t}function Lc(e){const t=Bt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sc.bind(null,t),t}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=il(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return La(this.persistence,new Ra,e.initialUser,this.serializer)}Du(e){return new Ta(Ia.Vi,this.serializer)}bu(e){return new Wa}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class Mc extends jc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){zt(this.persistence.referenceDelegate instanceof Na,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new da(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?sa.withCacheSize(this.cacheSizeBytes):sa.DEFAULT;return new Ta(e=>Na.Vi(e,t),this.serializer)}}class Fc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>wc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rc.bind(null,this.syncEngine),await zl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Yl}createDatastore(e){const t=il(e.databaseInfo.databaseId),n=function(e){return new nl(e)}(e.databaseInfo);return function(e,t,n,r){return new dl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new pl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>wc(this.syncEngine,e,0),Qa.C()?new Qa:new Ka)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new hc(e,t,n,r,i,s);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Bt(e);Lt(fl,"RemoteStore shutting down."),t.Ia.add(5),await gl(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Fc.provider={build:()=>new Fc};class Vc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):jt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Uc="FirestoreClient";class zc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dt.UNAUTHENTICATED,this.clientId=nn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Lt(Uc,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Lt(Uc,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Wl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Bc(e,t){e.asyncQueue.verifyOperationInProgress(),Lt(Uc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ja(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{Mt("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{Lt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{Mt("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function qc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Hc(e);Lt(Uc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ul(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ul(t.remoteStore,n)),e._onlineComponents=t}async function Hc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Lt(Uc,"Using user provided OfflineComponentProvider");try{await Bc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===qt.FAILED_PRECONDITION||e.code===qt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Mt("Error using user provided cache. Falling back to memory cache: "+n),await Bc(e,new jc)}}else Lt(Uc,"Using default OfflineComponentProvider"),await Bc(e,new Mc(void 0));return e._offlineComponents}async function Wc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Lt(Uc,"Using user provided OnlineComponentProvider"),await qc(e,e._uninitializedComponentsProvider._online)):(Lt(Uc,"Using default OnlineComponentProvider"),await qc(e,new Fc))),e._onlineComponents}function Kc(e){return Wc(e).then(e=>e.syncEngine)}async function Gc(e){const t=await Wc(e),n=t.eventManager;return n.onListen=fc.bind(null,t.syncEngine),n.onUnlisten=vc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=yc.bind(null,t.syncEngine),n}function Qc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Vc({next:a=>{s.Ou(),t.enqueueAndForget(()=>Zl(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Ht(qt.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Ht(qt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new sc(qi(n.path),s,{includeMetadataChanges:!0,ka:!0});return $l(e,o)}(await Gc(e),e.asyncQueue,t,n,r)),r.promise}function Xc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Vc({next:n=>{s.Ou(),t.enqueueAndForget(()=>Zl(e,o)),n.fromCache&&"server"===r.source?i.reject(new Ht(qt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new sc(n,s,{includeMetadataChanges:!0,ka:!0});return $l(e,o)}(await Gc(e),e.asyncQueue,t,n,r)),r.promise}function Yc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jc=new Map,$c="firestore.googleapis.com",Zc=!0;class eu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ht(qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$c,this.ssl=Zc}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zc;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ia;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<la)throw new Ht(qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ht(qt.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ht(qt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ht(qt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ht(qt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ht(qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ht(qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gt;switch(e.type){case"firstParty":return new Jt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ht(qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jc.get(e);t&&(Lt("ComponentProvider","Removing Datastore"),Jc.delete(e),t.terminate())}(this),Promise.resolve()}}function nu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=wn(e,tu);const s=x(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);s&&(k("https://".concat(l)),_("Firestore",!0)),o.host!==$c&&o.host!==l&&Mt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!P(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dt.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ht(qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dt(s)}e._authCredentials=new Qt(new Kt(t,n))}}class ru{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ru(this.firestore,e,this._query)}}class iu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new iu(this.firestore,e,this._key)}toJSON(){return{type:iu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(kn(t,iu._jsonSchema))return new iu(e,n||null,new pn(dn.fromString(t.referencePath)))}}iu._jsonSchemaVersion="firestore/documentReference/1.0",iu._jsonSchema={type:xn("string",iu._jsonSchemaVersion),referencePath:xn("string")};class su extends ru{constructor(e,t,n){super(e,t,qi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new iu(this.firestore,null,new pn(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function ou(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=U(e),mn("collection","path",t),e instanceof tu){const n=dn.fromString(t,...r);return vn(n),new su(e,null,n)}{if(!(e instanceof iu||e instanceof su))throw new Ht(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dn.fromString(t,...r));return vn(n),new su(e.firestore,null,n)}}function au(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=U(e),1===arguments.length&&(t=nn.newId()),mn("doc","path",t),e instanceof tu){const n=dn.fromString(t,...r);return gn(n),new iu(e,null,new pn(n))}{if(!(e instanceof iu||e instanceof su))throw new Ht(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dn.fromString(t,...r));return gn(n),new iu(e.firestore,e instanceof su?e.converter:null,new pn(n))}}const lu="AsyncQueue";class cu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sl(this,"async_queue_retry"),this.oc=()=>{const e=rl();e&&Lt(lu,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=rl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Wt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fn(e))throw e;Lt(lu,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,jt("INTERNAL UNHANDLED ERROR: ",uu(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Hl.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&Vt(47125,{hc:uu(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function uu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function du(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hu extends tu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new cu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cu(e),this._firestoreClient=void 0,await e}}}function fu(e){if(e._terminated)throw new Ht(qt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||pu(e),e._firestoreClient}function pu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Vr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Yc(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new zc(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class mu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mu(Cr.fromBase64String(e))}catch(e){throw new Ht(qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mu(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kn(e,mu._jsonSchema))return mu.fromBase64String(e.bytes)}}mu._jsonSchemaVersion="firestore/bytes/1.0",mu._jsonSchema={type:xn("string",mu._jsonSchemaVersion),bytes:xn("string")};class gu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ht(qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vu{constructor(e){this._methodName=e}}class yu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ht(qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ht(qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yu._jsonSchemaVersion}}static fromJSON(e){if(kn(e,yu._jsonSchema))return new yu(e.latitude,e.longitude)}}yu._jsonSchemaVersion="firestore/geoPoint/1.0",yu._jsonSchema={type:xn("string",yu._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};class bu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:bu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kn(e,bu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new bu(e.vectorValues);throw new Ht(qt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bu._jsonSchemaVersion="firestore/vectorValue/1.0",bu._jsonSchema={type:xn("string",bu._jsonSchemaVersion),vectorValues:xn("object")};const wu=/^__.*__$/;class xu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bs(e,this.data,t,this.fieldTransforms)}}class ku{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Su(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ec:e})}}class Eu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Eu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(Su(this.Ec)&&wu.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _u{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||il(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Eu({Ec:e,methodName:t,bc:n,path:fn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tu(e){const t=e._freezeSettings(),n=il(e._databaseId);return new _u(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);Lu("Data must be an object, but it was:",o,r);const a=Pu(r,o);let l,c;if(s.merge)l=new _r(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ju(t,r,n);if(!o.contains(i))throw new Ht(qt.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Uu(e,i)||e.push(i)}l=new _r(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new xu(new di(a),l,c)}class Iu extends vu{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.wc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iu}}function Nu(e,t,n,r){const i=e.Dc(1,t,n);Lu("Data must be an object, but it was:",i,r);const s=[],o=di.empty();yr(r,(e,r)=>{const a=Fu(t,e,n);r=U(r);const l=i.gc(a);if(r instanceof Iu)s.push(a);else{const e=Ru(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new _r(s);return new ku(o,a,i.fieldTransforms)}function Au(e,t,n,r,i,s){const o=e.Dc(1,t,n),a=[ju(t,r,n)],l=[i];if(s.length%2!=0)throw new Ht(qt.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(ju(t,s[h])),l.push(s[h+1]);const c=[],u=di.empty();for(let h=a.length-1;h>=0;--h)if(!Uu(c,a[h])){const e=a[h];let t=l[h];t=U(t);const n=o.gc(e);if(t instanceof Iu)c.push(e);else{const r=Ru(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new _r(c);return new ku(u,d,o.fieldTransforms)}function Du(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ru(n,e.Dc(r?4:3,t))}function Ru(e,t){if(Ou(e=U(e)))return Lu("Unsupported field value:",t,e),Pu(e,t);if(e instanceof vu)return function(e,t){if(!Su(t.Ec))throw t.wc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.wc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ru(i,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=U(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ws(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=_n.fromDate(e);return{timestampValue:Eo(t.serializer,n)}}if(e instanceof _n){const n=new _n(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Eo(t.serializer,n)}}if(e instanceof yu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mu)return{bytesValue:_o(t.serializer,e._byteString)};if(e instanceof iu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Io(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof bu)return function(e,t){return{mapValue:{fields:{[Br]:{stringValue:Wr},[Kr]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return ys(t.serializer,e)})}}}}}}(e,t);throw t.wc("Unsupported field value: ".concat(bn(e)))}(e,t)}function Pu(e,t){const n={};return br(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yr(e,(e,r)=>{const i=Ru(r,t.Vc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ou(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _n||e instanceof yu||e instanceof mu||e instanceof iu||e instanceof vu||e instanceof bu)}function Lu(e,t,n){if(!Ou(n)||!yn(n)){const r=bn(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function ju(e,t,n){if((t=U(t))instanceof gu)return t._internalPath;if("string"==typeof t)return Fu(e,t);throw Vu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Mu=new RegExp("[~\\*/\\[\\]]");function Fu(e,t,n){if(t.search(Mu)>=0)throw Vu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new gu(...t.split("."))._internalPath}catch(r){throw Vu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Ht(qt.INVALID_ARGUMENT,a+e+l)}function Uu(e,t){return e.some(e=>e.isEqual(t))}class zu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new iu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bu extends zu{data(){return super.data()}}function qu(e,t){return"string"==typeof t?Fu(e,t):t instanceof gu?t._internalPath:t._delegate._internalPath}function Hu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ht(qt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wu{}class Ku extends Wu{}function Gu(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Wu&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Yu).length,n=e.filter(e=>e instanceof Qu).length;if(t>1||t>0&&n>0)throw new Ht(qt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Qu extends Ku{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Qu(e,t,n)}_apply(e){const t=this._parse(e);return Zu(e._query,t),new ru(e.firestore,e.converter,Xi(e._query,t))}_parse(e){const t=Tu(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ht(qt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){$u(o,s);const t=[];for(const n of o)t.push(Ju(r,e,n));a={arrayValue:{values:t}}}else a=Ju(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||$u(o,s),a=Du(n,t,o,"in"===s||"not-in"===s);return wi.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Xu(e,t,n){const r=t,i=qu("where",e);return Qu._create(i,r,n)}class Yu extends Wu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yu(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:xi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Zu(n,i),n=Xi(n,i)}(e._query,t),new ru(e.firestore,e.converter,Xi(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Ju(e,t,n){if("string"==typeof(n=U(n))){if(""===n)throw new Ht(qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wi(t)&&-1!==n.indexOf("/"))throw new Ht(qt.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(dn.fromString(n));if(!pn.isDocumentKey(r))throw new Ht(qt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ni(e,new pn(r))}if(n instanceof iu)return ni(e,n._key);throw new Ht(qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bn(n),"."))}function $u(e,t){if(!Array.isArray(e)||0===e.length)throw new Ht(qt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Zu(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ht(qt.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ht(qt.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ed{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return yr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Kr].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Ar(e.doubleValue));return new bu(i)}convertGeoPoint(e){return new yu(Ar(e.latitude),Ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Mr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fr(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new _n(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dn.fromString(e);zt(Yo(n),9688,{name:e});const r=new zr(n.get(1),n.get(3)),i=new pn(n.popFirst(5));return r.isEqual(t)||jt("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function td(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends zu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(qu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ht(qt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}rd._jsonSchemaVersion="firestore/documentSnapshot/1.0",rd._jsonSchema={type:xn("string",rd._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class id extends rd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new id(this._firestore,this._userDataWriter,n.key,n,new nd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ht(qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new id(e._firestore,e._userDataWriter,n.doc.key,n.doc,new nd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new id(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:od(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ht(qt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function od(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:e})}}function ad(e){e=wn(e,iu);const t=wn(e.firestore,hu);return Qc(fu(t),e._key).then(n=>pd(t,e,n))}sd._jsonSchemaVersion="firestore/querySnapshot/1.0",sd._jsonSchema={type:xn("string",sd._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class ld extends ed{constructor(e){super(),this.firestore=e}convertBytes(e){return new mu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new iu(this.firestore,null,t)}}function cd(e){e=wn(e,ru);const t=wn(e.firestore,hu),n=fu(t),r=new ld(t);return Hu(e._query),Xc(n,e._query).then(n=>new sd(t,r,e,n))}function ud(e,t,n){e=wn(e,iu);const r=wn(e.firestore,hu),i=td(e.converter,t,n);return fd(r,[Cu(Tu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Os.none())])}function dd(e){return fd(wn(e.firestore,hu),[new Gs(e._key,Os.none())])}function hd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=U(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||du(n[l])||(a=n[l++]);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(du(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof iu)d=wn(e.firestore,hu),h=qi(e._key.path),u={next:t=>{n[l]&&n[l](pd(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=wn(e,ru);d=wn(t.firestore,hu),h=t._query;const r=new ld(d);u={next:e=>{n[l]&&n[l](new sd(d,r,t,e))},error:n[l+1],complete:n[l+2]},Hu(e._query)}return function(e,t,n,r){const i=new Vc(r),s=new sc(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>$l(await Gc(e),s)),()=>{i.Ou(),e.asyncQueue.enqueueAndForget(async()=>Zl(await Gc(e),s))}}(fu(d),h,c,u)}function fd(e,t){return function(e,t){const n=new Wt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Lc(e);try{const e=await function(e,t){const n=Bt(e),r=_n.now(),i=t.reduce((e,t)=>e.add(t.key),ms());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=os(),l=ms();return n.Os.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Us(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new qs(e.key,t,hi(t.value.mapValue),Os.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:cs(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new wr(rn)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Dc(r,e.changes),await Dl(r.remoteStore)}catch(e){const t=Wl(e,"Failed to persist write");n.reject(t)}}(await Kc(e),t,n)),n.promise}(fu(e),t)}function pd(e,t,n){const r=n.docs.get(t._key),i=new ld(e);return new rd(e,i,t._key,r,new nd(n.hasPendingWrites,n.fromCache),t.converter)}class md{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tu(e)}set(e,t,n){this._verifyNotCommitted();const r=gd(e,this._firestore),i=td(r.converter,t,n),s=Cu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Os.none())),this}update(e,t,n){this._verifyNotCommitted();const r=gd(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=U(t))||t instanceof gu?Au(this._dataReader,"WriteBatch.update",r._key,t,n,o):Nu(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Os.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gd(e,this._firestore);return this._mutations=this._mutations.concat(new Gs(t._key,Os.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ht(qt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gd(e,t){if((e=U(e)).firestore!==t)throw new Ht(qt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function vd(e){return fu(e=wn(e,hu)),new md(e,t=>fd(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Rt=e}(tt),Ye(new z("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new hu(new Xt(e.getProvider("auth-internal")),new Zt(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ht(qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),it(Nt,At,e),it(Nt,At,"esm2017")}();it("firebase","11.10.0","app");function yd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function bd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wd=bd,xd=new D("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kd=new J("@firebase/auth");function Sd(e){if(kd.logLevel<=K.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kd.error("Auth (".concat(tt,"): ").concat(e),...n)}}function Ed(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Id(e,...n)}function _d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Id(e,...n)}function Td(e,t,n){const r=Object.assign(Object.assign({},wd()),{[t]:n});return new D("auth","Firebase",r).create(t,{appName:e.name})}function Cd(e){return Td(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Id(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return xd.create(e,...n)}function Nd(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Id(t,...r)}}function Ad(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Sd(t),new Error(t)}function Dd(e,t){e||Ad(t)}function Rd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pd(){return"http:"===Od()||"https:"===Od()}function Od(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ld(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Pd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class jd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ld()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Md(e,t){Dd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Fd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ad("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ad("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ad("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ud=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zd=new jd(3e4,6e4);function Bd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qd(e,t,n,r){return Hd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=L(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&x(e.emulatorConfig.host)&&(l.credentials="include"),Fd.fetch()(await Kd(e,e.config.apiHost,n,o),l)})}async function Hd(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vd),t);try{const t=new Qd(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Xd(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xd(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Xd(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Xd(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Td(e,a,o);Ed(e,a)}}catch(i){if(i instanceof A)throw i;Ed(e,"network-request-failed",{message:String(i)})}}async function Wd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await qd(e,t,n,r,i);return"mfaPendingCredential"in s&&Ed(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Kd(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Md(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Ud.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Gd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qd{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(_d(this.auth,"network-request-failed")),zd.get())})}}function Xd(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_d(e,t,r);return i.customData._tokenResponse=n,i}function Yd(e){return void 0!==e&&void 0!==e.enterprise}class Jd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Gd(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $d(e,t){return qd(e,"GET","/v2/recaptchaConfig",Bd(e,t))}async function Zd(e,t){return qd(e,"POST","/v1/accounts:lookup",t)}function eh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function th(e){return 1e3*Number(e)}function nh(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(Sd("Failed to decode base64 JWT payload"),null)}catch(i){return Sd("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function rh(e){const t=nh(e);return Nd(t,"internal-error"),Nd("undefined"!==typeof t.exp,"internal-error"),Nd("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ih(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof A&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class sh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class oh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ah(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ih(e,Zd(n,{idToken:r}));Nd(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?lh(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new oh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function lh(e){return e.map(e=>{var{providerId:t}=e,n=yd(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ch{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Nd(e.idToken,"internal-error"),Nd("undefined"!==typeof e.idToken,"internal-error"),Nd("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):rh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Nd(0!==e.length,"internal-error");const t=rh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Nd(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Hd(e,{},async()=>{const n=L({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Kd(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&x(e.emulatorConfig.host)&&(a.credentials="include"),Fd.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ch;return n&&(Nd("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Nd("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Nd("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ch,this.toJSON())}_performRefresh(){return Ad("not implemented")}}function uh(e,t){Nd("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class dh{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=yd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new oh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ih(this,this.stsTokenManager.getToken(this.auth,e));return Nd(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=U(e),r=await n.getIdToken(t),i=nh(r);Nd(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:eh(th(i.auth_time)),issuedAtTime:eh(th(i.iat)),expirationTime:eh(th(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=U(e);await ah(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Nd(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Nd(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ah(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($e(this.auth.app))return Promise.reject(Cd(this.auth));const e=await this.getIdToken();return await ih(this,async function(e,t){return qd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;Nd(y&&k,e,"internal-error");const S=ch.fromJSON(this.name,k);Nd("string"===typeof y,e,"internal-error"),uh(u,e.name),uh(d,e.name),Nd("boolean"===typeof b,e,"internal-error"),Nd("boolean"===typeof w,e,"internal-error"),uh(h,e.name),uh(f,e.name),uh(p,e.name),uh(m,e.name),uh(g,e.name),uh(v,e.name);const E=new dh({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ch;r.updateFromServerResponse(t);const i=new dh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ah(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Nd(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?lh(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new ch;o.updateFromIdToken(n);const a=new dh({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new oh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const hh=new Map;function fh(e){Dd(e instanceof Function,"Expected a class definition");let t=hh.get(e);return t?(Dd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hh.set(e,t),t)}class ph{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ph.type="NONE";const mh=ph;function gh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class vh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=gh(this.userKey,r.apiKey,i),this.fullPersistenceKey=gh("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Zd(this.auth,{idToken:e}).catch(()=>{});return t?dh._fromGetAccountInfoResponse(this.auth,t,e):null}return dh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new vh(fh(mh),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||fh(mh);const s=gh(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Zd(e,{idToken:t}).catch(()=>{});if(!r)break;n=await dh._fromGetAccountInfoResponse(e,r,t)}else n=dh._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new vh(i,e,n)):new vh(i,e,n)}}function yh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Eh(t))return"Blackberry";if(_h(t))return"Webos";if(wh(t))return"Safari";if((t.includes("chrome/")||xh(t))&&!t.includes("edge/"))return"Chrome";if(Sh(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function bh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function wh(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function kh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function Sh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function Eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function _h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function Th(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ch(){return function(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return Th(e)||Sh(e)||_h(e)||Eh(e)||/windows phone/i.test(e)||kh(e)}function Nh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=yh(T());break;case"Worker":t="".concat(yh(T()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tt,"/").concat(r)}class Ah{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Dh{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Rh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oh(this),this.idTokenSubscription=new Oh(this),this.beforeStateQueue=new Ah(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fh(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await vh.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Zd(this,{idToken:e}),n=await dh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($e(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Nd(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ah(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($e(this.app))return Promise.reject(Cd(this));const t=e?U(e):null;return t&&Nd(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Nd(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $e(this.app)?Promise.reject(Cd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $e(this.app)?Promise.reject(Cd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fh(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return qd(e,"GET","/v2/passwordPolicy",Bd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Dh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new D("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qd(e,"POST","/v2/accounts:revokeToken",Bd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fh(e)||this._popupRedirectResolver;Nd(t,this,"argument-error"),this.redirectPersistenceManager=await vh.create(this,[fh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nd(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Nd(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if($e(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(kd.logLevel<=K.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kd.warn("Auth (".concat(tt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ph(e){return U(e)}class Oh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new F(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Nd(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jh(e){return Lh.loadJS(e)}function Mh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Fh{constructor(){this.enterprise=new Vh}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Vh{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Uh="NO_RECAPTCHA";class zh{constructor(e){this.type="recaptcha-enterprise",this.auth=Ph(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Yd(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Uh)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Fh).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{$d(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Jd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Yd(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Lh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),jh(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Bh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new zh(e);let o;if(i)o=Uh;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function qh(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Bh(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Bh(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Bh(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Bh(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Bh(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Hh(e){const t=Ph(e),n=await $d(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Jd(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new zh(t).verify()}}function Wh(e,t,n){const r=Ph(e);Nd(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Kh(t),{host:o,port:a}=function(e){const t=Kh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gh(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Nd(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Nd(P(c,r.config.emulator)&&P(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,x(o)?(k("".concat(s,"//").concat(o).concat(l)),_("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Kh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ad("not implemented")}_getIdTokenResponse(e){return Ad("not implemented")}_linkToIdToken(e,t){return Ad("not implemented")}_getReauthenticationResolver(e){return Ad("not implemented")}}async function Xh(e,t){return qd(e,"POST","/v1/accounts:signUp",t)}async function Yh(e,t){return Wd(e,"POST","/v1/accounts:signInWithPassword",Bd(e,t))}class Jh extends Qh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Jh(e,t,"password")}static _fromEmailAndCode(e,t){return new Jh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return qh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Yh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wd(e,"POST","/v1/accounts:signInWithEmailLink",Bd(e,t))}(e,{email:this._email,oobCode:this._password});default:Ed(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return qh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wd(e,"POST","/v1/accounts:signInWithEmailLink",Bd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ed(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $h(e,t){return Wd(e,"POST","/v1/accounts:signInWithIdp",Bd(e,t))}class Zh extends Qh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ed("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=yd(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Zh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return $h(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,$h(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$h(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=L(t)}return e}}async function ef(e,t){return qd(e,"POST","/v1/accounts:sendVerificationCode",Bd(e,t))}const tf={USER_NOT_FOUND:"user-not-found"};class nf extends Qh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new nf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new nf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Wd(e,"POST","/v1/accounts:signInWithPhoneNumber",Bd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Wd(e,"POST","/v1/accounts:signInWithPhoneNumber",Bd(e,t));if(n.temporaryProof)throw Xd(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Wd(e,"POST","/v1/accounts:signInWithPhoneNumber",Bd(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),tf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new nf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class rf{constructor(e){var t,n,r,i,s,o;const a=j(M(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Nd(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=j(M(e)).link,n=t?j(M(t)).deep_link_id:null,r=j(M(e)).deep_link_id;return(r?j(M(r)).link:null)||r||n||t||e}(e);try{return new rf(t)}catch(n){return null}}}class sf{constructor(){this.providerId=sf.PROVIDER_ID}static credential(e,t){return Jh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=rf.parseLink(t);return Nd(n,"argument-error"),Jh._fromEmailAndCode(e,n.code,n.tenantId)}}sf.PROVIDER_ID="password",sf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class of{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class af extends of{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lf extends af{constructor(){super("facebook.com")}static credential(e){return Zh._fromParams({providerId:lf.PROVIDER_ID,signInMethod:lf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lf.credentialFromTaggedObject(e)}static credentialFromError(e){return lf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return lf.credential(t.oauthAccessToken)}catch(n){return null}}}lf.FACEBOOK_SIGN_IN_METHOD="facebook.com",lf.PROVIDER_ID="facebook.com";class cf extends af{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zh._fromParams({providerId:cf.PROVIDER_ID,signInMethod:cf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cf.credentialFromTaggedObject(e)}static credentialFromError(e){return cf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return cf.credential(n,r)}catch(i){return null}}}cf.GOOGLE_SIGN_IN_METHOD="google.com",cf.PROVIDER_ID="google.com";class uf extends af{constructor(){super("github.com")}static credential(e){return Zh._fromParams({providerId:uf.PROVIDER_ID,signInMethod:uf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uf.credentialFromTaggedObject(e)}static credentialFromError(e){return uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return uf.credential(t.oauthAccessToken)}catch(n){return null}}}uf.GITHUB_SIGN_IN_METHOD="github.com",uf.PROVIDER_ID="github.com";class df extends af{constructor(){super("twitter.com")}static credential(e,t){return Zh._fromParams({providerId:df.PROVIDER_ID,signInMethod:df.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return df.credentialFromTaggedObject(e)}static credentialFromError(e){return df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return df.credential(n,r)}catch(i){return null}}}df.TWITTER_SIGN_IN_METHOD="twitter.com",df.PROVIDER_ID="twitter.com";class hf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await dh._fromIdTokenResponse(e,n,r),s=ff(n);return new hf({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ff(n);return new hf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ff(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class pf extends A{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pf(e,t,n,r)}}function mf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw pf._fromErrorAndOperation(e,n,t,r);throw n})}async function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ih(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hf._forOperation(e,"link",r)}async function vf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if($e(r.app))return Promise.reject(Cd(r));const i="reauthenticate";try{const s=await ih(e,mf(r,i,t,e),n);Nd(s.idToken,r,"internal-error");const o=nh(s.idToken);Nd(o,r,"internal-error");const{sub:a}=o;return Nd(e.uid===a,r,"user-mismatch"),hf._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ed(r,"user-mismatch"),s}}async function yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Cd(e));const r="signIn",i=await mf(e,r,t),s=await hf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function bf(e,t){return qd(e,"POST","/v2/accounts/mfaEnrollment:start",Bd(e,t))}new WeakMap;const wf="__sak";class xf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class kf extends xf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ih(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ch()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kf.type="LOCAL";const Sf=kf;function Ef(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function _f(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Tf{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=_f(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ef(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=_f(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=_f(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ef(n);const i=setInterval(()=>{const e=Ef(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Tf.type="COOKIE";class Cf extends xf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cf.type="SESSION";const If=Cf;class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Nf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Af(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Nf.receivers=[];class Df{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Af("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Rf(){return window}function Pf(){return"undefined"!==typeof Rf().WorkerGlobalScope&&"function"===typeof Rf().importScripts}const Of="firebaseLocalStorageDb",Lf="firebaseLocalStorage",jf="fbase_key";class Mf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ff(e,t){return e.transaction([Lf],t?"readwrite":"readonly").objectStore(Lf)}function Vf(){const e=indexedDB.open(Of,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Lf,{keyPath:jf})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Lf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Of);return new Mf(e).toPromise()}(),t(await Vf()))})})}async function Uf(e,t,n){const r=Ff(e,!0).put({[jf]:t,value:n});return new Mf(r).toPromise()}function zf(e,t){const n=Ff(e,!0).delete(t);return new Mf(n).toPromise()}class Bf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Vf()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(Pf()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Df(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vf();return await Uf(e,wf,"1"),await zf(e,wf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ff(e,!1).get(t),r=await new Mf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ff(e,!1).getAll();return new Mf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Bf.type="LOCAL";const qf=Bf;function Hf(e,t){return qd(e,"POST","/v2/accounts/mfaSignIn:start",Bd(e,t))}Mh("rcb"),new jd(3e4,6e4);const Wf="recaptcha";async function Kf(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Hh(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Nd("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=qh(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Uh){Nd((null===n||void 0===n?void 0:n.type)===Wf,e,"argument-error");return bf(e,await Gf(e,t,n))}return bf(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{Nd("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Nd(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=qh(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Uh){Nd((null===n||void 0===n?void 0:n.type)===Wf,e,"argument-error");return Hf(e,await Gf(e,t,n))}return Hf(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=qh(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Uh){Nd((null===n||void 0===n?void 0:n.type)===Wf,e,"argument-error");return ef(e,await Gf(e,t,n))}return ef(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Gf(e,t,n){Nd(n.type===Wf,e,"argument-error");const r=await n.verify();Nd("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Qf{constructor(e){this.providerId=Qf.PROVIDER_ID,this.auth=Ph(e)}verifyPhoneNumber(e,t){return Kf(this.auth,e,U(t))}static credential(e,t){return nf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qf.credentialFromTaggedObject(t)}static credentialFromError(e){return Qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?nf._fromTokenResponse(n,r):null}}function Xf(e,t){return t?fh(t):(Nd(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qf.PROVIDER_ID="phone",Qf.PHONE_SIGN_IN_METHOD="phone";class Yf extends Qh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $h(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $h(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $h(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jf(e){return yf(e.auth,new Yf(e),e.bypassAuthState)}function $f(e){const{auth:t,user:n}=e;return Nd(n,t,"internal-error"),vf(n,new Yf(e),e.bypassAuthState)}async function Zf(e){const{auth:t,user:n}=e;return Nd(n,t,"internal-error"),gf(n,new Yf(e),e.bypassAuthState)}class ep{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jf;case"linkViaPopup":case"linkViaRedirect":return Zf;case"reauthViaPopup":case"reauthViaRedirect":return $f;default:Ed(this.auth,"internal-error")}}resolve(e){Dd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tp=new jd(2e3,1e4);class np extends ep{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,np.currentPopupAction&&np.currentPopupAction.cancel(),np.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Nd(e,this.auth,"internal-error"),e}async onExecution(){Dd(1===this.filter.length,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(_d(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,np.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_d(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,tp.get())};e()}}np.currentPopupAction=null;const rp=new Map;class ip extends ep{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=rp.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ap(t),r=op(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rp.set(this.auth._key(),e)}return this.bypassAuthState||rp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sp(e,t){rp.set(e._key(),t)}function op(e){return fh(e._redirectPersistence)}function ap(e){return gh("pendingRedirect",e.config.apiKey,e.name)}async function lp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Cd(e));const r=Ph(e),i=Xf(r,t),s=new ip(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class cp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!dp(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_d(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(up(e))}saveEventToCache(e){this.cachedEventUids.add(up(e)),this.lastProcessedEventTime=Date.now()}}function up(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function dp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const hp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fp=/^https?/;async function pp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return qd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(mp(r))return}catch(n){}Ed(e,"unauthorized-domain")}function mp(e){const t=Rd(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!fp.test(n))return!1;if(hp.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gp=new jd(3e4,6e4);function vp(){const e=Rf().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function yp(e){return new Promise((t,n)=>{var r,i,s;function o(){vp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vp(),n(_d(e,"network-request-failed"))},timeout:gp.get()})}if(null===(i=null===(r=Rf().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Rf().gapi)||void 0===s?void 0:s.load)){const t=Mh("iframefcb");return Rf()[t]=()=>{gapi.load?o():n(_d(e,"network-request-failed"))},jh("".concat(Lh.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw bp=null,e})}let bp=null;const wp=new jd(5e3,15e3),xp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sp(e){const t=e.config;Nd(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Md(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:tt},i=kp.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(L(r).slice(1))}async function Ep(e){const t=await function(e){return bp=bp||yp(e),bp}(e),n=Rf().gapi;return Nd(n,e,"internal-error"),t.open({where:document.body,url:Sp(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xp,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=_d(e,"network-request-failed"),s=Rf().setTimeout(()=>{r(i)},wp.get());function o(){Rf().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const _p={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Cp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},_p),{width:r.toString(),height:i.toString(),top:s,left:o}),c=T().toLowerCase();n&&(a=xh(c)?"_blank":n),bh(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Th(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Tp(null);const d=window.open(t||"",a,u);Nd(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Tp(d)}const Ip="__/auth/handler",Np="emulator/auth/handler",Ap=encodeURIComponent("fac");async function Dp(e,t,n,r,i,s){Nd(e.config.authDomain,e,"auth-domain-config-required"),Nd(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tt,eventId:i};if(t instanceof of){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof af){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ap,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ip);return Md(t,Np)}(e),"?").concat(L(a).slice(1)).concat(c)}const Rp="webStorageSupport";const Pp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=If,this._completeRedirectFn=lp,this._overrideRedirectResult=sp}async _openPopup(e,t,n,r){var i;Dd(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Cp(e,await Dp(e,t,n,Rd(),r),Af())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rf().location.href=e}(await Dp(e,t,n,Rd(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ep(e),n=new cp(e);return t.register("authEvent",t=>{Nd(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rp,{type:Rp},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Rp];void 0!==i&&t(!!i),Ed(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ih()||wh()||Th()}};var Op="@firebase/auth",Lp="1.10.8";class jp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Nd(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Mp=b("authIdTokenMaxAge")||300;let Fp=null;var Vp;Lh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_d("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Vp="Browser",Ye(new z("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Nd(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Vp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nh(Vp)},c=new Rh(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fh);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ye(new z("auth-internal",e=>(e=>new jp(e))(Ph(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Op,Lp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vp)),it(Op,Lp,"esm2017");const Up={apiKey:"AIzaSyAHowpOHnCOaQ5eackHV__Bo3M42437lXQ",authDomain:"daily-discussion-1040d.firebaseapp.com",projectId:"daily-discussion-1040d",storageBucket:"daily-discussion-1040d.firebasestorage.app",messagingSenderId:"647593805968",appId:"1:647593805968:web:321f52517221267163f015",measurementId:"G-YB5N6Q6MDZ"};let zp,Bp,qp;const Hp=Up.projectId;try{zp=nt(Up),Bp=function(e,t){const n="object"==typeof e?e:rt(),r="string"==typeof e?e:t||Ur,i=Je(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(()=>{const e=v("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&nu(i,...e)}return i}(zp),qp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();const t=Je(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Je(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(P(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ed(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Pp,persistence:[qf,Sf,If]}),r=b("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Mp)return;const r=null===t||void 0===t?void 0:t.token;Fp!==r&&(Fp=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){U(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){U(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=v("auth");return s&&Wh(n,"http://".concat(s)),n}(zp),console.log("Firebase SDKs initialized successfully.")}catch(cy){console.error("Error initializing Firebase SDKs:",cy)}function Wp(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Kp=["id"],Gp=["id"],Qp=async(e,t,n,r,i)=>{if(!e)return void t("Authentication not ready. Please log in.","error");if(n.find(e=>e.subject===i&&e.title===r.title))t('"'.concat(r.title,"\" is already in Today's Focus."),"info");else try{const s="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm13 14v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75",o={title:r.title,mcqs:r.mcqs,date:r.date,link:r.link||"",subject:i,iconPath:r.iconPath||s,completed:r.completed||!1,order:n.length},a=ou(Bp,"artifacts",Hp,"users",e,"todayFocus");await function(e,t){const n=wn(e.firestore,hu),r=au(e),i=td(e.converter,t);return fd(n,[Cu(Tu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Os.exists(!1))]).then(()=>r)}(a,o),t('Added "'.concat(r.title,"\" to Today's Focus."),"success")}catch(cy){console.error("Error adding focus item:",cy),t('Failed to add "'.concat(r.title,"\" to Today's Focus."),"error")}},Xp=async(e,t,n,r,i,s,o)=>{if(e)if(n&&r&&i&&s&&o)try{const a=au(Bp,"artifacts",Hp,"users",e,"timetable",n);await ud(a,{subject:r,topic:i,date:s,time:o},{merge:!0}),t("Study event updated successfully!","success")}catch(cy){console.error("Error updating timetable entry:",cy),t("Failed to update study event.","error")}else t("All fields for the timetable event are required for update.","error");else t("Authentication not ready. Please log in.","error")},Yp=async(e,t,n,r,i)=>{try{localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),localStorage.removeItem("currentTimetableSubject"),qp&&await function(e){return U(e).signOut()}(qp),n(null),r(null),i(null),t(!1),e("Logged out successfully.","info")}catch(cy){console.error("Error during signOut or localStorage clear:",cy),e("Failed to log out.","error")}};var Jp=n(579);const $p=r.memo(e=>{let{userName:t}=e;const[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{const e=()=>{const e=(new Date).getHours();let t="",n="";e>=5&&e<12?(t="Good morning",n="\u2600\ufe0f"):e>=12&&e<17?(t="Good afternoon",n="\ud83d\udc4b"):e>=17&&e<22?(t="Good evening",n="\ud83c\udf19"):(t="Time to sleep",n="\ud83d\ude34"),i(t),o(n)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,Jp.jsx)("div",{children:(0,Jp.jsxs)("p",{className:"text-base font-light text-gray-500 flex items-center",children:[n,(0,Jp.jsx)("span",{className:"ml-1 text-base",children:s})]})})});var Zp=n(950);const em="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function tm(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function nm(e){return"nodeType"in e}function rm(e){var t,n;return e?tm(e)?e:nm(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function im(e){const{Document:t}=rm(e);return e instanceof t}function sm(e){return!tm(e)&&e instanceof rm(e).HTMLElement}function om(e){return e instanceof rm(e).SVGElement}function am(e){return e?tm(e)?e.document:nm(e)?im(e)?e:sm(e)||om(e)?e.ownerDocument:document:document:document}const lm=em?r.useLayoutEffect:r.useEffect;function cm(e){const t=(0,r.useRef)(e);return lm(()=>{t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function um(e,t){void 0===t&&(t=[e]);const n=(0,r.useRef)(e);return lm(()=>{n.current!==e&&(n.current=e)},t),n}function dm(e,t){const n=(0,r.useRef)();return(0,r.useMemo)(()=>{const t=e(n.current);return n.current=t,t},[...t])}function hm(e){const t=cm(e),n=(0,r.useRef)(null),i=(0,r.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,i]}function fm(e){const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}let pm={};function mm(e,t){return(0,r.useMemo)(()=>{if(t)return t;const n=null==pm[e]?0:pm[e]+1;return pm[e]=n,e+"-"+n},[e,t])}function gm(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>{const r=Object.entries(n);for(const[i,s]of r){const n=t[i];null!=n&&(t[i]=n+e*s)}return t},c({},t))}}const vm=gm(1),ym=gm(-1);function bm(e){if(!e)return!1;const{KeyboardEvent:t}=rm(e.target);return t&&e instanceof t}function wm(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=rm(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const xm=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[xm.Translate.toString(e),xm.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),km="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Sm(e){return e.matches(km)?e:e.querySelector(km)}const Em={display:"none"};function _m(e){let{id:t,value:n}=e;return r.createElement("div",{id:t,style:Em},n)}function Tm(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;return r.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},n)}const Cm=["transform"],Im=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],Nm=(0,r.createContext)(null);const Am={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Dm={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Rm(e){let{announcements:t=Dm,container:n,hiddenTextDescribedById:i,screenReaderInstructions:s=Am}=e;const{announce:o,announcement:a}=function(){const[e,t]=(0,r.useState)("");return{announce:(0,r.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),l=mm("DndLiveRegion"),[c,u]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{u(!0)},[]),function(e){const t=(0,r.useContext)(Nm);(0,r.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,r.useMemo)(()=>({onDragStart(e){let{active:n}=e;o(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&o(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;o(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;o(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;o(t.onDragCancel({active:n,over:r}))}}),[o,t])),!c)return null;const d=r.createElement(r.Fragment,null,r.createElement(_m,{id:i,value:s.draggable}),r.createElement(Tm,{id:l,announcement:a}));return n?(0,Zp.createPortal)(d,n):d}var Pm;function Om(){}function Lm(e,t){return(0,r.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(Pm||(Pm={}));const jm=Object.freeze({x:0,y:0});function Mm(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Fm(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Vm(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Um(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const zm=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Um(t,t.left,t.top),s=[];for(const o of r){const{id:e}=o,t=n.get(e);if(t){const n=Mm(Um(t),i);s.push({id:e,data:{droppableContainer:o,value:n}})}}return s.sort(Fm)};function Bm(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),o=i-r,a=s-n;if(r<i&&n<s){const n=t.width*t.height,r=e.width*e.height,i=o*a;return Number((i/(n+r-i)).toFixed(4))}return 0}const qm=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:e}=s,r=n.get(e);if(r){const n=Bm(r,t);n>0&&i.push({id:e,data:{droppableContainer:s,value:n}})}}return i.sort(Vm)};function Hm(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:jm}function Wm(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>c(c({},t),{},{top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),c({},t))}}const Km=Wm(1);function Gm(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Qm={ignoreTransform:!1};function Xm(e,t){void 0===t&&(t=Qm);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=rm(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=Gm(t);if(!r)return e;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=e.left-o-(1-i)*parseFloat(n),c=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=s?e.height/s:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function Ym(e){return Xm(e,{ignoreTransform:!0})}function Jm(e,t){const n=[];return e?function r(i){if(null!=t&&n.length>=t)return n;if(!i)return n;if(im(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!sm(i)||om(i))return n;if(n.includes(i))return n;const s=rm(e).getComputedStyle(i);return i!==e&&function(e,t){void 0===t&&(t=rm(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"===typeof r&&n.test(r)})}(i,s)&&n.push(i),function(e,t){return void 0===t&&(t=rm(e).getComputedStyle(e)),"fixed"===t.position}(i,s)?n:r(i.parentNode)}(e):n}function $m(e){const[t]=Jm(e,1);return null!=t?t:null}function Zm(e){return em&&e?tm(e)?e:nm(e)?im(e)||e===am(e).scrollingElement?window:sm(e)?e:null:null:null}function eg(e){return tm(e)?e.scrollX:e.scrollLeft}function tg(e){return tm(e)?e.scrollY:e.scrollTop}function ng(e){return{x:eg(e),y:tg(e)}}var rg;function ig(e){return!(!em||!e)&&e===document.scrollingElement}function sg(e){const t={x:0,y:0},n=ig(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(rg||(rg={}));const og={x:.2,y:.2};function ag(e,t,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;void 0===r&&(r=10),void 0===i&&(i=og);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=sg(e),f={x:0,y:0},p={x:0,y:0},m=t.height*i.y,g=t.width*i.x;return!c&&s<=t.top+m?(f.y=rg.Backward,p.y=r*Math.abs((t.top+m-s)/m)):!u&&l>=t.bottom-m&&(f.y=rg.Forward,p.y=r*Math.abs((t.bottom-m-l)/m)),!h&&a>=t.right-g?(f.x=rg.Forward,p.x=r*Math.abs((t.right-g-a)/g)):!d&&o<=t.left+g&&(f.x=rg.Backward,p.x=r*Math.abs((t.left+g-o)/g)),{direction:f,speed:p}}function lg(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function cg(e){return e.reduce((e,t)=>vm(e,ng(t)),jm)}function ug(e,t){if(void 0===t&&(t=Xm),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);$m(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const dg=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eg(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+tg(t),0)}]];class hg{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Jm(t),r=cg(n);this.rect=c({},e),this.width=e.width,this.height=e.height;for(const[i,s,o]of dg)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=o(n),s=r[i]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fg{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function pg(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"===typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var mg,gg;function vg(e){e.preventDefault()}function yg(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(mg||(mg={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(gg||(gg={}));const bg={start:[gg.Space,gg.Enter],cancel:[gg.Esc],end:[gg.Space,gg.Enter,gg.Tab]},wg=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case gg.Right:return c(c({},n),{},{x:n.x+25});case gg.Left:return c(c({},n),{},{x:n.x-25});case gg.Down:return c(c({},n),{},{y:n.y+25});case gg.Up:return c(c({},n),{},{y:n.y-25})}};class xg{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new fg(am(t)),this.windowListeners=new fg(rm(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(mg.Resize,this.handleCancel),this.windowListeners.add(mg.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(mg.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&ug(n),t(jm)}handleKeyDown(e){if(bm(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:i=bg,coordinateGetter:s=wg,scrollBehavior:o="smooth"}=r,{code:a}=e;if(i.end.includes(a))return void this.handleEnd(e);if(i.cancel.includes(a))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:jm;this.referenceCoordinates||(this.referenceCoordinates=c);const u=s(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=ym(u,c),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(const n of i){const i=e.code,{isTop:s,isRight:a,isLeft:l,isBottom:c,maxScroll:d,minScroll:h}=sg(n),f=lg(n),p={x:Math.min(i===gg.Right?f.right-f.width/2:f.right,Math.max(i===gg.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(i===gg.Down?f.bottom-f.height/2:f.bottom,Math.max(i===gg.Down?f.top:f.top+f.height/2,u.y))},m=i===gg.Right&&!a||i===gg.Left&&!l,g=i===gg.Down&&!c||i===gg.Up&&!s;if(m&&p.x!==u.x){const e=n.scrollLeft+t.x,s=i===gg.Right&&e<=d.x||i===gg.Left&&e>=h.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:o});r.x=s?n.scrollLeft-e:i===gg.Right?n.scrollLeft-d.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:o});break}if(g&&p.y!==u.y){const e=n.scrollTop+t.y,s=i===gg.Down&&e<=d.y||i===gg.Up&&e>=h.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:o});r.y=s?n.scrollTop-e:i===gg.Down?n.scrollTop-d.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:o});break}}this.handleMove(e,vm(ym(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function kg(e){return Boolean(e&&"distance"in e)}function Sg(e){return Boolean(e&&"delay"in e)}xg.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=bg,onActivation:i}=t,{active:s}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class Eg{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=rm(e);return e instanceof t?e:am(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:s}=i;this.props=e,this.events=t,this.document=am(s),this.documentListeners=new fg(this.document),this.listeners=new fg(n),this.windowListeners=new fg(rm(s)),this.initialCoordinates=null!=(r=wm(i))?r:jm,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(mg.Resize,this.handleCancel),this.windowListeners.add(mg.DragStart,vg),this.windowListeners.add(mg.VisibilityChange,this.handleCancel),this.windowListeners.add(mg.ContextMenu,vg),this.documentListeners.add(mg.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Sg(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(kg(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(mg.Click,yg,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(mg.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!r)return;const a=null!=(t=wm(e))?t:jm,l=ym(r,a);if(!n&&o){if(kg(o)){if(null!=o.tolerance&&pg(l,o.tolerance))return this.handleCancel();if(pg(l,o.distance))return this.handleStart()}return Sg(o)&&pg(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),s(a)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===gg.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const _g={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Tg extends Eg{constructor(e){const{event:t}=e,n=am(t.target);super(e,_g,n)}}Tg.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const Cg={move:{name:"mousemove"},end:{name:"mouseup"}};var Ig;!function(e){e[e.RightClick=2]="RightClick"}(Ig||(Ig={}));(class extends Eg{constructor(e){super(e,Cg,am(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Ig.RightClick&&(null==r||r({event:n}),!0)}}];const Ng={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ag extends Eg{constructor(e){super(e,Ng)}static setup(){return window.addEventListener(Ng.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ng.move.name,e)};function e(){}}}var Dg,Rg;function Pg(e){let{acceleration:t,activator:n=Dg.Pointer,canScroll:i,draggingRect:s,enabled:o,interval:a=5,order:l=Rg.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:f}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=fm(t);return dm(e=>{if(n||!r||!e)return Og;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[rg.Backward]:e.x[rg.Backward]||-1===i.x,[rg.Forward]:e.x[rg.Forward]||1===i.x},y:{[rg.Backward]:e.y[rg.Backward]||-1===i.y,[rg.Forward]:e.y[rg.Forward]||1===i.y}}},[n,t,r])}({delta:h,disabled:!o}),[m,g]=function(){const e=(0,r.useRef)(null);return[(0,r.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,r.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),v=(0,r.useRef)({x:0,y:0}),y=(0,r.useRef)({x:0,y:0}),b=(0,r.useMemo)(()=>{switch(n){case Dg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Dg.DraggableRect:return s}},[n,s,c]),w=(0,r.useRef)(null),x=(0,r.useCallback)(()=>{const e=w.current;if(!e)return;const t=v.current.x*y.current.x,n=v.current.y*y.current.y;e.scrollBy(t,n)},[]),k=(0,r.useMemo)(()=>l===Rg.TreeOrder?[...u].reverse():u,[l,u]);(0,r.useEffect)(()=>{if(o&&u.length&&b){for(const e of k){if(!1===(null==i?void 0:i(e)))continue;const n=u.indexOf(e),r=d[n];if(!r)continue;const{direction:s,speed:o}=ag(e,r,b,t,f);for(const e of["x","y"])p[e][s[e]]||(o[e]=0,s[e]=0);if(o.x>0||o.y>0)return g(),w.current=e,m(x,a),v.current=o,void(y.current=s)}v.current={x:0,y:0},y.current={x:0,y:0},g()}else g()},[t,x,i,g,o,a,JSON.stringify(b),JSON.stringify(p),m,u,k,d,JSON.stringify(f)])}Ag.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Dg||(Dg={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Rg||(Rg={}));const Og={x:{[rg.Backward]:!1,[rg.Forward]:!1},y:{[rg.Backward]:!1,[rg.Forward]:!1}};var Lg,jg;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Lg||(Lg={})),function(e){e.Optimized="optimized"}(jg||(jg={}));const Mg=new Map;function Fg(e,t){return dm(n=>e?n||("function"===typeof t?t(e):e):null,[t,e])}function Vg(e){let{callback:t,disabled:n}=e;const i=cm(t),s=(0,r.useMemo)(()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(i)},[n]);return(0,r.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function Ug(e){return new hg(Xm(e),e)}function zg(e,t,n){void 0===t&&(t=Ug);const[i,s]=(0,r.useState)(null);function o(){s(r=>{if(!e)return null;var i;if(!1===e.isConnected)return null!=(i=null!=r?r:n)?i:null;const s=t(e);return JSON.stringify(r)===JSON.stringify(s)?r:s})}const a=function(e){let{callback:t,disabled:n}=e;const i=cm(t),s=(0,r.useMemo)(()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(i)},[i,n]);return(0,r.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){o();break}}}}),l=Vg({callback:o});return lm(()=>{o(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())},[e]),i}const Bg=[];function qg(e,t){void 0===t&&(t=[]);const n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current=null},t),(0,r.useEffect)(()=>{const t=e!==jm;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?ym(e,n.current):jm}function Hg(e){return(0,r.useMemo)(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const Wg=[];function Kg(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return sm(t)?t:e}const Gg=[{sensor:Tg,options:{}},{sensor:xg,options:{}}],Qg={current:{}},Xg={draggable:{measure:Ym},droppable:{measure:Ym,strategy:Lg.WhileDragging,frequency:jg.Optimized},dragOverlay:{measure:Xm}};class Yg extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Jg={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Om},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xg,measureDroppableContainers:Om,windowRect:null,measuringScheduled:!1},$g={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Om,draggableNodes:new Map,over:null,measureDroppableContainers:Om},Zg=(0,r.createContext)($g),ev=(0,r.createContext)(Jg);function tv(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yg}}}function nv(e,t){switch(t.type){case Pm.DragStart:return c(c({},e),{},{draggable:c(c({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case Pm.DragMove:return null==e.draggable.active?e:c(c({},e),{},{draggable:c(c({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})});case Pm.DragEnd:case Pm.DragCancel:return c(c({},e),{},{draggable:c(c({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case Pm.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Yg(e.droppable.containers);return i.set(r,n),c(c({},e),{},{droppable:c(c({},e.droppable),{},{containers:i})})}case Pm.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Yg(e.droppable.containers);return o.set(n,c(c({},s),{},{disabled:i})),c(c({},e),{},{droppable:c(c({},e.droppable),{},{containers:o})})}case Pm.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Yg(e.droppable.containers);return s.delete(n),c(c({},e),{},{droppable:c(c({},e.droppable),{},{containers:s})})}default:return e}}function rv(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:s}=(0,r.useContext)(Zg),o=fm(i),a=fm(null==n?void 0:n.id);return(0,r.useEffect)(()=>{if(!t&&!i&&o&&null!=a){if(!bm(o))return;if(document.activeElement===o.target)return;const e=s.get(a);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Sm(e);if(t){t.focus();break}}})}},[i,t,s,a,o]),null}function iv(e,t){let{transform:n}=t,r=Wp(t,Cm);return null!=e&&e.length?e.reduce((e,t)=>t(c({transform:e},r)),n):n}const sv=(0,r.createContext)(c(c({},jm),{},{scaleX:1,scaleY:1}));var ov;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(ov||(ov={}));const av=(0,r.memo)(function(e){var t,n,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:d=Gg,collisionDetection:h=qm,measuring:f,modifiers:p}=e,m=Wp(e,Im);const g=(0,r.useReducer)(nv,void 0,tv),[v,y]=g,[b,w]=function(){const[e]=(0,r.useState)(()=>new Set),t=(0,r.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,r.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[x,k]=(0,r.useState)(ov.Uninitialized),S=x===ov.Initialized,{draggable:{active:E,nodes:_,translate:T},droppable:{containers:C}}=v,I=null!=E?_.get(E):null,N=(0,r.useRef)({initial:null,translated:null}),A=(0,r.useMemo)(()=>{var e;return null!=E?{id:E,data:null!=(e=null==I?void 0:I.data)?e:Qg,rect:N}:null},[E,I]),D=(0,r.useRef)(null),[R,P]=(0,r.useState)(null),[O,L]=(0,r.useState)(null),j=um(m,Object.values(m)),M=mm("DndDescribedBy",o),F=(0,r.useMemo)(()=>C.getEnabled(),[C]),V=(U=f,(0,r.useMemo)(()=>({draggable:c(c({},Xg.draggable),null==U?void 0:U.draggable),droppable:c(c({},Xg.droppable),null==U?void 0:U.droppable),dragOverlay:c(c({},Xg.dragOverlay),null==U?void 0:U.dragOverlay)}),[null==U?void 0:U.draggable,null==U?void 0:U.droppable,null==U?void 0:U.dragOverlay]));var U;const{droppableRects:z,measureDroppableContainers:B,measuringScheduled:q}=function(e,t){let{dragging:n,dependencies:i,config:s}=t;const[o,a]=(0,r.useState)(null),{frequency:l,measure:c,strategy:u}=s,d=(0,r.useRef)(e),h=function(){switch(u){case Lg.Always:return!1;case Lg.BeforeDragging:return n;default:return!n}}(),f=um(h),p=(0,r.useCallback)(function(e){void 0===e&&(e=[]),f.current||a(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[f]),m=(0,r.useRef)(null),g=dm(t=>{if(h&&!n)return Mg;if(!t||t===Mg||d.current!==e||null!=o){const t=new Map;for(let n of e){if(!n)continue;if(o&&o.length>0&&!o.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new hg(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,o,n,h,c]);return(0,r.useEffect)(()=>{d.current=e},[e]),(0,r.useEffect)(()=>{h||p()},[n,h]),(0,r.useEffect)(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),(0,r.useEffect)(()=>{h||"number"!==typeof l||null!==m.current||(m.current=setTimeout(()=>{p(),m.current=null},l))},[l,h,p,...i]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:null!=o}}(F,{dragging:S,dependencies:[T.x,T.y],config:V.droppable}),H=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return dm(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(_,E),W=(0,r.useMemo)(()=>O?wm(O):null,[O]),K=function(){const e=!1===(null==R?void 0:R.autoScrollEnabled),t="object"===typeof l?!1===l.enabled:!1===l,n=S&&!e&&!t;if("object"===typeof l)return c(c({},l),{},{enabled:n});return{enabled:n}}(),G=function(e,t){return Fg(e,t)}(H,V.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:i,config:s=!0}=e;const o=(0,r.useRef)(!1),{x:a,y:l}="boolean"===typeof s?{x:s,y:s}:s;lm(()=>{if(!a&&!l||!t)return void(o.current=!1);if(o.current||!i)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=Hm(n(e),i);if(a||(r.x=0),l||(r.y=0),o.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=$m(e);t&&t.scrollBy({top:r.y,left:r.x})}},[t,a,l,i,n])}({activeNode:null!=E?_.get(E):null,config:K.layoutShiftCompensation,initialRect:G,measure:V.draggable.measure});const Q=zg(H,V.draggable.measure,G),X=zg(H?H.parentElement:null),Y=(0,r.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=C.getNodeFor(null==(t=Y.current.over)?void 0:t.id),$=function(e){let{measure:t}=e;const[n,i]=(0,r.useState)(null),s=Vg({callback:(0,r.useCallback)(e=>{for(const{target:n}of e)if(sm(n)){i(e=>{const r=t(n);return e?c(c({},e),{},{width:r.width,height:r.height}):r});break}},[t])}),o=(0,r.useCallback)(e=>{const n=Kg(e);null==s||s.disconnect(),n&&(null==s||s.observe(n)),i(n?t(n):null)},[t,s]),[a,l]=hm(o);return(0,r.useMemo)(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}({measure:V.dragOverlay.measure}),Z=null!=(n=$.nodeRef.current)?n:H,ee=S?null!=(i=$.rect)?i:Q:null,te=Boolean($.nodeRef.current&&$.rect),ne=Hm(re=te?null:Q,Fg(re));var re;const ie=Hg(Z?rm(Z):null),se=function(e){const t=(0,r.useRef)(e),n=dm(n=>e?n&&n!==Bg&&e&&t.current&&e.parentNode===t.current.parentNode?n:Jm(e):Bg,[e]);return(0,r.useEffect)(()=>{t.current=e},[e]),n}(S?null!=J?J:H:null),oe=function(e,t){void 0===t&&(t=Xm);const[n]=e,i=Hg(n?rm(n):null),[s,o]=(0,r.useState)(Wg);function a(){o(()=>e.length?e.map(e=>ig(e)?i:new hg(t(e),e)):Wg)}const l=Vg({callback:a});return lm(()=>{null==l||l.disconnect(),a(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(se),ae=iv(p,{transform:{x:T.x-ne.x,y:T.y-ne.y,scaleX:1,scaleY:1},activatorEvent:O,active:A,activeNodeRect:Q,containerNodeRect:X,draggingNodeRect:ee,over:Y.current.over,overlayNodeRect:$.rect,scrollableAncestors:se,scrollableAncestorRects:oe,windowRect:ie}),le=W?vm(W,T):null,ce=function(e){const[t,n]=(0,r.useState)(null),i=(0,r.useRef)(e),s=(0,r.useCallback)(e=>{const t=Zm(e.target);t&&n(e=>e?(e.set(t,ng(t)),new Map(e)):null)},[]);return(0,r.useEffect)(()=>{const t=i.current;if(e!==t){r(t);const o=e.map(e=>{const t=Zm(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,ng(t)]):null}).filter(e=>null!=e);n(o.length?new Map(o):null),i.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=Zm(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),(0,r.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>vm(e,t),jm):cg(e):jm,[e,t])}(se),ue=qg(ce),de=qg(ce,[Q]),he=vm(ae,ue),fe=ee?Km(ee,ae):null,pe=A&&fe?h({active:A,collisionRect:fe,droppableRects:z,droppableContainers:F,pointerCoordinates:le}):null,me=function(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}(pe,"id"),[ge,ve]=(0,r.useState)(null),ye=function(e,t,n){return c(c({},e),{},{scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1})}(te?ae:vm(ae,de),null!=(s=null==ge?void 0:ge.rect)?s:null,Q),be=(0,r.useRef)(null),we=(0,r.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==D.current)return;const i=_.get(D.current);if(!i)return;const s=e.nativeEvent,o=new n({active:D.current,activeNode:i,event:s,options:r,context:Y,onAbort(e){if(!_.get(e))return;const{onDragAbort:t}=j.current,n={id:e};null==t||t(n),b({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!_.get(e))return;const{onDragPending:i}=j.current,s={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(s),b({type:"onDragPending",event:s})},onStart(e){const t=D.current;if(null==t)return;const n=_.get(t);if(!n)return;const{onDragStart:r}=j.current,i={activatorEvent:s,active:{id:t,data:n.data,rect:N}};(0,Zp.unstable_batchedUpdates)(()=>{null==r||r(i),k(ov.Initializing),y({type:Pm.DragStart,initialCoordinates:e,active:t}),b({type:"onDragStart",event:i}),P(be.current),L(s)})},onMove(e){y({type:Pm.DragMove,coordinates:e})},onEnd:a(Pm.DragEnd),onCancel:a(Pm.DragCancel)});function a(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=Y.current;let o=null;if(t&&i){const{cancelDrop:a}=j.current;if(o={activatorEvent:s,active:t,collisions:n,delta:i,over:r},e===Pm.DragEnd&&"function"===typeof a){await Promise.resolve(a(o))&&(e=Pm.DragCancel)}}D.current=null,(0,Zp.unstable_batchedUpdates)(()=>{y({type:e}),k(ov.Uninitialized),ve(null),P(null),L(null),be.current=null;const t=e===Pm.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=j.current[t];null==e||e(o),b({type:t,event:o})}})}}be.current=o},[_]),xe=(0,r.useCallback)((e,t)=>(n,r)=>{const i=n.nativeEvent,s=_.get(r);if(null!==D.current||!s||i.dndKit||i.defaultPrevented)return;const o={active:s};!0===e(n,t.options,o)&&(i.dndKit={capturedBy:t.sensor},D.current=r,we(n,t))},[_,we]),ke=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}(d,xe);!function(e){(0,r.useEffect)(()=>{if(!em)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(d),lm(()=>{Q&&x===ov.Initializing&&k(ov.Initialized)},[Q,x]),(0,r.useEffect)(()=>{const{onDragMove:e}=j.current,{active:t,activatorEvent:n,collisions:r,over:i}=Y.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:r,delta:{x:he.x,y:he.y},over:i};(0,Zp.unstable_batchedUpdates)(()=>{null==e||e(s),b({type:"onDragMove",event:s})})},[he.x,he.y]),(0,r.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=Y.current;if(!e||null==D.current||!t||!i)return;const{onDragOver:s}=j.current,o=r.get(me),a=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:a};(0,Zp.unstable_batchedUpdates)(()=>{ve(a),null==s||s(l),b({type:"onDragOver",event:l})})},[me]),lm(()=>{Y.current={activatorEvent:O,active:A,activeNode:H,collisionRect:fe,collisions:pe,droppableRects:z,draggableNodes:_,draggingNode:Z,draggingNodeRect:ee,droppableContainers:C,over:ge,scrollableAncestors:se,scrollAdjustedTranslate:he},N.current={initial:ee,translated:fe}},[A,H,pe,fe,_,Z,ee,z,C,ge,se,he]),Pg(c(c({},K),{},{delta:T,draggingRect:fe,pointerCoordinates:le,scrollableAncestors:se,scrollableAncestorRects:oe}));const Se=(0,r.useMemo)(()=>({active:A,activeNode:H,activeNodeRect:Q,activatorEvent:O,collisions:pe,containerNodeRect:X,dragOverlay:$,draggableNodes:_,droppableContainers:C,droppableRects:z,over:ge,measureDroppableContainers:B,scrollableAncestors:se,scrollableAncestorRects:oe,measuringConfiguration:V,measuringScheduled:q,windowRect:ie}),[A,H,Q,O,pe,X,$,_,C,z,ge,B,se,oe,V,q,ie]),Ee=(0,r.useMemo)(()=>({activatorEvent:O,activators:ke,active:A,activeNodeRect:Q,ariaDescribedById:{draggable:M},dispatch:y,draggableNodes:_,over:ge,measureDroppableContainers:B}),[O,ke,A,Q,y,M,_,ge,B]);return r.createElement(Nm.Provider,{value:w},r.createElement(Zg.Provider,{value:Ee},r.createElement(ev.Provider,{value:Se},r.createElement(sv.Provider,{value:ye},u)),r.createElement(rv,{disabled:!1===(null==a?void 0:a.restoreFocus)})),r.createElement(Rm,c(c({},a),{},{hiddenTextDescribedById:M})))}),lv=(0,r.createContext)(null),cv="button";function uv(e){let{id:t,data:n,disabled:i=!1,attributes:s}=e;const o=mm("Draggable"),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:f}=(0,r.useContext)(Zg),{role:p=cv,roleDescription:m="draggable",tabIndex:g=0}=null!=s?s:{},v=(null==c?void 0:c.id)===t,y=(0,r.useContext)(v?sv:lv),[b,w]=hm(),[x,k]=hm(),S=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e},{}),[e,t])}(a,t),E=um(n);lm(()=>(h.set(t,{id:t,key:o,node:b,activatorNode:x,data:E}),()=>{const e=h.get(t);e&&e.key===o&&h.delete(t)}),[h,t]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:(0,r.useMemo)(()=>({role:p,tabIndex:g,"aria-disabled":i,"aria-pressed":!(!v||p!==cv)||void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[i,p,g,v,m,d.draggable]),isDragging:v,listeners:i?void 0:S,node:b,over:f,setNodeRef:w,setActivatorNodeRef:k,transform:y}}function dv(){return(0,r.useContext)(ev)}const hv={timeout:25};function fv(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function pv(e,t){return e.reduce((e,n,r)=>{const i=t.get(n);return i&&(e[r]=i),e},Array(e.length))}function mv(e){return null!==e&&e>=0}const gv=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=fv(t,r,n),o=t[i],a=s[i];return a&&o?{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}:null},vv={scaleX:1,scaleY:1},yv=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=e;const a=null!=(t=s[n])?t:r;if(!a)return null;if(i===n){const e=s[o];return e?c({x:0,y:n<o?e.top+e.height-(a.top+a.height):e.top-a.top},vv):null}const l=function(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];if(!r)return 0;if(n<t)return i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0;return s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0}(s,i,n);return c(i>n&&i<=o?{x:0,y:-a.height-l}:i<n&&i>=o?{x:0,y:a.height+l}:{x:0,y:0},vv)};const bv="Sortable",wv=r.createContext({activeIndex:-1,containerId:bv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:gv,disabled:{draggable:!1,droppable:!1}});function xv(e){let{children:t,id:n,items:i,strategy:s=gv,disabled:o=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=dv(),h=mm(bv,n),f=Boolean(null!==l.rect),p=(0,r.useMemo)(()=>i.map(e=>"object"===typeof e&&"id"in e?e.id:e),[i]),m=null!=a,g=a?p.indexOf(a.id):-1,v=u?p.indexOf(u.id):-1,y=(0,r.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,y.current),w=-1!==v&&-1===g||b,x=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(o);lm(()=>{b&&m&&d(p)},[b,p,m,d]),(0,r.useEffect)(()=>{y.current=p},[p]);const k=(0,r.useMemo)(()=>({activeIndex:g,containerId:h,disabled:x,disableTransforms:w,items:p,overIndex:v,useDragOverlay:f,sortedRects:pv(p,c),strategy:s}),[g,h,x.draggable,x.droppable,w,p,v,c,f,s]);return r.createElement(wv.Provider,{value:k},t)}const kv=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return fv(n,r,i).indexOf(t)},Sv=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((a===s||i!==o)&&(!!n||o!==i&&t===l))},Ev={duration:200,easing:"ease"},_v="transform",Tv=xm.Transition.toString({property:_v,duration:0,easing:"linear"}),Cv={roleDescription:"sortable"};function Iv(e){let{animateLayoutChanges:t=Sv,attributes:n,disabled:i,data:s,getNewIndex:o=kv,id:a,strategy:l,resizeObserverConfig:u,transition:d=Ev}=e;const{items:h,containerId:f,activeIndex:p,disabled:m,disableTransforms:g,sortedRects:v,overIndex:y,useDragOverlay:b,strategy:w}=(0,r.useContext)(wv),x=function(e,t){var n,r;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(i,m),k=h.indexOf(a),S=(0,r.useMemo)(()=>c({sortable:{containerId:f,index:k,items:h}},s),[f,s,k,h]),E=(0,r.useMemo)(()=>h.slice(h.indexOf(a)),[h,a]),{rect:_,node:T,isOver:C,setNodeRef:I}=function(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:s}=e;const o=mm("Droppable"),{active:a,dispatch:l,over:u,measureDroppableContainers:d}=(0,r.useContext)(Zg),h=(0,r.useRef)({disabled:n}),f=(0,r.useRef)(!1),p=(0,r.useRef)(null),m=(0,r.useRef)(null),{disabled:g,updateMeasurementsFor:v,timeout:y}=c(c({},hv),s),b=um(null!=v?v:i),w=Vg({callback:(0,r.useCallback)(()=>{f.current?(null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),m.current=null},y)):f.current=!0},[y]),disabled:g||!a}),x=(0,r.useCallback)((e,t)=>{w&&(t&&(w.unobserve(t),f.current=!1),e&&w.observe(e))},[w]),[k,S]=hm(x),E=um(t);return(0,r.useEffect)(()=>{w&&k.current&&(w.disconnect(),f.current=!1,w.observe(k.current))},[k,w]),(0,r.useEffect)(()=>(l({type:Pm.RegisterDroppable,element:{id:i,key:o,disabled:n,node:k,rect:p,data:E}}),()=>l({type:Pm.UnregisterDroppable,key:o,id:i})),[i]),(0,r.useEffect)(()=>{n!==h.current.disabled&&(l({type:Pm.SetDroppableDisabled,id:i,key:o,disabled:n}),h.current.disabled=n)},[i,o,n,l]),{active:a,rect:p,isOver:(null==u?void 0:u.id)===i,node:k,over:u,setNodeRef:S}}({id:a,data:S,disabled:x.droppable,resizeObserverConfig:c({updateMeasurementsFor:E},u)}),{active:N,activatorEvent:A,activeNodeRect:D,attributes:R,setNodeRef:P,listeners:O,isDragging:L,over:j,setActivatorNodeRef:M,transform:F}=uv({id:a,data:S,attributes:c(c({},Cv),n),disabled:x.draggable}),V=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(I,P),U=Boolean(N),z=U&&!g&&mv(p)&&mv(y),B=!b&&L,q=B&&z?F:null,H=z?null!=q?q:(null!=l?l:w)({rects:v,activeNodeRect:D,activeIndex:p,overIndex:y,index:k}):null,W=mv(p)&&mv(y)?o({id:a,items:h,activeIndex:p,overIndex:y}):k,K=null==N?void 0:N.id,G=(0,r.useRef)({activeId:K,items:h,newIndex:W,containerId:f}),Q=h!==G.current.items,X=t({active:N,containerId:f,isDragging:L,isSorting:U,id:a,index:k,items:h,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:d,wasDragging:null!=G.current.activeId}),Y=function(e){let{disabled:t,index:n,node:i,rect:s}=e;const[o,a]=(0,r.useState)(null),l=(0,r.useRef)(n);return lm(()=>{if(!t&&n!==l.current&&i.current){const e=s.current;if(e){const t=Xm(i.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&a(n)}}n!==l.current&&(l.current=n)},[t,n,i,s]),(0,r.useEffect)(()=>{o&&a(null)},[o]),o}({disabled:!X,index:k,node:T,rect:_});return(0,r.useEffect)(()=>{U&&G.current.newIndex!==W&&(G.current.newIndex=W),f!==G.current.containerId&&(G.current.containerId=f),h!==G.current.items&&(G.current.items=h)},[U,W,f,h]),(0,r.useEffect)(()=>{if(K===G.current.activeId)return;if(null!=K&&null==G.current.activeId)return void(G.current.activeId=K);const e=setTimeout(()=>{G.current.activeId=K},50);return()=>clearTimeout(e)},[K]),{active:N,activeIndex:p,attributes:R,data:S,rect:_,index:k,newIndex:W,items:h,isOver:C,isSorting:U,isDragging:L,listeners:O,node:T,overIndex:y,over:j,setNodeRef:V,setActivatorNodeRef:M,setDroppableNodeRef:I,setDraggableNodeRef:P,transform:null!=Y?Y:H,transition:function(){if(Y||Q&&G.current.newIndex===k)return Tv;if(B&&!bm(A)||!d)return;if(U||X)return xm.Transition.toString(c(c({},d),{},{property:_v}));return}()}}gg.Down,gg.Right,gg.Up,gg.Left;const Nv=["item","onRemove","handleToggleTestCompletion","handleOpenFocusTest"],Av=r.memo(e=>{let{item:t,onRemove:n,handleToggleTestCompletion:r,handleOpenFocusTest:i}=e;Wp(e,Nv);const{attributes:s,listeners:o,setNodeRef:a,transform:l,transition:u,isDragging:d}=Iv({id:t.id}),h={transform:xm.Transform.toString(l),transition:u,opacity:d?.7:1,background:d?"#f0f0f0":void 0},f=(t.completed||(e=>{if(!e)return"#E5E7EB";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);"hsl(".concat(t%360,", 70%, 60%)")})(t.subject),"\n        flex items-center w-full p-4 rounded-lg border-l-4 transition-all duration-200 ease-in-out\n        ".concat(t.completed?"bg-green-100":"bg-gray-50"," hover:shadow-lg cursor-pointer\n    ")),p="\n        font-bold text-gray-800 text-md\n        ".concat(t.completed?"line-through text-gray-400":"","\n    ");return console.log("FocusItemCard item.testUrl:",t.testUrl),(0,Jp.jsx)("div",{ref:a,style:h,className:f.replace("border-l-4",""),children:(0,Jp.jsxs)("div",{className:"flex items-center w-full",children:[(0,Jp.jsx)("div",{className:"flex items-center justify-center mr-4 flex-shrink-0",children:(0,Jp.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t.subject,t.title,!t.completed)},className:"w-6 h-6 rounded-full border-2 ".concat(t.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-blue-500"," flex-shrink-0 flex items-center justify-center transition-colors duration-200"),"aria-label":t.completed?"Mark as incomplete":"Mark as complete",children:t.completed&&(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),t.link?(0,Jp.jsxs)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"flex-grow min-w-0 px-2 py-1 block focus:outline-none",tabIndex:0,"aria-label":"Open test for ".concat(t.title),style:{textDecoration:"none"},children:[(0,Jp.jsx)("h3",{className:p,title:t.title,children:t.title}),(0,Jp.jsx)("p",{className:"text-sm text-gray-500 truncate",children:t.subject}),(0,Jp.jsx)("div",{className:"flex items-center mt-2 text-xs space-x-4",children:t.mcqs>0&&(0,Jp.jsxs)("span",{className:"text-gray-600 flex items-center",children:[t.mcqs," MCQs"]})})]}):(0,Jp.jsxs)("div",{className:"flex-grow min-w-0 px-2 py-1",children:[(0,Jp.jsx)("h3",{className:p,title:t.title,children:t.title}),(0,Jp.jsx)("p",{className:"text-sm text-gray-500 truncate",children:t.subject}),(0,Jp.jsx)("div",{className:"flex items-center mt-2 text-xs space-x-4",children:t.mcqs>0&&(0,Jp.jsxs)("span",{className:"text-gray-600 flex items-center",children:[t.mcqs," MCQs"]})})]}),(0,Jp.jsx)("div",{className:"flex flex-col items-center space-y-1 ml-2 flex-shrink-0",children:(0,Jp.jsx)("button",{className:"p-1.5 rounded-full text-gray-400 hover:text-red-600 hover:bg-gray-100",onClick:e=>{e.stopPropagation(),n(t.id)},"aria-label":"Remove from focus",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Jp.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})}),(0,Jp.jsx)("span",c(c(c({},s),o),{},{className:"drag-handle flex items-center justify-center rounded-md ml-2 flex-shrink-0",style:{cursor:"grab",width:36,height:36,touchAction:"none",background:"none"},"aria-label":"Drag to reorder",tabIndex:0,children:(0,Jp.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#6B7280",children:(0,Jp.jsx)("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})})}))]})})}),Dv=Av,Rv=r.memo(()=>(0,Jp.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-500",children:[(0,Jp.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Jp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Jp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Jp.jsx)("p",{children:"Loading..."})]})),Pv=r.memo(e=>{let{percentage:t}=e;const n=2*Math.PI*15.9155,r=n-t/100*n;return(0,Jp.jsxs)("div",{className:"relative w-20 h-20",children:[(0,Jp.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,Jp.jsx)("path",{className:"text-green-200",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",strokeWidth:"3",stroke:"currentColor"}),(0,Jp.jsx)("path",{className:"progress-ring__circle text-green-500",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",strokeWidth:"3",strokeLinecap:"round",stroke:"currentColor",style:{strokeDasharray:"".concat(n," ").concat(n),strokeDashoffset:r}})]}),(0,Jp.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-xl font-bold text-green-600",children:[Math.round(t),"%"]})]})}),Ov=e=>{let{day:t,planned:n,completed:r,missed:i,isToday:s}=e;const o=n>0?r/n*100:0,a=n>0?i/n*100:0;return(0,Jp.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,Jp.jsxs)("div",{className:"relative",children:[(0,Jp.jsxs)("div",{className:"absolute bottom-full mb-2 w-max px-2 py-1 text-xs text-white bg-gray-800 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r,"/",n," Done, ",i," Missed"]}),(0,Jp.jsxs)("div",{className:"group h-28 w-6 bg-gray-200 rounded-full flex flex-col justify-end overflow-hidden",children:[(0,Jp.jsx)("div",{className:"bg-red-400 transition-all duration-500",style:{height:"".concat(a,"%")}}),(0,Jp.jsx)("div",{className:"bg-cyan-400 transition-all duration-500",style:{height:"".concat(o,"%")}})]})]}),(0,Jp.jsx)("p",{className:"text-sm font-semibold ".concat(s?"text-cyan-500":"text-gray-500"),children:t})]})},Lv=r.memo(e=>{let{weeklyData:t}=e;const n=t.reduce((e,t)=>e+t.completed,0),r=t.reduce((e,t)=>e+t.missed,0);return(0,Jp.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm mb-6",children:[(0,Jp.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Jp.jsxs)("div",{children:[(0,Jp.jsx)("h3",{className:"text-gray-500 text-sm",children:"Overall"}),(0,Jp.jsxs)("p",{className:"text-3xl font-bold text-gray-800",children:[n," ",(0,Jp.jsx)("span",{className:"text-lg font-medium text-gray-600",children:"Completed"})]}),(0,Jp.jsxs)("p",{className:"text-red-500 text-lg font-bold",children:[r," ",(0,Jp.jsx)("span",{className:"font-medium",children:"Missed"})]})]}),(0,Jp.jsxs)("div",{className:"flex flex-col items-end space-y-1 text-sm",children:[(0,Jp.jsxs)("div",{className:"flex items-center",children:[(0,Jp.jsx)("span",{className:"w-3 h-3 rounded-full bg-gray-200 mr-2"}),(0,Jp.jsx)("span",{children:"Planned"})]}),(0,Jp.jsxs)("div",{className:"flex items-center",children:[(0,Jp.jsx)("span",{className:"w-3 h-3 rounded-full bg-cyan-400 mr-2"}),(0,Jp.jsx)("span",{children:"Completed"})]}),(0,Jp.jsxs)("div",{className:"flex items-center",children:[(0,Jp.jsx)("span",{className:"w-3 h-3 rounded-full bg-red-400 mr-2"}),(0,Jp.jsx)("span",{children:"Missed"})]})]})]}),(0,Jp.jsx)("div",{className:"flex justify-around",children:t.map(e=>(0,Jp.jsx)(Ov,{day:e.day,planned:e.planned,completed:e.completed,missed:e.missed,isToday:e.isToday},e.day))})]})}),jv=Lv,Mv=e=>{let{test:t,subject:n,isAdded:r,onAdd:i,onRemove:s,handleToggleTestCompletion:o}=e;const a="\n        flex items-center justify-between p-3 rounded-xl border transition-all duration-300\n        ".concat(t.completed?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:shadow-md","\n    "),l="\n        font-semibold\n        ".concat(t.completed?"line-through text-gray-500":"text-gray-800","\n    "),c="\n        text-sm\n        ".concat(t.completed?"text-gray-400":"text-gray-500","\n    ");return(0,Jp.jsxs)("div",{id:"available-test-".concat(t.id),className:a,children:[(0,Jp.jsxs)("div",{className:"flex items-center flex-grow mr-2",children:[(0,Jp.jsx)("button",{onClick:e=>{e.stopPropagation(),o(n,t.title,!t.completed)},className:"w-6 h-6 rounded-md border-2 ".concat(t.completed?"bg-green-500 border-green-500":"border-gray-300"," mr-3 flex-shrink-0 flex items-center justify-center transition-colors"),"aria-label":t.completed?"Mark as incomplete":"Mark as complete",children:t.completed&&(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Jp.jsxs)("div",{className:"truncate",children:[(0,Jp.jsx)("h4",{className:l,children:t.title}),(0,Jp.jsx)("p",{className:c,children:n})]})]}),(0,Jp.jsx)("button",{onClick:r?e=>{e.stopPropagation();const n={id:t.id};n&&s(n.id)}:e=>{e.stopPropagation(),i(t,n)},className:"flex-shrink-0 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors duration-200\n                    ".concat(r?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:r?"Remove":"Add"})]})},Fv=e=>{let{isOpen:t,onClose:n,testData:i,todayFocusItems:s,addFocusItem:o,removeFocusItem:a,handleToggleTestCompletion:l}=e;const[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&(d(""),f(""))},[t]);const p=(0,r.useMemo)(()=>Object.keys(i).flatMap(e=>i[e].map(t=>c(c({},t),{},{subject:e,id:"".concat(e,"-").concat(t.title)}))),[i]),m=(0,r.useMemo)(()=>p.filter(e=>{const t=""===h||e.subject===h,n=e.title.toLowerCase().includes(u.toLowerCase())||e.subject.toLowerCase().includes(u.toLowerCase());return t&&n}),[p,h,u]),g=Object.keys(i);return t?(0,Jp.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Jp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100 flex flex-col",style:{maxHeight:"85vh"},children:[(0,Jp.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200",children:[(0,Jp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Add to Today's Focus"}),(0,Jp.jsx)("button",{onClick:n,className:"p-2 rounded-full text-gray-500 hover:bg-gray-200 transition-colors","aria-label":"Close modal",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Jp.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,Jp.jsxs)("div",{className:"mb-4",children:[(0,Jp.jsx)("label",{htmlFor:"select-available-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Subject:"}),(0,Jp.jsxs)("select",{id:"select-available-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:h,onChange:e=>f(e.target.value),children:[(0,Jp.jsx)("option",{value:"",children:"All Subjects"}),g.map(e=>(0,Jp.jsx)("option",{value:e,children:e},e))]})]}),(0,Jp.jsx)("div",{className:"mb-4",children:(0,Jp.jsx)("input",{type:"text",placeholder:"Search available tests...",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:u,onChange:e=>d(e.target.value),"aria-label":"Search available tests"})}),(0,Jp.jsx)("div",{id:"available-tests-list",className:"space-y-3 pr-2 -mr-2 overflow-y-auto flex-grow",children:0===m.length?(0,Jp.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No tests available matching your filters."}):m.map(e=>{const t=s.some(t=>t.id===e.id||t.subject===e.subject&&t.title===e.title);return(0,Jp.jsx)(Mv,{test:e,subject:e.subject,isAdded:t,onAdd:o,onRemove:a,handleToggleTestCompletion:l},e.id)})}),(0,Jp.jsx)("div",{className:"mt-6 flex justify-end pt-4 border-t border-gray-200",children:(0,Jp.jsx)("button",{onClick:n,className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Done"})})]})}):null},Vv=r.memo(e=>{let{testData:t,timetableEntries:n,todayFocusItems:i,addFocusItem:s,removeFocusItem:o,reorderFocusItems:a,onNavigate:l,userName:u,handleToggleTestCompletion:d,isLoadingTodayFocus:h,currentTimetableSubject:f,setCurrentTimetableSubject:p,setCurrentSelectedSubject:m,navigateToTrophyPage:g}=e;const[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)([]);(0,r.useEffect)(()=>{w(i.map((e,t)=>c(c({},e),{},{order:void 0!==e.order?e.order:t})))},[i]);const x=(0,r.useMemo)(()=>{if(!n)return[];const e=["Su","Mo","Tu","We","Th","Fr","Sa"],t=[],r=new Date,i=r.toLocaleDateString("en-CA"),s=new Date(r);s.setHours(0,0,0,0),s.setDate(r.getDate()-r.getDay());for(let o=0;o<7;o++){const r=new Date(s);r.setDate(s.getDate()+o);const a=r.toLocaleDateString("en-CA"),l=n.filter(e=>e.date===a);let c=0,u=0;const d=new Date;l.forEach(e=>{if(e.checked)c++;else{new Date("".concat(e.date,"T").concat(e.time))<d&&u++}}),t.push({day:e[r.getDay()],planned:l.length,completed:c,missed:u,isToday:a===i})}return t},[n]),k=Object.keys(t),S=(()=>{const e=t[f]||[],n=e.length,r=e.filter(e=>e.completed).length;return n>0?r/n*100:0})(),E=t[f]?t[f].filter(e=>e.completed).length:0,_=t[f]?t[f].length:0,T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(Lm(Tg,{activationConstraint:{distance:5}}),Lm(Ag,{activationConstraint:{delay:100,tolerance:5}}),Lm(xg)),C=(0,r.useCallback)(e=>{d(e)},[d]);return(0,Jp.jsxs)(Jp.Fragment,{children:[(0,Jp.jsxs)("div",{id:"page-dashboard",className:"page px-6 py-8",children:[(0,Jp.jsxs)("div",{className:"flex items-center gap-4 mb-8 cursor-pointer transition-colors duration-300",onClick:()=>l("profile"),children:[(0,Jp.jsx)("img",{src:"https://placehold.co/80x80/E2E8F0/4A5568?text=NK",alt:"User Avatar",className:"w-16 h-16 rounded-full"}),(0,Jp.jsxs)("div",{children:[(0,Jp.jsxs)("h2",{className:"text-2xl text-gray-600",children:["Hello ",(0,Jp.jsx)("span",{className:"font-bold text-gray-800",children:"Nikhil !"})]}),(0,Jp.jsx)($p,{userName:u||"User"})]})]}),(0,Jp.jsx)("header",{className:"flex items-center justify-between mb-2",children:(0,Jp.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Weekly Performance"})}),(0,Jp.jsx)("p",{className:"text-gray-500 mb-6",children:"Your progress for this week..."}),(0,Jp.jsx)("div",{className:"mb-10",children:(0,Jp.jsx)(jv,{weeklyData:x})}),(0,Jp.jsx)("header",{className:"flex items-center justify-between ",children:(0,Jp.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Subject Progress"})}),(0,Jp.jsx)("p",{className:"text-gray-500 mb-6",children:"Track completed tests for a specific subject."}),(0,Jp.jsxs)("div",{className:"mb-6",children:[(0,Jp.jsx)("label",{htmlFor:"select-timetable-subject",className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Subject:"}),(0,Jp.jsxs)("select",{id:"select-timetable-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:e=>{const t=e.target.value;p(t),m(t),localStorage.setItem("currentTimetableSubject",t)},disabled:0===k.length,children:[0===k.length&&(0,Jp.jsx)("option",{value:"",children:"No Subjects Available"}),k.map(e=>(0,Jp.jsx)("option",{value:e,children:e},e))]})]}),(0,Jp.jsxs)("div",{id:"timetable-progress-card",onClick:()=>g(f),className:"rounded-xl border p-5 flex items-center justify-between mb-10 cursor-pointer transition-colors duration-300 shadow-sm",children:[(0,Jp.jsx)(Pv,{percentage:S}),(0,Jp.jsxs)("div",{className:"flex-1 ml-4",children:[(0,Jp.jsx)("p",{className:"text-sm text-gray-500",children:"Subject"}),(0,Jp.jsx)("p",{id:"timetable-progress-subject",className:"text-xl font-bold text-gray-800",children:f||"Select Subject"}),(0,Jp.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Tests Completed"}),(0,Jp.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[E,"/",_]})]}),(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Jp.jsx)("polyline",{points:"9 18 15 12 9 6"})})]}),(0,Jp.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,Jp.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Today's Focus"}),(0,Jp.jsxs)("button",{onClick:()=>y(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,Jp.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Jp.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Edit Focus"]})]}),(0,Jp.jsx)("p",{className:"text-gray-500 mb-6",children:"Your tests for today..."}),(0,Jp.jsx)("div",{id:"today-focus-container",className:"flex flex-col space-y-4 pb-4",children:h?(0,Jp.jsx)(Rv,{}):0===b.length?(0,Jp.jsx)("p",{className:"text-gray-500 text-center w-full",children:'No focus items for today. Click "Edit Focus" to add some.'}):(0,Jp.jsx)(av,{sensors:T,collisionDetection:zm,onDragEnd:e=>{const{active:t,over:n}=e;if(t.id!==n.id){const e=i.findIndex(e=>e.id===t.id),r=i.findIndex(e=>e.id===n.id),s=fv(i,e,r);a(s)}},children:(0,Jp.jsx)(xv,{items:i.map(e=>e.id),strategy:yv,children:i.map(e=>(0,Jp.jsx)(Dv,{item:e,onRemove:o,handleToggleTestCompletion:d,onCheck:C,isFirst:0===b.indexOf(e),isLast:b.indexOf(e)===b.length-1},e.id))})})})]}),(0,Jp.jsx)(Fv,{isOpen:v,onClose:()=>y(!1),testData:t,todayFocusItems:i,addFocusItem:s,removeFocusItem:o})]})}),Uv=Vv,zv=r.memo(e=>{let{events:t,isEditMode:n,onDelete:i,onCheck:s,onEdit:o,selectedCalendarDate:a,onSelectCalendarDate:l}=e;const c=r.useMemo(()=>[...t].sort((e,t)=>{const n=e.time.localeCompare(t.time);return 0!==n?n:e.checked===t.checked?0:e.checked?1:-1}),[t]);return(0,Jp.jsxs)("div",{className:"w-full",children:[(0,Jp.jsxs)("div",{className:"flex items-center justify-between px-0 py-6 text-gray-700 font-semibold text-lg",children:[(0,Jp.jsx)("button",{onClick:()=>{const e=new Date(a);e.setDate(e.getDate()-1),l(e)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Previous day",children:(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Jp.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,Jp.jsx)("span",{className:"flex-grow text-center text-lg sm:text-base",children:(u=a,u.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),(0,Jp.jsx)("button",{onClick:()=>{const e=new Date(a);e.setDate(e.getDate()+1),l(e)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Next day",children:(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Jp.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]}),0===c.length?(0,Jp.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No events scheduled for this date."}):c.map(e=>{const t=((e,t,n)=>{if(n)return{text:"Completed",colorClass:"text-green-600"};const r=new Date;return new Date("".concat(e,"T").concat(t))<r?{text:"Missed",colorClass:"text-red-600"}:{text:"Pending",colorClass:"text-yellow-600"}})(e.date,e.time,e.checked);return(0,Jp.jsxs)("div",{className:"flex justify-between items-center p-4 mb-3 rounded-xl shadow-sm border ".concat(e.checked?"bg-green-100 border-green-300":"bg-white border-gray-200"),children:[(0,Jp.jsxs)("div",{children:[(0,Jp.jsx)("p",{className:"text-sm text-gray-500",children:e.time}),(0,Jp.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:e.subject}),(0,Jp.jsx)("h4",{className:"text-base text-gray-600",children:e.topic}),(0,Jp.jsx)("p",{className:"text-sm font-semibold ".concat(t.colorClass),children:t.text})]}),(0,Jp.jsx)("div",{className:"flex items-center",children:n?(0,Jp.jsxs)(Jp.Fragment,{children:[(0,Jp.jsx)("button",{onClick:()=>o(e.id),className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Edit event",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Jp.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,Jp.jsx)("button",{onClick:()=>i(e.id),className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 mr-2","aria-label":"Delete event",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M3 6h18"}),(0,Jp.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,Jp.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,Jp.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,Jp.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}):(0,Jp.jsx)("button",{onClick:()=>s(e.id),className:"w-6 h-6 rounded-full border-2 ".concat(e.checked?"bg-green-500 border-green-500":"border-gray-300"),"aria-label":e.checked?"Mark as incomplete":"Mark as complete",children:e.checked&&(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white m-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]},e.id)})]});var u}),Bv=zv,qv=e=>{let{isOpen:t,onClose:n,eventData:i,onUpdateEvent:s,showNotification:o}=e;const[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&(l(i.subject||""),u(i.topic||""),h(i.date||""),p(i.time||""))},[i]);return t?(0,Jp.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Jp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative",children:[(0,Jp.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Study Event"}),(0,Jp.jsxs)("div",{className:"mb-3",children:[(0,Jp.jsx)("label",{htmlFor:"edit-modal-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,Jp.jsx)("input",{type:"text",id:"edit-modal-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Anatomy",value:a,onChange:e=>l(e.target.value)})]}),(0,Jp.jsxs)("div",{className:"mb-3",children:[(0,Jp.jsx)("label",{htmlFor:"edit-modal-topic",className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),(0,Jp.jsx)("input",{type:"text",id:"edit-modal-topic",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Cardiovascular System",value:c,onChange:e=>u(e.target.value)})]}),(0,Jp.jsxs)("div",{className:"mb-3",children:[(0,Jp.jsx)("label",{htmlFor:"edit-modal-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,Jp.jsx)("input",{type:"date",id:"edit-modal-date",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:d,onChange:e=>h(e.target.value)})]}),(0,Jp.jsxs)("div",{className:"mb-4",children:[(0,Jp.jsx)("label",{htmlFor:"edit-modal-time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),(0,Jp.jsx)("input",{type:"time",id:"edit-modal-time",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:f,onChange:e=>p(e.target.value)})]}),(0,Jp.jsx)("button",{onClick:async()=>{i&&i.id?a&&c&&d&&f?(await s(i.id,a,c,d,f),n()):o("All fields are required.","error"):o("No event selected for editing.","error")},className:"w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Update Event"}),(0,Jp.jsx)("button",{onClick:n,className:"w-full mt-2 bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"})]})}):null},Hv={},Wv=e=>{let{isOpen:t,onClose:n,onSave:i,title:s,fields:o,initialState:a=Hv,showNotification:l}=e;const[u,d]=(0,r.useState)({});(0,r.useEffect)(()=>{if(t){const e=o.reduce((e,t)=>(e[t.name]=a[t.name]||t.defaultValue||"",e),{});d(e)}else d({})},[t,o,a]);const h=e=>{const{name:t,value:n}=e.target;d(e=>c(c({},e),{},{[t]:n}))};return t?(0,Jp.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Jp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100",children:[(0,Jp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:s}),(0,Jp.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,Jp.jsxs)("div",{className:"flex flex-col",children:[(0,Jp.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,Jp.jsx)("span",{className:"text-red-500",children:"*"})]}),"textarea"===e.type?(0,Jp.jsx)("textarea",{id:e.name,name:e.name,placeholder:e.placeholder||"",value:u[e.name]||"",onChange:h,disabled:e.disabled||!1,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"}):"select"===e.type?(0,Jp.jsx)("select",{id:e.name,name:e.name,value:u[e.name]||"",onChange:h,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200",children:e.options&&e.options.map(e=>(0,Jp.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,Jp.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,placeholder:e.placeholder||"",value:u[e.name]||"",onChange:h,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"})]},e.name))}),(0,Jp.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Jp.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"}),(0,Jp.jsx)("button",{onClick:()=>{for(const e of o)if(e.required&&!u[e.name])return void(l?l("".concat(e.label," is required."),"error"):console.error("".concat(e.label," is required.")));i(u),n()},className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Save"})]})]})}):null},Kv=e=>{const t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},Gv=r.memo(e=>{let{timetableEntries:t,addTimetableEntry:n,deleteTimetableEntry:i,onCheck:s,showNotification:o,userId:a}=e;const[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(Kv(new Date)),y=(0,r.useCallback)(e=>{const n=t.find(t=>t.id===e);n&&(m(n),f(!0))},[t]),b=(0,r.useCallback)(async(e,t,n,r,i)=>{await Xp(a,o,e,t,n,r,i),m(null),f(!1)},[a,o]),w=(0,r.useMemo)(()=>{const e=new Date(g),t=6e4*e.getTimezoneOffset();return new Date(e.getTime()+t)},[g]),x=(0,r.useMemo)(()=>t.filter(e=>e.date===g),[t,g]),k=(0,r.useMemo)(()=>[{name:"subject",label:"Subject",placeholder:"e.g., Anatomy",required:!0},{name:"topic",label:"Topic",placeholder:"e.g., Cardiovascular System",required:!0},{name:"date",label:"Date",type:"date",required:!0,defaultValue:g},{name:"time",label:"Time",type:"time",required:!0,defaultValue:"09:00"}],[g]),S=(0,r.useCallback)(e=>{v(Kv(e))},[]);return(0,Jp.jsxs)(Jp.Fragment,{children:[(0,Jp.jsxs)("div",{id:"page-timetable",className:"page px-6 py-8",children:[(0,Jp.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,Jp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable"}),(0,Jp.jsxs)("button",{onClick:()=>c(!l),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center","aria-label":l?"Done editing timetable":"Edit timetable",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,Jp.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Jp.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),l?"Done":"Edit"]})]}),(0,Jp.jsx)("p",{className:"text-gray-500 mb-2",children:"Upcoming Study Schedule"}),(0,Jp.jsx)("div",{id:"timetable-events-list",className:"space-y-4 bg-white rounded-lg min-h-[100px]",children:(0,Jp.jsx)(Bv,{events:x,isEditMode:l,onDelete:i,onCheck:s,onEdit:y,selectedCalendarDate:w,onSelectCalendarDate:S})}),(0,Jp.jsxs)("button",{onClick:()=>d(!0),className:"w-full bg-blue-50 text-blue-700 font-semibold mt-6 py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300 mb-6",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[(0,Jp.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Jp.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Study Event"]})]}),(0,Jp.jsx)(Wv,{isOpen:u,onClose:()=>d(!1),onSave:e=>{n(e.subject,e.topic,e.date,e.time)},title:"Add New Study Event",fields:k,showNotification:o}),(0,Jp.jsx)(qv,{isOpen:h,onClose:()=>f(!1),eventData:p,onUpdateEvent:b,showNotification:o})]})}),Qv=Gv,Xv=r.memo(e=>{let{test:t,subject:n,isEditMode:r,onDelete:i,handleToggleTestCompletion:s}=e;const o=t.link&&!r?"cursor-pointer hover:shadow-md hover:-translate-y-1":"",a="".concat("relative p-4 rounded-lg flex justify-between items-center transition-all duration-300 shadow-sm"," ").concat(t.completed?"bg-green-50":"bg-white border border-gray-200"," ").concat(o);return(0,Jp.jsxs)("div",{id:"trophy-test-item-".concat(n,"-").concat(t.title),className:a,onClick:()=>{!r&&t.link&&t.link.startsWith("http")?window.open(t.link,"_blank"):t.link&&console.warn("Invalid link for ".concat(t.title,": ").concat(t.link,". Must start with http:// or https://"))},children:[(0,Jp.jsxs)("div",{className:"flex items-center flex-grow min-w-0",children:[(0,Jp.jsx)("button",{onClick:e=>{e.stopPropagation(),s(n,t.title,!t.completed)},className:"flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors duration-200 ".concat(t.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-400"," mr-4"),"aria-label":t.completed?"Mark as incomplete":"Mark as complete",children:t.completed&&(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Jp.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Jp.jsx)("div",{className:"flex items-center gap-2",children:(0,Jp.jsx)("h4",{className:"font-semibold truncate ".concat(t.completed?"text-gray-800":"text-orange-600"),children:t.title})}),(0,Jp.jsxs)("p",{className:"text-sm mt-1 ".concat((t.completed,"text-gray-600")),children:[t.mcqs," MCQs"]}),(0,Jp.jsxs)("p",{className:"text-xs mt-1 ".concat(t.completed?"text-green-600":"text-gray-600"),children:["Added on ",t.date]})]})]}),(0,Jp.jsx)("div",{className:"flex-shrink-0 ml-2",children:r?(0,Jp.jsx)("button",{className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-100 transition-colors duration-200",onClick:e=>{e.stopPropagation(),i(n,t.title)},"aria-label":"Delete test",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M3 6h18"}),(0,Jp.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,Jp.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,Jp.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,Jp.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}):t.link&&(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:(0,Jp.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})}),Yv=Xv,Jv=r.memo(e=>{let{testData:t,currentSelectedSubject:n,setCurrentSelectedSubject:i,addTest:s,deleteTest:o,handleToggleTestCompletion:a,showNotification:l}=e;const[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),m=(0,r.useMemo)(()=>Object.keys(t),[t]);(0,r.useEffect)(()=>{!(m.length>0)||n&&m.includes(n)?0===m.length&&""!==n&&i(""):i(m[0])},[m,n,i]);const g=n&&t[n]?t[n].filter(e=>e.title.toLowerCase().includes(f.toLowerCase())):[];return(0,Jp.jsxs)(Jp.Fragment,{children:[(0,Jp.jsxs)("div",{id:"page-trophy",className:"page px-6 py-8",children:[(0,Jp.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,Jp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tests"}),(0,Jp.jsxs)("button",{onClick:()=>u(!c),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center","aria-label":c?"Done editing tests":"Edit tests",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,Jp.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,Jp.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),c?"Done":"Edit"]})]}),(0,Jp.jsx)("p",{className:"text-gray-500 mb-6",children:"Completed Tests & Progress"}),(0,Jp.jsx)("div",{className:"mb-6",children:(0,Jp.jsx)("input",{type:"text",placeholder:"Search tests...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:f,onChange:e=>p(e.target.value),"aria-label":"Search tests"})}),(0,Jp.jsx)("div",{className:"flex space-x-3 mb-6 overflow-x-auto no-scrollbar",id:"subject-filters-container",children:m.map(e=>{var r,s;return(0,Jp.jsxs)("button",{className:"subject-filter flex-shrink-0 text-left p-3 rounded-lg transition-colors duration-200 shadow-sm\n                                ".concat(n===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>i(e),children:[(0,Jp.jsx)("p",{className:"font-bold",children:e}),(0,Jp.jsxs)("p",{className:"text-sm ".concat(n===e?"opacity-80":"text-gray-500"),children:[(null===(r=t[e])||void 0===r?void 0:r.length)||0," Test",1===(null===(s=t[e])||void 0===s?void 0:s.length)?"":"s"]})]},e)})}),(0,Jp.jsxs)("button",{onClick:()=>{h(!0)},className:"w-full bg-blue-50 text-blue-700 font-semibold py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300 mb-6",disabled:!n,children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,Jp.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Jp.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Test to ".concat(n||"...")]}),(0,Jp.jsx)("div",{id:"test-list-container",className:"space-y-3",children:0===g.length?(0,Jp.jsxs)("p",{className:"text-gray-500 text-center py-4",children:["No tests available for ",n,"."]}):g.map(e=>(0,Jp.jsx)(Yv,{test:e,subject:n,isEditMode:c,onDelete:o,handleToggleTestCompletion:a},e.title))})]}),(0,Jp.jsx)(Wv,{isOpen:d,onClose:()=>h(!1),onSave:e=>{s(n,e.title,e.mcqs,e.date,e.link)},title:"Add New Test to ".concat(n),fields:[{name:"title",label:"Test Title",placeholder:"e.g., Mid-term Exam",required:!0},{name:"mcqs",label:"Number of MCQs",type:"number",placeholder:"e.g., 40",required:!0},{name:"date",label:"Completion Date",type:"date",required:!0},{name:"link",label:"Test Link (Optional)",type:"url",placeholder:"https://example.com/test"}],showNotification:l})]})}),$v=Jv,Zv=r.memo(e=>{let{subjectName:t,tests:n,onDeleteSubject:r,onDeleteTest:i,isExpanded:s,onToggleExpand:o}=e;return(0,Jp.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[(0,Jp.jsxs)("div",{className:"flex justify-between items-center mb-3 cursor-pointer",onClick:()=>o(t),children:[(0,Jp.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:t}),(0,Jp.jsxs)("div",{className:"flex items-center",children:[(0,Jp.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t)},className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 mr-2","aria-label":"Delete subject",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M3 6h18"}),(0,Jp.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,Jp.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,Jp.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,Jp.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 transform transition-transform duration-200 ".concat(s?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Jp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s&&(0,Jp.jsx)("div",{className:"space-y-2 pt-2 border-t border-gray-100",children:0===n.length?(0,Jp.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No tests in this subject."}):n.map(e=>(0,Jp.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-md border border-gray-200 text-sm",children:[(0,Jp.jsxs)("span",{children:[e.title," (",e.mcqs," MCQs, ",e.date,")"]}),(0,Jp.jsx)("button",{onClick:n=>{n.stopPropagation(),i(t,e.title)},className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 ml-2","aria-label":"Delete test",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M3 6h18"}),(0,Jp.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,Jp.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,Jp.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,Jp.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},e.title))})]})}),ey=r.memo(e=>{let{testData:t,addSubject:n,addTest:i,deleteSubject:s,deleteTest:o,onBackToProfile:a,showNotification:l}=e;const[u,d]=(0,r.useState)({}),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)({title:"",fields:[],onSave:()=>{}}),g=(0,r.useMemo)(()=>Object.keys(t),[t]),v=(0,r.useCallback)(e=>{d(t=>c(c({},t),{},{[e]:!t[e]}))},[]);return(0,Jp.jsxs)(Jp.Fragment,{children:[(0,Jp.jsxs)("div",{id:"page-manage-tests",className:"page px-6 py-8",children:[(0,Jp.jsxs)("header",{className:"flex items-center justify-between mb-6",children:[(0,Jp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Content"}),(0,Jp.jsx)("button",{onClick:a,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Done"})]}),(0,Jp.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Jp.jsxs)("button",{onClick:()=>{m({title:"Add New Subject",fields:[{name:"subjectName",label:"Subject Name",placeholder:"e.g., Biochemistry",required:!0}],onSave:e=>{n(e.subjectName),d(t=>c(c({},t),{},{[e.subjectName]:!0}))}}),f(!0)},className:"w-full bg-green-50 text-green-700 font-semibold py-2 px-4 rounded-lg flex items-center justify-center hover:bg-green-100 transition duration-300",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,Jp.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Jp.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Subject"]}),(0,Jp.jsxs)("button",{onClick:()=>{m({title:"Add New Test",fields:[{name:"subject",label:"Select Subject",type:"select",required:!0,options:g.map(e=>({value:e,label:e})),defaultValue:g[0]||""},{name:"title",label:"Test Title",placeholder:"e.g., Final Exam",required:!0},{name:"mcqs",label:"Number of MCQs",type:"number",placeholder:"e.g., 50",required:!0},{name:"date",label:"Date",type:"date",required:!0},{name:"link",label:"Test Link (Optional)",type:"url",placeholder:"https://example.com/test"}],onSave:e=>{i(e.subject,e.title,e.mcqs,e.date,e.link),d(t=>c(c({},t),{},{[e.subject]:!0}))}}),f(!0)},className:"w-full bg-blue-50 text-blue-700 font-semibold py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300",disabled:0===g.length,children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,Jp.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Jp.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Test"]})]}),(0,Jp.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Existing Content"}),(0,Jp.jsx)("div",{id:"manage-content-list",className:"space-y-4",children:0===g.length?(0,Jp.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No subjects available. Add a new subject to get started."}):g.map(e=>(0,Jp.jsx)(Zv,{subjectName:e,tests:t[e],onDeleteSubject:s,onDeleteTest:o,isExpanded:u[e],onToggleExpand:v},e))})]}),(0,Jp.jsx)(Wv,{isOpen:h,onClose:()=>f(!1),onSave:p.onSave,title:p.title,fields:p.fields,showNotification:l})]})}),ty=ey,ny=r.memo(e=>{let{testData:t,todayFocusItems:n,timetableEntries:i,onManageContent:s,onLogout:o,currentUserId:a,userName:l,userEmail:u,showNotification:d,onResetLocalData:h}=e;const[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null);return(0,Jp.jsxs)("div",{id:"page-profile",className:"page px-6 py-8",children:[(0,Jp.jsxs)("header",{className:"mb-6",children:[(0,Jp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),(0,Jp.jsx)("p",{className:"text-gray-500 mt-2",children:"Manage your account and app settings."})]}),(0,Jp.jsx)("div",{className:"bg-gray-100 p-6 rounded-lg shadow-md mb-6",children:(0,Jp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Jp.jsx)("img",{src:"https://placehold.co/80x80/E2E8F0/4A5568?text=NK",alt:"User Avatar",className:"w-16 h-16 rounded-full"}),(0,Jp.jsxs)("div",{children:[(0,Jp.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:l||"User"}),(0,Jp.jsx)("p",{className:"text-gray-600 text-sm",children:u||"No Email"}),(0,Jp.jsxs)("p",{className:"text-xs text-gray-500 break-all",children:["User ID: ",a||"N/A"]})]})]})}),(0,Jp.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,Jp.jsxs)("button",{onClick:s,className:"w-full bg-blue-50 text-blue-700 font-semibold py-3 px-4 rounded-lg flex items-center justify-between hover:bg-blue-100 transition duration-200",children:["Manage Subjects & Tests",(0,Jp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Jp.jsx)("polyline",{points:"9 18 15 12 9 6"})})]}),(0,Jp.jsxs)("button",{onClick:()=>(async(e,t)=>{if(e)try{const n={},r=ou(Bp,"artifacts",Hp,"users",e,"subjects"),i=await cd(r);n.subjects={},i.forEach(e=>{n.subjects[e.id]=e.data()});const s=ou(Bp,"artifacts",Hp,"users",e,"timetable"),o=await cd(s);n.timetable=o.docs.map(e=>c({id:e.id},e.data()));const a=ou(Bp,"artifacts",Hp,"users",e,"todayFocus"),l=await cd(a);n.todayFocus=l.docs.map(e=>c({id:e.id},e.data()));const u=JSON.stringify(n,null,2),d=new Blob([u],{type:"application/json"}),h=URL.createObjectURL(d),f=document.createElement("a");f.href=h,f.download="education_dashboard_data_".concat(e,"_").concat((new Date).toISOString().slice(0,10),".json"),document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(h),t("Data exported successfully!","success")}catch(cy){console.error("Error exporting data:",cy),t("Failed to export data. Please try again.","error")}else t("Authentication not ready. Please log in.","error")})(a,d),className:"w-full bg-green-50 text-green-700 font-semibold py-3 px-4 rounded-lg flex items-center justify-between hover:bg-green-100 transition duration-200",children:["Export All Data",(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,Jp.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,Jp.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})]}),(0,Jp.jsxs)("label",{className:"w-full bg-purple-50 text-purple-700 font-semibold py-3 px-4 rounded-lg flex items-center justify-between hover:bg-purple-100 transition duration-200 cursor-pointer",children:["Import Data",(0,Jp.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);t.subjects&&t.todayFocus&&t.timetable?(g(t),p(!0)):d("Invalid file format. Please upload a valid exported data file.","error")}catch(cy){d("Failed to parse JSON file. Please ensure it's a valid JSON.","error"),console.error("Error parsing import file:",cy)}},e.readAsText(t)}},className:"hidden",id:"importFileInput"}),(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,Jp.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,Jp.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})]})]}),(0,Jp.jsx)("div",{className:"mt-auto pt-6 border-t border-gray-200",children:(0,Jp.jsxs)("button",{onClick:o,className:"w-full bg-red-100 text-red-700 font-semibold py-3 px-4 rounded-lg flex items-center justify-center hover:bg-red-200 transition duration-300",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,Jp.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,Jp.jsx)("polyline",{points:"17 16 22 12 17 8"}),(0,Jp.jsx)("line",{x1:"22",y1:"12",x2:"10",y2:"12"})]}),"Logout"]})}),f&&(0,Jp.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:(0,Jp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm mx-auto",children:[(0,Jp.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Confirm Data Import"}),(0,Jp.jsx)("p",{className:"text-gray-700 mb-6",children:"Importing this data will overwrite your existing subjects, tests, focus items, and timetable entries. Are you sure you want to proceed?"}),(0,Jp.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Jp.jsx)("button",{onClick:()=>{p(!1),g(null),document.getElementById("importFileInput").value=""},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Cancel"}),(0,Jp.jsx)("button",{onClick:async()=>{p(!1),m&&(await(async(e,t,n)=>{if(e)if(n&&"object"===typeof n)try{const r=vd(Bp);if(n.subjects){const t=ou(Bp,"artifacts",Hp,"users",e,"subjects");(await cd(t)).forEach(e=>{r.delete(au(t,e.id))});for(const e in n.subjects){const i=n.subjects[e],s=au(t,e);r.set(s,i)}}if(n.timetable&&Array.isArray(n.timetable)){const t=ou(Bp,"artifacts",Hp,"users",e,"timetable");(await cd(t)).forEach(e=>{r.delete(au(t,e.id))}),n.timetable.forEach(e=>{const n=e.id?au(t,e.id):au(t),{id:i}=e,s=Wp(e,Kp);r.set(n,s)})}if(n.todayFocus&&Array.isArray(n.todayFocus)){const t=ou(Bp,"artifacts",Hp,"users",e,"todayFocus");(await cd(t)).forEach(e=>{r.delete(au(t,e.id))}),n.todayFocus.forEach(e=>{const n=e.id?au(t,e.id):au(t),{id:i}=e,s=Wp(e,Gp);r.set(n,s)})}await r.commit(),t("Data imported successfully! Please refresh the page to see changes.","success")}catch(cy){console.error("Error importing data:",cy),t("Failed to import data. Please ensure the file format is correct.","error")}else t("Invalid data for import.","error");else t("Authentication not ready. Please log in.","error")})(a,d,m),g(null),document.getElementById("importFileInput").value="")},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200",children:"Import Data"})]})]})})]})}),ry=r.memo(e=>{let{onLogin:t}=e;const[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)("");return(0,Jp.jsx)("div",{id:"login-page",className:"flex flex-col items-center justify-center min-h-screen px-6 py-8",children:(0,Jp.jsxs)("div",{className:"w-full",children:[(0,Jp.jsxs)("div",{className:"text-center mb-12",children:[(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-auto text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M10 21h7a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2Z"}),(0,Jp.jsx)("path",{d:"M12 18a2 2 0 0 0 0-4 2 2 0 0 0 0 4Z"}),(0,Jp.jsx)("path",{d:"M12 10V6"})]}),(0,Jp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:"Welcome Back!"}),(0,Jp.jsx)("p",{className:"text-gray-500 mt-2",children:"Sign in to continue your progress."})]}),(0,Jp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n,s)},children:[(0,Jp.jsxs)("div",{className:"mb-4",children:[(0,Jp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Jp.jsx)("input",{type:"text",id:"username",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your username",value:n,onChange:e=>i(e.target.value)})]}),(0,Jp.jsxs)("div",{className:"mb-6",children:[(0,Jp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Jp.jsx)("input",{type:"password",id:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:s,onChange:e=>o(e.target.value)})]}),(0,Jp.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Login"})]}),(0,Jp.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-6",children:["Don't have an account? ",(0,Jp.jsx)("a",{href:"#",className:"font-medium text-blue-600 hover:underline",children:"Sign up"})]})]})})});class iy extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?(0,Jp.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-red-100 text-red-800 p-4 rounded-lg shadow-md",children:[(0,Jp.jsx)("h1",{className:"text-xl font-bold mb-2",children:"Oops! Something went wrong."}),(0,Jp.jsx)("p",{className:"text-sm text-center mb-4",children:"We're sorry for the inconvenience. Please try refreshing the page."}),this.state.error&&(0,Jp.jsxs)("details",{className:"mt-4 p-2 bg-red-200 rounded-md text-xs text-red-900 overflow-auto max-h-40",children:[(0,Jp.jsx)("summary",{children:"Error Details"}),(0,Jp.jsx)("pre",{children:this.state.error.toString()}),(0,Jp.jsx)("pre",{children:this.state.errorInfo.componentStack})]})]}):this.props.children}}const sy=iy,oy=r.memo(e=>{let{message:t,type:n,onClose:r}=e,i="",s="";switch(n){case"success":i="bg-green-500",s="text-white";break;case"error":i="bg-red-500",s="text-white";break;case"info":i="bg-blue-500",s="text-white";break;default:i="bg-gray-700",s="text-white"}return(0,Jp.jsx)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 ".concat(i," ").concat(s," px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 ease-out"),style:{minWidth:"200px",maxWidth:"90%"},children:(0,Jp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Jp.jsx)("span",{children:t}),(0,Jp.jsx)("button",{onClick:r,className:"ml-4 text-white hover:text-gray-200","aria-label":"Close notification",children:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Jp.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})})}),ay=r.memo(e=>{let{currentPage:t,onNavigate:n}=e;const i=[{page:"dashboard",icon:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,Jp.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})},{page:"timetable",icon:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,Jp.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,Jp.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,Jp.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},{page:"trophy",icon:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),(0,Jp.jsx)("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),(0,Jp.jsx)("path",{d:"M4 22h16"}),(0,Jp.jsx)("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),(0,Jp.jsx)("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),(0,Jp.jsx)("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]})},{page:"profile",icon:(0,Jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Jp.jsx)("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),(0,Jp.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}];return(0,Jp.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-40 transition-colors duration-300",children:(0,Jp.jsx)("div",{className:"flex justify-around h-16 max-w-md mx-auto",children:i.map(e=>(0,Jp.jsxs)("button",{onClick:()=>n(e.page),className:"flex flex-col items-center justify-center flex-1 text-center text-xs transition-colors duration-200 ".concat(t===e.page?"text-blue-600":"text-gray-500 hover:text-gray-700"),"aria-label":"Navigate to ".concat(e.page," page"),children:[r.cloneElement(e.icon,{className:"mb-1 ".concat(t===e.page?"text-blue-600":"text-gray-500")}),(0,Jp.jsx)("span",{className:"font-medium capitalize",children:e.page})]},e.page))})})}),ly=()=>{const[e,t]=(0,r.useState)("login"),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)({message:"",type:"",visible:!1}),[a,l]=(0,r.useState)("default"),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!0),[w,x]=(0,r.useState)(!0),[k,S]=(0,r.useState)({}),[E,_]=(0,r.useState)([]),[T,C]=(0,r.useState)(""),[I,N]=(0,r.useState)(""),[A,D]=(0,r.useState)([]),R=(0,r.useRef)(""),P=(0,r.useRef)("");(0,r.useEffect)(()=>{R.current=T},[T]),(0,r.useEffect)(()=>{P.current=I},[I]),(0,r.useEffect)(()=>{const e=localStorage.getItem("isLoggedIn"),n=localStorage.getItem("userId"),r=localStorage.getItem("userName"),s=localStorage.getItem("userEmail");"true"===e&&n?(d(n),f(r||"Guest"),m(s||""),i(!0),t("dashboard")):(i(!1),d(null),f(null),m(null),t("login"),b(!1))},[]),(0,r.useEffect)(()=>{"Notification"in window&&(l(Notification.permission),"default"===Notification.permission&&Notification.requestPermission().then(l))},[]),(0,r.useEffect)(()=>{if(s.visible){const e=setTimeout(()=>o(e=>c(c({},e),{},{visible:!1})),3e3);return()=>clearTimeout(e)}},[s.visible]);const O=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";(e=>function(t){e({message:t,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",visible:!0}),setTimeout(()=>{e(e=>c(c({},e),{},{visible:!1}))},3e3)})(o)(e,t)},[]);(0,r.useEffect)(()=>{let e,t=[];if(g&&u&&Bp){b(!0),x(!0),e=setTimeout(()=>{y&&(b(!1),O("Data loading is slow. Please check your connection.","error"))},15e3);const n=ou(Bp,"artifacts",Hp,"users",u,"subjects"),r=ou(Bp,"artifacts",Hp,"users",u,"timetable"),i=ou(Bp,"artifacts",Hp,"users",u,"todayFocus");let s=0;const o=3,a=()=>{s++,s>=o&&(b(!1),e&&clearTimeout(e))},l=(e,t)=>{console.error("Error listening to ".concat(t," data:"),e),O("Failed to load ".concat(t," data."),"error"),a()};return t.push(hd(n,e=>{const t={};e.forEach(e=>{t[e.id]=e.data().tests||[]}),S(t);const n=Object.keys(t),r=localStorage.getItem("currentTimetableSubject");r&&n.includes(r)?(N(r),C(r)):n.length>0&&(R.current&&n.includes(R.current)||C(n[0]),P.current&&n.includes(P.current)||(N(n[0]),localStorage.setItem("currentTimetableSubject",n[0]))),a()},e=>l(e,"subjects"))),t.push(hd(r,e=>{_(e.docs.map(e=>c({id:e.id},e.data()))),a()},e=>l(e,"timetable"))),t.push(hd(i,e=>{D(e.docs.map(e=>c({id:e.id},e.data())).sort((e,t)=>(e.order||0)-(t.order||0))),x(!1),a()},e=>l(e,"Today's Focus"))),()=>{t.forEach(e=>e()),e&&clearTimeout(e)}}g&&!u&&(b(!1),x(!1))},[g,u,O]);const L=(0,r.useCallback)(e=>(async(e,t,n,r)=>{if(e)if(r)if(n.hasOwnProperty(r))t('Subject "'.concat(r,'" already exists.'),"error");else try{const n=au(Bp,"artifacts",Hp,"users",e,"subjects",r);await ud(n,{tests:[]}),t('Subject "'.concat(r,'" added successfully.'),"success")}catch(cy){console.error("Error adding subject:",cy),t('Failed to add subject "'.concat(r,'".'),"error")}else t("Subject name is required.","error");else t("Authentication not ready. Please log in.","error")})(u,O,k,e),[u,O,k]),j=(0,r.useCallback)(function(e,t,n,r){return async function(e,t,n,r,i,s,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(e)if(i&&s&&o)if(n.hasOwnProperty(r))if(n[r].some(e=>e.title===i))t('A test with the title "'.concat(i,'" already exists in ').concat(r,"."),"error");else try{const n={title:i,mcqs:parseInt(s),date:o,link:a,completed:!1},l=au(Bp,"artifacts",Hp,"users",e,"subjects",r),c=await ad(l);if(c.exists()){const e=[...c.data().tests||[],n];await ud(l,{tests:e},{merge:!0}),t('Test "'.concat(i,'" added to "').concat(r,'".'),"success")}else t("Subject document not found. This might be a sync issue. Please try refreshing.","error")}catch(cy){console.error("Error adding test:",cy),t('Failed to add test "'.concat(i,'".'),"error")}else t("Subject does not exist. Please create the subject first.","error");else t("All test fields (except link) are required.","error");else t("Authentication not ready. Please log in.","error")}(u,O,k,e,t,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:"")},[u,O,k]),M=(0,r.useCallback)(e=>(async(e,t,n,r,i,s,o,a)=>{if(e)if(n.hasOwnProperty(a))try{const l=au(Bp,"artifacts",Hp,"users",e,"subjects",a);await dd(l),r(e=>e.filter(e=>e.subject!==a));const c=ou(Bp,"artifacts",Hp,"users",e,"todayFocus"),u=Gu(c,Xu("subject","==",a)),d=await cd(u),h=vd(Bp);d.forEach(e=>{h.delete(au(c,e.id))}),await h.commit(),i(e=>e.filter(e=>e.subject!==a));const f=ou(Bp,"artifacts",Hp,"users",e,"timetable"),p=Gu(f,Xu("subject","==",a)),m=await cd(p),g=vd(Bp);m.forEach(e=>{g.delete(au(f,e.id))}),await g.commit(),0===Object.keys(n).filter(e=>e!==a).length&&(s(""),o("")),t('Subject "'.concat(a,'" deleted.'),"success")}catch(cy){console.error("Error deleting subject:",cy),t('Failed to delete subject "'.concat(a,'".'),"error")}else t('Subject "'.concat(a,'" not found.'),"error");else t("Authentication not ready. Please log in.","error")})(u,O,k,D,_,C,N,e),[u,O,k]),F=(0,r.useCallback)((e,t)=>(async(e,t,n,r,i,s)=>{if(e)if(n.hasOwnProperty(i)&&n[i].some(e=>e.title===s))try{const n=au(Bp,"artifacts",Hp,"users",e,"subjects",i),o=await ad(n);if(o.exists()){const a=(o.data().tests||[]).filter(e=>e.title!==s);await ud(n,{tests:a},{merge:!0});const l=ou(Bp,"artifacts",Hp,"users",e,"todayFocus"),c=Gu(l,Xu("subject","==",i),Xu("title","==",s)),u=await cd(c),d=vd(Bp);u.forEach(e=>{d.delete(au(l,e.id))}),await d.commit(),r(e=>e.filter(e=>!(e.subject===i&&e.title===s))),t('Test "'.concat(s,'" deleted from "').concat(i,'".'),"success")}else t("Subject document not found. This might be a sync issue. Please try refreshing.","error")}catch(cy){console.error("Error deleting test:",cy),t('Failed to delete test "'.concat(s,'".'),"error")}else t('Test "'.concat(s,'" not found in ').concat(i,"."),"error");else t("Authentication not ready. Please log in.","error")})(u,O,k,D,e,t),[u,O,k]),V=(0,r.useCallback)((e,t,n)=>(async(e,t,n,r,i)=>{if(e)try{const s=au(Bp,"artifacts",Hp,"users",e,"subjects",n),o=await ad(s);if(o.exists()){const a=(o.data().tests||[]).map(e=>e.title===r?c(c({},e),{},{completed:i}):e);await ud(s,{tests:a},{merge:!0});const l=ou(Bp,"artifacts",Hp,"users",e,"todayFocus"),u=Gu(l,Xu("subject","==",n),Xu("title","==",r)),d=await cd(u),h=vd(Bp);d.forEach(e=>{h.update(au(l,e.id),{completed:i})}),await h.commit(),t('Test "'.concat(r,'" marked as ').concat(i?"completed":"incomplete","."),"success")}}catch(cy){console.error("Error toggling test completion:",cy),t("Failed to update test completion status.","error")}else t("Authentication not ready. Please log in.","error")})(u,O,e,t,n),[u,O]),U=(0,r.useCallback)((e,t)=>Qp(u,O,A,e,t),[u,O,A]),z=(0,r.useCallback)(e=>(async(e,t,n)=>{if(e)try{const r=au(Bp,"artifacts",Hp,"users",e,"todayFocus",n);await dd(r),t("Focus item removed.","success")}catch(cy){console.error("Error removing focus item:",cy),t("Failed to remove focus item.","error")}else t("Authentication not ready. Please log in.","error")})(u,O,e),[u,O]),B=(0,r.useCallback)(e=>(async(e,t,n)=>{if(e)try{const r=vd(Bp),i=ou(Bp,"artifacts",Hp,"users",e,"todayFocus");n.forEach((e,t)=>{const n=au(i,e.id);r.update(n,{order:t})}),await r.commit(),t("Focus items reordered.","success")}catch(cy){console.error("Error reordering focus items:",cy),t("Failed to reorder focus items.","error")}else t("Authentication not ready. Please log in.","error")})(u,O,e),[u,O]),q=(0,r.useCallback)((e,t,n,r)=>(async(e,t,n,r,i,s,o)=>{if(e)if(r&&i&&s&&o)try{const a=au(ou(Bp,"artifacts",Hp,"users",e,"timetable"));if(await ud(a,{subject:r,topic:i,date:s,time:o,checked:!1}),t("Study event added successfully!","success"),"granted"===n){const e=new Date("".concat(s,"T").concat(o)),t=new Date,n=e.getTime()-t.getTime()-3e5;n>0?setTimeout(()=>{new Notification("Upcoming Study Event",{body:"".concat(i," for ").concat(r," is starting soon at ").concat(o,"!"),icon:"https://placehold.co/48x48/007bff/ffffff?text=\ud83d\udd14"})},n):console.warn("Event is in the past or too soon for a reminder. No notification scheduled.")}else console.warn("Notification permission not granted. Cannot schedule local notification.")}catch(cy){console.error("Error adding timetable entry:",cy),t("Failed to add study event.","error")}else t("All fields for the timetable event are required.","error");else t("Authentication not ready. Please log in.","error")})(u,O,a,e,t,n,r),[u,O,a]),H=(0,r.useCallback)(e=>(async(e,t,n)=>{if(e)try{const r=au(Bp,"artifacts",Hp,"users",e,"timetable",n);await dd(r),t("Timetable entry deleted.","success")}catch(cy){console.error("Error deleting timetable entry:",cy),t("Failed to delete timetable entry.","error")}else t("Authentication not ready. Please log in.","error")})(u,O,e),[u,O]),W=(0,r.useCallback)((e,t,n,r,i)=>Xp(u,O,e,t,n,r,i),[u,O]),K=(0,r.useCallback)(e=>(async(e,t,n)=>{if(e)try{const r=au(Bp,"artifacts",Hp,"users",e,"timetable",n),i=await ad(r);if(i.exists()){const e=i.data().checked||!1;await ud(r,{checked:!e},{merge:!0}),t("Timetable event marked as ".concat(e?"incomplete":"completed","."),"success")}else t("Timetable entry not found.","error")}catch(cy){console.error("Error toggling timetable event completion:",cy),t("Failed to update timetable event status.","error")}else t("Authentication not ready. Please log in.","error")})(u,O,e),[u,O]),G=(0,r.useCallback)((e,t)=>((e,t,n,r,i,s,o)=>{const a="nikhil_user_id";"nikhil"===s&&"password123"===o?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userId",a),localStorage.setItem("userName",s),localStorage.setItem("userEmail","nikhil@example.com"),n(a),r(s),i("nikhil@example.com"),t(!0),e("Logged in successfully!","success")):e("Invalid username or password.","error")})(O,i,d,f,m,e,t),[O]),Q=(0,r.useCallback)(async()=>{await Yp(O,i,d,f,m),t("login")},[O]),X=(0,r.useCallback)(()=>(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),localStorage.removeItem("currentTimetableSubject"),void window.location.reload()),[]),Y=(0,r.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(e),"trophy"===e&&n.fromTimetable&&n.subject&&C(n.subject),window.scrollTo(0,0)},[]);return(0,Jp.jsxs)(Jp.Fragment,{children:[(0,Jp.jsx)("main",{id:"main-content",className:"pb-24",children:(0,Jp.jsx)(sy,{children:(()=>{if(!g||y)return(0,Jp.jsx)(Rv,{});if(!n)return(0,Jp.jsx)(ry,{onLogin:G});if("login"===e&&n)return t("dashboard"),null;switch(e){case"dashboard":return(0,Jp.jsx)(Uv,{testData:k,todayFocusItems:A,timetableEntries:E,addFocusItem:U,removeFocusItem:z,reorderFocusItems:B,onNavigate:Y,userName:h,handleToggleTestCompletion:V,isLoadingTodayFocus:w,currentTimetableSubject:I,setCurrentTimetableSubject:N,setCurrentSelectedSubject:C,navigateToTrophyPage:e=>Y("trophy",{fromTimetable:!0,subject:e})});case"timetable":return(0,Jp.jsx)(Qv,{timetableEntries:E,addTimetableEntry:q,deleteTimetableEntry:H,updateTimetableEntry:W,onCheck:K,showNotification:O,userId:u});case"trophy":return(0,Jp.jsx)($v,{testData:k,currentSelectedSubject:T,setCurrentSelectedSubject:C,addTest:j,deleteTest:F,handleToggleTestCompletion:V});case"manage-tests":return(0,Jp.jsx)(ty,{testData:k,addSubject:L,addTest:j,deleteSubject:M,deleteTest:F,onBackToProfile:()=>Y("profile")});case"profile":return(0,Jp.jsx)(ny,{onManageContent:()=>Y("manage-tests"),onLogout:Q,userName:h,userEmail:p,onResetLocalData:X,showNotification:O,currentUserId:u});default:return t("dashboard"),(0,Jp.jsx)(Rv,{})}})()})}),n&&(0,Jp.jsx)(ay,{currentPage:e,onNavigate:Y}),s.visible&&(0,Jp.jsx)(oy,{message:s.message,type:s.type,onClose:()=>o(e=>c(c({},e),{},{visible:!1}))})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/education-dashboard/service-worker.js",{scope:"/education-dashboard/"}).then(e=>{console.log("Service Worker registered successfully with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})});i.createRoot(document.getElementById("root")).render((0,Jp.jsx)(r.StrictMode,{children:(0,Jp.jsx)(ly,{})}))})();
//# sourceMappingURL=main.8874134c.js.map