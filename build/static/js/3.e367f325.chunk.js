"use strict";(self.webpackChunkmy_education_dashboard=self.webpackChunkmy_education_dashboard||[]).push([[3],{3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(43),l=a(277),n=a(579);const r=s.memo(e=>{let{event:t,isEditMode:a,onEdit:s}=e;const r=(0,l.j)(),o=((e,t,a)=>{if(a)return{text:"Completed",colorClass:"text-green-600"};const s=new Date;return new Date("".concat(e,"T").concat(t))<s?{text:"Missed",colorClass:"text-red-600"}:{text:"Pending",colorClass:"text-yellow-600"}})(t.date,t.time,t.checked);return(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 mb-3 rounded-xl shadow-sm border ".concat(t.checked?"bg-green-100 border-green-300":"bg-white border-gray-200"),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:t.time}),(0,n.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:t.subject}),(0,n.jsx)("h4",{className:"text-base text-gray-600",children:t.topic}),(0,n.jsx)("p",{className:"text-sm font-semibold ".concat(o.colorClass),children:o.text})]}),(0,n.jsx)("div",{className:"flex items-center",children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>s(t.id),className:"p-1.5 mr-4 rounded-full text-gray-400 hover:text-blue-500 transition-colors duration-200","aria-label":"Edit event",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,n.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,n.jsx)("button",{onClick:()=>r.deleteTimetableEntry(t.id),className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 transition-colors duration-200 mr-2","aria-label":"Delete event",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M3 6h18"}),(0,n.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,n.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,n.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,n.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}):(0,n.jsx)("button",{onClick:()=>r.checkTimetableEntry(t.id),className:"w-6 h-6 rounded-full border-2 ".concat(t.checked?"bg-green-500 border-green-500":"border-gray-300"),"aria-label":t.checked?"Mark as incomplete":"Mark as complete",children:t.checked&&(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white m-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})})]},t.id)});var o=a(950);const i=s.memo(e=>{let{isOpen:t,onClose:a,eventData:r}=e;const i=(0,l.j)(),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[b,h]=(0,s.useState)("");(0,s.useEffect)(()=>{r&&(c(r.subject||""),m(r.topic||""),g(r.date||""),h(r.time||""))},[r]);if(!t)return null;const f=(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Study Event"}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"edit-modal-subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,n.jsx)("input",{type:"text",id:"edit-modal-subject",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Anatomy",value:d,onChange:e=>c(e.target.value)})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"edit-modal-topic",className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),(0,n.jsx)("input",{type:"text",id:"edit-modal-topic",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"e.g., Cardiovascular System",value:u,onChange:e=>m(e.target.value)})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"edit-modal-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,n.jsx)("input",{type:"date",id:"edit-modal-date",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:x,onChange:e=>g(e.target.value)})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"edit-modal-time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),(0,n.jsx)("input",{type:"time",id:"edit-modal-time",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",value:b,onChange:e=>h(e.target.value)})]}),(0,n.jsx)("button",{onClick:async()=>{r&&r.id?d&&u&&x&&b?(await i.updateTimetableEntry(r.id,d,u,x,b),a()):i.showNotification("All fields are required.","error"):i.showNotification("No event selected for editing.","error")},className:"w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Update Event"}),(0,n.jsx)("button",{onClick:a,className:"w-full mt-2 bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"})]})});return(0,o.createPortal)(f,document.body)});var d=a(377);const c=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(s)};function u(e,t){if(e.timetableEntries.length!==t.timetableEntries.length||e.selectedDisplayDate!==t.selectedDisplayDate)return!1;for(let a=0;a<e.timetableEntries.length;a++){const s=e.timetableEntries[a],l=t.timetableEntries[a];if(s.id!==l.id||s.checked!==l.checked||s.subject!==l.subject||s.topic!==l.topic||s.date!==l.date||s.time!==l.time)return!1}return!0}const m=s.memo(e=>{let{timetableEntries:t,showNotification:a,userId:o}=e;const u=(0,l.j)(),[m,x]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[p,y]=(0,s.useState)(null),[j,v]=(0,s.useState)(c(new Date)),w=(0,s.useCallback)(e=>{f(e),e||y(null)},[]),k=(0,s.useCallback)(e=>{const a=t.find(t=>t.id===e);a&&(y(a),w(!0))},[t,w]),N=((0,s.useCallback)(async(e,t,a,s,l)=>{await u.updateTimetableEntry(e,t,a,s,l),w(!1)},[u,w]),(0,s.useMemo)(()=>{const e=new Date(j),t=6e4*e.getTimezoneOffset();return new Date(e.getTime()+t)},[j])),C=(0,s.useMemo)(()=>[...t].filter(e=>e.date===j).sort((e,t)=>{const a=e.time.localeCompare(t.time);return 0!==a?a:e.checked===t.checked?0:e.checked?1:-1}),[t,j]),E=(0,s.useMemo)(()=>[{name:"subject",label:"Subject",placeholder:"e.g., Anatomy",required:!0},{name:"topic",label:"Topic",placeholder:"e.g., Cardiovascular System",required:!0},{name:"date",label:"Date",type:"date",required:!0,defaultValue:j},{name:"time",label:"Time",type:"time",required:!0,defaultValue:"09:00"}],[j]),S=(0,s.useCallback)(e=>{v(c(e))},[]),D=(0,s.useCallback)(()=>{const e=new Date(N);e.setDate(e.getDate()-1),S(e)},[N,S]),M=(0,s.useCallback)(()=>{const e=new Date(N);e.setDate(e.getDate()+1),S(e)},[N,S]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{id:"page-timetable",className:"page px-6 py-8",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable"}),(0,n.jsxs)("button",{onClick:()=>x(!m),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center","aria-label":m?"Done editing timetable":"Edit timetable",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,n.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,n.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),m?"Done":"Edit"]})]}),(0,n.jsx)("p",{className:"text-gray-500 mb-2",children:"Upcoming Study Schedule"}),(0,n.jsxs)("div",{className:"flex items-center justify-between px-0 py-6 text-gray-700 font-semibold text-lg",children:[(0,n.jsx)("button",{onClick:D,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Previous day",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,n.jsx)("span",{className:"flex-grow text-center text-lg sm:text-base",children:N.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,n.jsx)("button",{onClick:M,className:"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200","aria-label":"Next day",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]}),(0,n.jsx)("div",{id:"timetable-events-list",className:"space-y-4 bg-white rounded-lg min-h-[100px] shadow-sm",children:0===C.length?(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No events scheduled for this date."}):C.map(e=>(0,n.jsx)(r,{event:e,isEditMode:m,onDelete:u.deleteTimetableEntry,onCheck:u.checkTimetableEntry,onEdit:k},e.id))}),(0,n.jsxs)("button",{onClick:()=>b(!0),className:"w-full bg-blue-50 text-blue-700 font-semibold mt-6 py-2 px-4 rounded-lg flex items-center justify-center hover:bg-blue-100 transition duration-300 mb-6",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:[(0,n.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,n.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add New Study Event"]})]}),(0,n.jsx)(d.A,{isOpen:g,onClose:()=>b(!1),onSave:e=>{u.addTimetableEntry(e.subject,e.topic,e.date,e.time)},title:"Add New Study Event",fields:E}),(0,n.jsx)(i,{isOpen:h,onClose:()=>w(!1),eventData:p})]})},u)},377:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(555),l=a(43),n=a(277),r=a(579);const o={},i=e=>{let{isOpen:t,onClose:a,onSave:i,title:d,fields:c,initialState:u=o}=e;const m=(0,n.j)(),[x,g]=(0,l.useState)({});(0,l.useEffect)(()=>{if(t){const e=c.reduce((e,t)=>(e[t.name]=u[t.name]||t.defaultValue||"",e),{});g(e)}else g({})},[t,c,u]);const b=e=>{const{name:t,value:a}=e.target;g(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:d}),(0,r.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),"textarea"===e.type?(0,r.jsx)("textarea",{id:e.name,name:e.name,placeholder:e.placeholder||"",value:x[e.name]||"",onChange:b,disabled:e.disabled||!1,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"}):"select"===e.type?(0,r.jsx)("select",{id:e.name,name:e.name,value:x[e.name]||"",onChange:b,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200",children:e.options&&e.options.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,r.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,placeholder:e.placeholder||"",value:x[e.name]||"",onChange:b,disabled:e.disabled||!1,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 disabled:bg-gray-200"})]},e.name))}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{for(const e of c)if(e.required&&!x[e.name])return void(m.showNotification?m.showNotification("".concat(e.label," is required."),"error"):console.error("".concat(e.label," is required.")));i?i(x):m.addTimetableEntry&&m.addTimetableEntry(x),a()},className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300",children:"Save"})]})]})}):null}}}]);
//# sourceMappingURL=3.e367f325.chunk.js.map